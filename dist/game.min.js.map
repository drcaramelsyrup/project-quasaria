{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/app.js","src/assets.js","src/objects/AreaTransitionWindow.js","src/objects/Argument.js","src/objects/ArgumentManager.js","src/objects/BattleUi.js","src/objects/Card.js","src/objects/Clickable.js","src/objects/ConversationManager.js","src/objects/DialogueWindow.js","src/objects/HealthBar.js","src/objects/Icon.js","src/objects/MemoryBankWindow.js","src/objects/NPC.js","src/objects/Placeable.js","src/objects/Player.js","src/objects/Room.js","src/objects/SaveButton.js","src/objects/Scrollbar.js","src/objects/Toast.js","src/states/Battleground.js","src/states/Boot.js","src/states/Credits.js","src/states/Game.js","src/states/GameOver.js","src/states/MainMenu.js","src/states/Preloader.js","src/states/index.js","src/utils/CustomActions.js","static/assets/areas.json","static/assets/items.json","static/assets/npcs.json","static/assets/textstyles.json"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"game.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\n * `app` module\n * ============\n *\n * Provides the game initialization routine.\n */\n\n'use strict';\n\n// Import game states.\nvar states = require('./states');\n\nexports.init = function () {\n  var game = new Phaser.Game(800, 600, Phaser.AUTO);\n\n  // Dynamically add all required game states.\n  Object\n    .keys(states)\n    .forEach(function (key) {\n      game.state.add(key, states[key]);\n    });\n\n  game.state.start('Boot');\n\n  return game;\n};\n","/*\n * `assets` module\n * ===============\n *\n * Declares static asset packs to be loaded using the `Phaser.Loader#pack`\n * method. Use this module to declare game assets.\n */\n\n'use strict';\n\n// -- Splash screen assets used by the Preloader.\nexports.boot = [{\n  key: 'splash-screen',\n  type: 'image'\n}, {\n  key: 'progress-bar',\n  type: 'image'\n}];\n\nexports.main_menu = [{\n  key: 'quasaria-logo-MM',\n  type: 'image'\n}, {\n  key: 'continueButton',\n  type: 'image'\n}, {\n  key: 'menu_screen',\n  type: 'image',\n  url: 'backgrounds/menu_screen_scaled.png'\n}];\n\n\n// -- General assets used throughout the game.\nexports.game = [{\n  key: 'quasaria-logo',\n  type: 'image'\n}, {\n  key: 'shuttle',\n  type: 'image',\n  url: 'backgrounds/shuttle.png'\n}, {\n  key: 'hangar',\n  type: 'image',\n  url: 'backgrounds/hangar.png'\n}, {\n  key: 'medbay',\n  type: 'image',\n  url: 'backgrounds/medbay.png'\n}, {\n  key: 'listener',\n  type: 'image',\n  url: 'items/listener.png'\n}, {\n  key: 'note',\n  type: 'image',\n  url: 'items/note.png'\n}, {\n  key: 'biologistApproval',\n  type: 'image',\n  url: 'avatars/talvine.png'\n}, {\n  key: 'psychologistApproval',\n  type: 'image',\n  url: 'avatars/valken.png'\n}, {\n  key: 'shuttle-placeable',\n  type: 'image',\n  url: 'items/shuttle-placeable.png'\n}, {\n  key: 'vesper-npc',\n  type: 'image',\n  url: 'npcs/vesper.png'\n}, {\n  key: 'talvine-npc',\n  type: 'image',\n  url: 'npcs/talvine.png'\n}, {\n  key: 'valken-npc',\n  type: 'image',\n  url: 'npcs/valken.png'\n}, {\n  key: 'gleaming-shoal-npc',\n  type: 'image',\n  url: 'npcs/gleaming-shoal.png'\n}];\n\n// -- UI-specific assets.\nexports.ui = [{\n  key: 'dialogue-choice-button',\n  type: 'image',\n  url: 'ui/dialogue-choice-button.png'\n}, {\n  key: 'dialogue-panel',\n  type: 'image',\n  url: 'ui/dialogue-panel.png'\n}, {\n  key: 'toast',\n  type: 'image',\n  url: 'ui/toast.png'\n}, {\n  key: 'memory-bank-button',\n  type: 'image',\n  url: 'ui/memory-bank-button.png'\n}, {\n  key: 'memory-bank-icon',\n  type: 'image',\n  url: 'ui/memory-bank-icon.png'\n}, {\n  key: 'memory-bank-icon-mask',\n  type: 'image',\n  url: 'ui/memory-bank-icon-mask.png'\n}, {\n  key: 'memory-bank-next',\n  type: 'image',\n  url: 'ui/memory-bank-next.png'\n}, {\n  key: 'memory-bank',\n  type: 'image',\n  url: 'ui/memory-bank.png'\n}, {\n  key: 'saveButton',\n  type: 'image'\n}, {\n  key: 'button',\n  type: 'image',\n  url: 'ui/button.png'\n}, {\n  key: 'battle-background',\n  type: 'image',\n  url: 'ui/battle-background.png'\n}, {\n  key: 'battle-overlay',\n  type: 'image',\n  url: 'ui/battle-overlay-scaled.png'\n}, {\n  key: 'memory-bank-icon-fill',\n  type: 'image',\n  url: 'ui/memory-bank-icon-fill.png'\n}];\n\n// -- Conversation jsons and avatars.\nexports.conversations = [{\n  key: 'prologue01',\n  type: 'json',\n  url: 'conversations/prologue01.json'\n}, {\n  key: 'prologue02',\n  type: 'json',\n  url: 'conversations/prologue02.json'\n}, {\n  key: 'vesper01',\n  type: 'json',\n  url: 'conversations/vesper01.json'\n}, {\n  key: 'talvine01',\n  type: 'json',\n  url: 'conversations/talvine01.json'\n}, {\n  key: 'valken01',\n  type: 'json',\n  url: 'conversations/valken01.json'\n}, {\n  key: 'gleaming-shoal01',\n  type: 'json',\n  url: 'conversations/gleaming-shoal01.json'\n}, {\n  key: 'mysterious-voice',\n  type: 'image',\n  url: 'avatars/mysterious-voice.png'\n}, {\n  key: 'kismet',\n  type: 'image',\n  url: 'avatars/kismet.png'\n}, {\n  key: 'gleaming-shoal',\n  type: 'image',\n  url: 'avatars/gleaming-shoal.png'\n}, {\n  key: 'gleaming-shoal-portrait',\n  type: 'image',\n  url: 'avatars/gleaming-shoal-portrait.png'\n}, {\n  key: 'unknown-alien',\n  type: 'image',\n  url: 'avatars/gleaming-shoal-silhouette.png'\n}, {\n  key: 'vesper',\n  type: 'image',\n  url: 'avatars/vesper.png'\n}, {\n  key: 'talvine',\n  type: 'image',\n  url: 'avatars/talvine.png'\n}, {\n  key: 'valken',\n  type: 'image',\n  url: 'avatars/valken.png'\n}, {\n  key: 'invisible',\n  type: 'image',\n  url: 'avatars/invisible.png'\n}];\n\n// -- Sound effects and background music\nexports.sounds = [{\n  key: 'sunrise-from-orbit',\n  type: 'audio',\n  urls: ['music/Sunrise From Orbit (Demo).mp3']\n}, {\n  key: 'menu-theme-terraform',\n  type: 'audio',\n  urls: ['music/Terraforming-Begins_Looping.mp3']\n}, {\n  key: 'off-limits',\n  type: 'audio',\n  urls: ['music/Sector-Off-Limits_Looping.mp3']\n}, {\n  key: 'puzzle1',\n  type: 'audio',\n  urls: ['music/Puzzle-Game_Looping.mp3']\n}, {\n  key: 'puzzle2',\n  type: 'audio',\n  urls: ['music/Puzzle-Game-2_Looping.mp3']\n}, {\n  key: 'lostjungle',\n  type: 'audio',\n  urls: ['music/Lost-Jungle_Looping.mp3']\n}, {\n  key: 'cold-moon',\n  type: 'audio',\n  urls: ['music/Cold-Moon.mp3']\n}, {\n  key: 'correct-card',\n  type: 'audio',\n  urls: ['soundfx/positive/glow_med_L_to_R_002.wav']\n}, {\n  key: 'wrong-card',\n  type: 'audio',\n  urls: ['soundfx/negative/SW011_Alarms_construction-kit-element_081.wav']\n}, {\n  key: 'save-notification',\n  type: 'audio',\n  urls: ['soundfx/SFX-ARCADIA_Notification01.wav']\n}, {\n  key: 'swish-close',\n  type: 'audio',\n  urls: ['soundfx/13th-whoosh-swing-sound.mp3']\n}, {\n  key: 'swish-open',\n  type: 'audio',\n  urls: ['soundfx/swoosh-metal-rod-swing-sound-made-with-bamboo-stick.mp3']\n}, {\n  key: 'inventory-add',\n  type: 'audio',\n  urls: ['soundfx/SFX-ARCADIA_Error03.wav']\n}];\n\n// --logic battle placeholder images\n\nexports.logic_battle = [{\n  key: 'alien-stare',\n  type: 'image',\n  url: 'battle/alien-stare.png'\n}, {\n  key: 'greek-sphinx',\n  type: 'image',\n  url: 'battle/greek-sphinx.png'\n}, {\n  key: 'cyborg-face',\n  type: 'image',\n  url: 'battle/cyborg-face.png'\n}, {\n  key: 'curly-mask',\n  type: 'image',\n  url: 'battle/curly-mask.png'\n}, {\n  key: 'lunar-module',\n  type: 'image',\n  url: 'battle/lunar-module.png'\n}, {\n  key: 'fencer',\n  type: 'image',\n  url: 'battle/fencer.png'\n}, {\n  key: 'new-born',\n  type: 'image',\n  url: 'battle/new-born.png'\n}, {\n  key: 'saint-basil-cathedral',\n  type: 'image',\n  url: 'battle/saint-basil-cathedral.png'\n}, {\n  key: 'goblin-head',\n  type: 'image',\n  url: 'battle/goblin-head.png'\n}, {\n  key: 'xenobio',\n  type: 'image',\n  url: 'battle/xenobio.png'\n}, {\n  key: 'xenopsych',\n  type: 'image',\n  url: 'battle/xenopsych.png'\n}, {\n  key: 'quasaria-logo-fill',\n  type: 'image'\n}, {\n  key: 'battle01',\n  type: 'json',\n  url: 'battle/battle01.json'\n}];\n","/*\n * AreaTransition\n * ===============\n *\n * UI window for area transition\n */\n\n'use strict';\n\nvar areas = require('../../static/assets/areas.json');\n\nmodule.exports = AreaTransitionWindow;\n\nfunction areaTransitionButtonToggle() {\n  // unresponsive while animating\n  if (this._isTweening)\n    return;\n\n  this._isTweening = true;\n  var timeToTween = 500;  // milliseconds\n\n  // hide panel\n  if (this.panel.visible) {\n    this._game.sound.play('swish-close');\n    this._game.add.tween(this.panel).to(\n        {x: 0 - this.panelWidth - this._memoryPadding}, timeToTween, Phaser.Easing.Exponential.Out, true\n      ).onComplete.add(\n        function () {\n          this.panel.visible = false;\n          this._isTweening = false;\n        }, this\n      );\n    return;\n  }\n\n  // show panel\n\n  // if memory bank window is open, close it\n  if (this._game.memoryBankWindow.panel.visible) {\n    this._game.memoryBankWindow.panel.visible = false;\n  }\n\n  this.panel.visible = true;\n  this.display();\n  //each time you press the button it should refresh the areas that it displays\n\n  this.panel.x = 0 - this.panelWidth - this._memoryPadding;\n  this._game.sound.play('swish-open');\n  this._game.add.tween(this.panel).to(\n      {x: this._baseX}, timeToTween, Phaser.Easing.Exponential.Out, true\n    ).onComplete.add(function () { this._isTweening = false; }, this);\n}\n\nfunction AreaTransitionWindow(game/*, ...args*/) {\n  Phaser.Group.call(this, game/*, ...args*/);\n\n  this._game = game;\n\n  // private members specifying margin and padding\n  this._memoryTextOriginX = 100;\n  this._memoryTextOriginY = 155;\n  this._memoryPadding = 32;\n  this._itemOriginX = 80;\n  this._itemOriginY = 25;\n  this._baseX = this._memoryPadding / 2;\n  this._baseY = this._memoryPadding * 2;\n\n  // memory bank window dimensions\n  this.panelHeight = game.height * 1/2 - this._memoryPadding / 2;\n  this.panelWidth = game.width - this._memoryPadding;\n  this._rowCapacity = 5;  // items per row\n  this._itemStart = 0;  // determines which row to show\n\n  // window-dependent private member dimensions\n  this._memoryTextWidth = this.panelWidth - 185;\n  this._itemPadding = this.panelWidth / 50;\n  this._nextOriginX = this.panelWidth - 55;\n  this._nextOriginY = 0;\n  this._prevOriginX = -18;\n  this._prevOriginY = 0;\n\n  /**\n   * Panel\n   */\n\n  game.slickUI.add(\n    this.panel = new SlickUI.Element.DisplayObject(\n      this._baseX, this._baseY, game.make.sprite(0,0, 'memory-bank'),\n      this.panelWidth, this.panelHeight));\n  this.panel.displayObject.width = this.panelWidth;\n  this.panel.displayObject.height = this.panelHeight;\n\n  // by default, not displayed\n  this.panel.visible = false;\n  this.panel.alpha = 0.8;\n\n  /**\n   * Toggle button\n   */\n  // until you click on the toggle button\n  game.slickUI.add(\n    this.toggleButton = new SlickUI.Element.DisplayObject(\n      this._memoryPadding,this._memoryPadding, game.make.button(0,0, 'button')));\n  // set scale such that width = 1/8 panel width\n  this.toggleButton.displayObject.scale.setTo(\n    (this.panelWidth / 8) / this.toggleButton.displayObject.width);\n  //this.toggleButton.x = game.width - this._memoryPadding - this.toggleButton.displayObject.width;\n  // show panel callback\n  this.toggleButton.events.onInputDown.add(areaTransitionButtonToggle, this);\n  this.toggleButton.alpha = 0.9;\n\n  var toggleStyle = { font: '14px Goudy Bookletter 1911', fill: '#48f2ff', boundsAlignH: 'center', boundsAlignV: 'middle'};\n  this.toggleButton.add(\n    this.toggleText = new SlickUI.Element.DisplayObject(0, 0, game.make.text(0, 0, 'AREAS', toggleStyle)));\n  this.toggleText.displayObject.setTextBounds(0, this.toastTextY, this.toggleButton.displayObject.width, this.toggleButton.displayObject.height);\n\n  /**\n   * Text - name and description\n   */\n  var nameTextStyle = { font: '14px Goudy Bookletter 1911', fill: '#48f2ff', wordWrap: true, wordWrapWidth: this._memoryTextWidth, fontWeight: 'bold', boundsAlignH: 'center' };\n  this.panel.add(\n    this.nameText = new SlickUI.Element.DisplayObject(\n      this._memoryTextOriginX,\n      this._memoryTextOriginY,\n      game.make.text(0,0, '', nameTextStyle), this._memoryTextWidth));\n  // for alignment purposes\n  var nameTextHeight = this.nameText.displayObject.getBounds().height;\n  this.nameText.displayObject.setTextBounds(0,0, this._memoryTextWidth, nameTextHeight);\n\n  var descTextStyle = { font: '14px Open Sans', fill: '#48f2ff', wordWrap: true, wordWrapWidth: this._memoryTextWidth, align: 'left' };\n  this.panel.add(\n    this.descText = new SlickUI.Element.DisplayObject(\n      this._memoryTextOriginX,\n      this._memoryTextOriginY + nameTextHeight,\n      game.make.text(0,0, '', descTextStyle), this._memoryTextWidth));\n\n  /**\n   * Bookkeeping\n   */\n  // are we currently animating?\n  this._isTweening = false;\n  this._itemDisplayObjects = []; // for deletion purposes\n  this._navButtons = [];\n  this.areasToShow = Object.keys(areas).filter(function(area) {\n    return areas[area]['navigable'] == true;\n  });\n}\n\nAreaTransitionWindow.prototype = Object.create(Phaser.Group.prototype);\nAreaTransitionWindow.prototype.constructor = AreaTransitionWindow;\n\n// Utility functions: instantly hide or show panel/UI\nAreaTransitionWindow.prototype.hidePanel = function () {\n  this.panel.visible = false;\n  this.panel.x = 0 - this.panelWidth - this._memoryPadding;\n};\n\nAreaTransitionWindow.prototype.disable = function () {\n  this.hidePanel();\n  this.toggleButton.visible = false;\n  this.toggleButton.inputEnabled = false;\n};\n\nAreaTransitionWindow.prototype.enable = function () {\n  this.hidePanel();\n  this.toggleButton.visible = true;\n  this.toggleButton.inputEnabled = true;\n  //not sure that this will re-add listeners\n};\n\nAreaTransitionWindow.prototype.display = function () {\n  this.cleanWindow();\n  this.displayAreas();\n  this.showNavButtons();\n};\n\nAreaTransitionWindow.prototype.cleanWindow = function () {\n  for (var i = 0; i < this._itemDisplayObjects.length; i++) {\n    var item = this._itemDisplayObjects[i];\n    item.container.displayGroup.removeAll(true);\n    item.container.displayGroup.destroy();\n  }\n  for (i = 0; i < this._navButtons.length; i++) {\n    var navButton = this._navButtons[i];\n    navButton.container.displayGroup.removeAll(true);\n    navButton.container.displayGroup.destroy();\n  }\n  this._itemDisplayObjects = [];\n  this._navButtons = [];\n};\n\nAreaTransitionWindow.prototype.displayAreas = function () {\n  this.areasToShow = Object.keys(areas).filter(function(area) {\n    let seen = this._game.player.seenAreas.includes(area);\n    //this filter will add rooms seen in the past that should be avaliable in the window\n    return areas[area]['navigable'] == true && this._game.room.name != area && seen;\n  }, this);\n  //this is going to leave things out, or have cycles\n  // we will have to think carefully when adding this information to the json\n  // do we want a given room to only appear if seen or do we want to have a group of\n  // rooms all navigable from one another?\n  // ie hanger must be reached first, but once there you have immediate access to talvine\n  for (let area of this._game.room.area.areaAccess){\n    if (!this.areasToShow.includes(area)){\n      this.areasToShow.push(area);\n    }\n  }\n\n  var itemEnd = this._itemStart + this._rowCapacity < this.areasToShow.length\n    ? this._itemStart + this._rowCapacity\n    : this.areasToShow.length;\n\n  for (var i = this._itemStart; i < itemEnd; i++) {\n    var itemId = this.areasToShow[i];\n\n    // scaled width = 1/7 panel width;\n    var desiredWidth = (this.panelWidth / 7);\n    var assetSprite = this._game.make.sprite(0,0, itemId);\n    assetSprite.scale.setTo(desiredWidth / assetSprite.width);\n\n    var maskSprite = this._game.make.sprite(0,0, 'memory-bank-icon-mask');\n    maskSprite.scale.setTo(desiredWidth / maskSprite.width);\n\n    var maskedBmd = this._game.make.bitmapData(maskSprite.width, maskSprite.height);\n    maskedBmd.alphaMask(assetSprite, maskSprite);\n\n    var itemSprite = this._game.make.sprite(0,0, maskedBmd);\n    var slickItem;\n    this.panel.add(slickItem = new SlickUI.Element.DisplayObject(\n      this._itemOriginX + (i - this._itemStart)*(this._itemPadding + itemSprite.width), this._itemOriginY,\n      itemSprite));\n\n    var borderSprite = this._game.make.sprite(0,0, 'memory-bank-icon');\n    borderSprite.scale.setTo(desiredWidth / borderSprite.width);\n    var slickBorder;\n    this.panel.add(slickBorder = new SlickUI.Element.DisplayObject(\n      this._itemOriginX + (i - this._itemStart)*(this._itemPadding + itemSprite.width), this._itemOriginY,\n      borderSprite));\n\n    itemSprite.inputEnabled = true;\n    itemSprite.input.useHandCursor = true;\n    itemSprite.events.onInputOver.add(function () {\n      this.nameText.displayObject.text = areas[this.itemId]['name'].toUpperCase();\n    }, {nameText: this.nameText, itemId: itemId});\n    itemSprite.events.onInputUp.add(function() {\n      this.game.room.loadArea(this.itemId);\n    }, {game: this._game, itemId: itemId});\n    itemSprite.events.onInputUp.add(areaTransitionButtonToggle, this);\n\n    this._itemDisplayObjects.push(slickItem);\n    this._itemDisplayObjects.push(slickBorder);\n  }\n};\n\nAreaTransitionWindow.prototype.showNavButtons = function () {\n\n  // next buttons\n  if (this._itemStart + this._rowCapacity < this.areasToShow.length) {\n    var nextButton = this._game.make.button(0,0,'memory-bank-next');\n    var slickNext;\n    this.panel.add(slickNext = new SlickUI.Element.DisplayObject(\n      this._nextOriginX, this._nextOriginY, nextButton));\n    // scaled by height, equal to panel height\n    nextButton.scale.setTo(this.panelHeight / nextButton.height);\n    this._navButtons.push(slickNext);\n\n    nextButton.events.onInputUp.add(function () {\n      this.switchRow(true);\n      this.display();\n    }, this);\n\n  }\n\n  // prev buttons\n  if (this._itemStart > 0) {\n    var prevButton = this._game.make.button(0,0,'memory-bank-next');\n    // rotate sprite\n    prevButton.anchor.setTo(0.5, 0.5);\n    prevButton.scale.y *= -1;\n    prevButton.anchor.setTo(1,1);\n\n    var slickPrev;\n    this.panel.add(slickPrev = new SlickUI.Element.DisplayObject(\n      this._prevOriginX, this._prevOriginY,\n      prevButton));\n    this._navButtons.push(slickPrev);\n\n    prevButton.scale.setTo(this.panelHeight / prevButton.height);\n\n    prevButton.events.onInputUp.add(function () {\n      this.switchRow(false);\n      this.display();\n    }, this);\n\n  }\n};\n\nAreaTransitionWindow.prototype.switchRow = function (wantsNextRow) {\n  if (wantsNextRow && this._itemStart + this._rowCapacity < this.areasToShow.length) {\n    this._itemStart += this._rowCapacity;\n    return;\n  }\n  if (!wantsNextRow && this._itemStart - this._rowCapacity >= 0) {\n    this._itemStart -= this._rowCapacity;\n    return;\n  }\n};\n\nAreaTransitionWindow.prototype.update = function () {\n  // TODO: Stub.\n};\n","'use strict';\n\n\nfunction Argument(game, x, y, assetName, match) {\n  Phaser.Sprite.call(this, game, x, y, assetName);\n  this.assetName = assetName;\n  this.inputEnabled = true;\n  this.input.useHandCursor = true;\n  this.key = match;\n}\n\nArgument.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = Argument.prototype.constructor = Argument;\n","/*\n * ArgumentManager\n * ===============\n *\n * Extension of ConversationManager for Logic Battles\n */\n\n'use strict';\n\nvar ConversationManager = require('./ConversationManager');\nvar npcs = require('../../static/assets/npcs.json');\n\nmodule.exports = ArgumentManager;\n\nfunction ArgumentManager(game, customActions/*, ...args*/) {\n  // TODO:\n  //   1. Edit constructor parameters accordingly.\n  //   2. Adjust object properties.\n\n  ConversationManager.call(this, game, customActions);\n  this.argIdx = 0;\n  this.wantsArgumentText = false;\n  this.argTextType = 'incorrect';\n\n  this.interludeCompleteSignal = new Phaser.Signal();\n\n}\nArgumentManager.prototype = Object.create(ConversationManager.prototype);\nArgumentManager.prototype.constructor = ArgumentManager;\n\nArgumentManager.prototype.update = function () {\n  // TODO: Stub.\n};\n\n/** BEGIN OVERRIDE FUNCTIONS */\nArgumentManager.prototype.getResponses = function () {\n  if (this.wantsArgumentText)\n    return [{ 'target': this.argIdx+1, 'text': 'Next' }];\n  else if ('responses' in this.conversation[this.idx]) {\n    return this.conversation[this.idx]['responses'];\n  }\n  return[];\n};\n\nArgumentManager.prototype.advanceToTarget = function (targetIdx) {\n  if (this.wantsArgumentText) {\n    if (targetIdx in this.conversation[this.idx][this.argTextType]) {\n      this.argIdx = targetIdx;\n      return true;\n    }\n\n    this.endArgInterlude();\n    return false; // do NOT refresh display on end of argument interlude\n  }\n  this.idx = targetIdx;\n  return true;\n};\n\n\nArgumentManager.prototype.endConversation = function() {\n  this.customActions.customAction(this.conversation['onEnd']);  \n};\n\nArgumentManager.prototype.getAvatar = function () {\n  return 'invisible';\n};\n\nArgumentManager.prototype.takeActions = function () {\n  /** stub */\n};\n\nArgumentManager.prototype.getCurrentText = function () {\n  if (this.conversation === null) {\n    return '';\n  }\n\n  if (this.wantsArgumentText) {\n    return this.conversation[this.idx][this.argTextType][this.argIdx]['text'];\n  }\n\n  return this.conversation[this.idx]['text'];\n};\n\nArgumentManager.prototype.getSpeaker = function () {\n  if (this.conversation === null) {\n    return '';\n  }\n\n  if (this.wantsArgumentText) {\n    return this.conversation[this.idx][this.argTextType][this.argIdx]['speaker'];\n  }\n\n  return npcs[this.conversation[this.idx]['speaker']]['name']; \n};\n/** END OVERRIDE FUNCTIONS */\n\nArgumentManager.prototype.startArgInterlude = function (textType) {\n  this.argIdx = 0;\n  this.wantsArgumentText = true;\n  this.argTextType = textType ? 'correct' : 'incorrect';\n};\n\nArgumentManager.prototype.endArgInterlude = function () {\n  this.argIdx = 0;\n  this.wantsArgumentText = false;\n  this.interludeCompleteSignal.dispatch();\n};\n\nArgumentManager.prototype.getCurrentCounters = function () {\n  return this.conversation[this.idx]['counters'];\n};\n\nArgumentManager.prototype.getAllArguments = function () {\n  // returns as an array\n  var args = [];\n  for (var i = 0; i < Object.keys(this.conversation).length - 1; i++) {\n    if (this.conversation[i]['counters'].length > 0) {\n      args.push(this.conversation[i]);\n    }\n  }\n  return args;\n};\n\nArgumentManager.prototype.setArgumentById = function (id) {\n  for (var i = 0; i < this.conversation.length; i++) {\n    if (this.conversation[i]['id'] === id) {\n      this.idx = i;\n      return;\n    }\n  }\n};\n\nArgumentManager.prototype.takeActions = function() {\n  if ('actions' in this.conversation[this.idx]) {\n    for (var action in this.conversation[this.idx]['actions']) {\n      ConversationManager.prototype.takeAction.call(this, this._game, action, this.conversation[this.idx]['actions'][action]);\n    }\n  }\n};","/*\n * BattleUi\n * ========\n *\n * User interface for Logic Battle mechanic\n */\n\n'use strict';\n\nmodule.exports = BattleUi;\n\nvar HealthBar = require('./HealthBar.js');\nvar Icon = require('./Icon');\nvar items = require('../../static/assets/items.json');\nvar textstyles = require('../../static/assets/textstyles.json');\n\nfunction BattleUi(game, playerDeck, enemyDeck/*, ...args*/) {\n  Phaser.Group.call(this, game/*, ...args*/);\n\n  // - this.cardSignal\n  // - this.cardAnimCompleteSignal\n  // - this.argAnimCompleteSignal\n  // - this.playerDeckIcons\n  // - this.enemyDeckIcons\n  // - this.credBar\n\n  /** Signals */\n  this.cardSignal = new Phaser.Signal();\n  this.cardAnimCompleteSignal = new Phaser.Signal();\n  this.argAnimCompleteSignal = new Phaser.Signal();\n\n  this.playerDeckIcons = [];\n  this.enemyDeckIcons = [];\n\n  /** Private properties */\n  this._game = game;\n  this._portraitSize = 100;\n  this._cardSize = 70;\n  this._credSize = 85;\n  this._enemyOriginY = game.height * 0.3;\n  this._centerX = game.width / 2;\n  this._argumentRadius = this._portraitSize;\n\n  /** Background + overlay (this._background, this._overlay) */\n  var roomBg = game.make.sprite(0,0, game.room.area.id);\n  game.add.existing(roomBg);\n\n  this._background = game.add.sprite(0,0,'battle-background');\n  this._background.width = game.width;\n  this._background.height = game.height;\n  this._background.alpha = 0.85;\n  this._background.tint = 0x33343a;\n\n  this._overlay = game.add.sprite(0,0,'battle-overlay');\n  this._overlay.width = game.width;\n  this._overlay.height = game.height;\n\n  /** Enemy display */\n  var enemyBarConfig = {x: this._centerX, y: 50, height:20, width:150, flipped:true};\n  this.persuadeBar = new HealthBar(game, enemyBarConfig);\n  var enemyIcon = game.add.existing(new Icon(game,\n    this._centerX - this._portraitSize/2, this._enemyOriginY - this._portraitSize/2,\n    'gleaming-shoal-portrait', null, null, this._portraitSize));\n  enemyIcon.alpha = 1;\n\n  /** Enemy deck display */\n  for (var i = 0; i < enemyDeck.length; i++) {\n    var argIcon = game.add.existing(new Icon(game, 0,0,\n      enemyDeck[i].assetName, 'memory-bank-icon-mask', 'memory-bank-icon', this._cardSize));\n    this.enemyDeckIcons.push(argIcon);\n  }\n  this.positionArguments(game, false);\n\n  /* Current argument position marker */\n  var currentArgMarker = game.add.sprite(0, 0, 'memory-bank-icon');\n  currentArgMarker.scale.setTo(this._cardSize * 1.2 / currentArgMarker.width);\n  currentArgMarker.anchor.setTo(0.5, 0.5);\n\n  currentArgMarker.x = this._centerX;\n  currentArgMarker.y = this._enemyOriginY + this._argumentRadius;\n\n  /** Player display */\n  this.credIcon = new SlickUI.Element.DisplayObject(\n    this._centerX - this._credSize/2, game.height * 5 / 8 - this._credSize / 2,\n    new Icon(game, 0,0,\n    'memory-bank-icon-mask', null, 'memory-bank-icon', this._credSize));\n  game.slickUI.add(this.credIcon);\n\n  this.credIcon.add(\n    this.credText = new SlickUI.Element.DisplayObject(0, 0,\n      game.make.text(0, 0, ''+this._game.cred, textstyles['credibility']))\n  );\n  this.credText.displayObject.setTextBounds(0, 0, this._credSize, this.credIcon.displayObject.height);\n\n  /** Player deck display */\n  var deckOriginX = game.width * 3 / 5;\n  var deckOriginY = this.credIcon.y + (this._credSize - this._cardSize) / 2;\n\n  for (i = 0; i < playerDeck.length; i++) {\n    var playerCardIcon = game.add.existing(new Icon(game, 0,0,\n      playerDeck[i].assetName, 'memory-bank-icon-mask', 'memory-bank-icon', this._cardSize));\n    playerCardIcon.x = deckOriginX + i*(this._cardSize);\n    playerCardIcon.y = deckOriginY;\n\n    var cardSignal = this.cardSignal;\n    // send signal upon click and delete tooltip\n    playerCardIcon.events.onInputDown.add(function () {\n      cardSignal.dispatch(this.game, this.currentCard);\n    }, {game: game, currentCard: playerDeck[i]});\n\n    playerCardIcon.inputEnabled = true;\n    playerCardIcon.input.useHandCursor = true;\n\n    this.playerDeckIcons.push(playerCardIcon);\n    this.addTooltip(i,\n      this._centerX + this._argumentRadius, this._enemyOriginY - this._argumentRadius);\n  }\n\n  /** Persuasion meter */\n\n}\n\nBattleUi.prototype = Object.create(Phaser.Group.prototype);\nBattleUi.prototype.constructor = BattleUi;\n\nBattleUi.prototype.update = function () {\n  // TODO: Stub.\n};\n\nBattleUi.prototype.getArgIcon = function (argument) {\n  for (var i = 0; i < this.enemyDeckIcons.length; i++) {\n    var argIcon = this.enemyDeckIcons[i];\n    if (argument.assetName === argIcon.id) {\n      return {'index': i, 'icon': argIcon};\n    }\n  }\n  return {'index': -1, 'icon': null};\n};\n\nBattleUi.prototype.getCardIcon = function (card) {\n  for (var i = 0; i < this.playerDeckIcons.length; i++) {\n    var cardIcon = this.playerDeckIcons[i];\n    if (card.key === cardIcon.id) {\n      return {'index': i, 'icon': cardIcon};\n    }\n  }\n  return {'index': -1, 'icon': null};\n};\n\nBattleUi.prototype.startCorrectCardTween = function (cardIcon, cardIdx, targetedArg) {\n  //this sounds best when it starts at click\n  this._game.sound.play('correct-card');\n  var tween = this._game.add.tween(cardIcon);\n  tween.to(\n    { x: targetedArg.x, y: targetedArg.y }, 1000,\n    Phaser.Easing.Exponential.In, true, 0);\n\n  // create fill sprite\n\n  var shatterSprite = this._game.make.sprite(\n    targetedArg.x + targetedArg.width/2,\n    targetedArg.y + targetedArg.height/2, 'memory-bank-icon-fill');\n  shatterSprite.alpha = 0;\n  // add slight fudge factor\n  shatterSprite.scale.setTo(this._cardSize*1.05 / shatterSprite.width);\n  shatterSprite.anchor.setTo(0.5, 0.5);\n  this._game.add.existing(shatterSprite);\n  var alphaTween = this._game.add.tween(shatterSprite);\n\n  // start alpha tween after\n  tween.onComplete.add(function () {\n    alphaTween.to({ alpha: 1 }, 1000, Phaser.Easing.Exponential.In, true, 0);\n    alphaTween.onComplete.add(function () {\n      cardIcon.destroy();\n      targetedArg.destroy();\n      shatterSprite.destroy();\n      // arguments update by themselves, player cards do not\n      this.playerDeckIcons.splice(cardIdx, 1);\n    }, this);\n  }, this);\n\n  // return the last tween in the chain\n  return alphaTween;\n};\n\nBattleUi.prototype.startIncorrectCardTween = function (cardIcon, targetedArg) {\n  var tween = this._game.add.tween(cardIcon);\n  var originX = cardIcon.x;\n  var originY = cardIcon.y;\n\n  tween.to({ x: targetedArg.x, y: targetedArg.y }, 1000,\n    Phaser.Easing.Exponential.InOut, false, 0);\n  // add an additional tween to return to original position\n  tween.onComplete.add(function () {\n    this._game.sound.play('wrong-card');\n\n  }, this);\n\n  var lastTween = this._game.add.tween(cardIcon);\n  lastTween.to({ x: originX, y: originY }, 1000,\n    Phaser.Easing.Exponential.In, false, 0);\n\n  tween.chain(lastTween).start();\n\n  // return last tween in the chain\n  return lastTween;\n};\n\nBattleUi.prototype.playCardAnimation = function (card, argument, isCorrect) {\n  // find matching argument icon\n  var targetedArg = undefined;\n  for (var i = 0; i < this.enemyDeckIcons.length; i++) {\n    var argIcon = this.enemyDeckIcons[i];\n    if (argument.assetName === argIcon.id) {\n      targetedArg = argIcon;\n      break;\n    }\n  }\n  if (typeof targetedArg === 'undefined')\n    return;\n\n  // find matching card icon\n  for (i = 0; i < this.playerDeckIcons.length; i++) {\n    var cardIcon = this.playerDeckIcons[i];\n    if (card.key === cardIcon.id) {\n      var lastTween;\n      // play different animations on correct vs. incorrect card\n      if (isCorrect) {\n        lastTween = this.startCorrectCardTween(cardIcon, i, targetedArg);\n      } else {\n        lastTween = this.startIncorrectCardTween(cardIcon, targetedArg);\n      }\n      lastTween.onComplete.add(function () {\n        this.cardAnimCompleteSignal.dispatch(this._game);\n\n      }, this);\n      return;\n    }\n  }\n};\n\nBattleUi.prototype.updateArguments = function (args, currentArgIdx) {\n  var newEnemyDeckIcons = [];\n\n  for (var i = 0; i < args.length; i++) {\n    var idx = currentArgIdx + i;\n    if (idx >= args.length)\n      idx -= args.length;\n\n    // null argument\n    if (typeof args[idx] === 'undefined' || args[idx] === null)\n      continue;\n\n    var argIcon = this.getArgIcon(args[idx]);\n    // not found\n    if (argIcon['index'] === -1)\n      continue;\n    newEnemyDeckIcons.push(argIcon['icon']);\n  }\n\n  this.enemyDeckIcons = newEnemyDeckIcons;\n};\n\nBattleUi.prototype.positionArguments = function (game, isTweening = true) {\n  var nArgs = this.enemyDeckIcons.length;\n  var argIcon;\n\n  if (!isTweening) {\n    for (var i = 0; i < nArgs; i++) {\n      argIcon = this.enemyDeckIcons[i];\n      argIcon.x = this._centerX + Math.sin(i / nArgs * 2*Math.PI) * this._argumentRadius - this._cardSize / 2;\n      argIcon.y = this._enemyOriginY + Math.cos(i / nArgs * 2*Math.PI) * this._argumentRadius - this._cardSize / 2;\n    }\n    return;\n  }\n\n  var tweeningPositions = [];\n  var tweens = [];\n  for (var j = 0; j < nArgs; j++) {\n    tweeningPositions.push(\n      new Phaser.Point(\n        this._centerX + Math.sin(j / nArgs * 2*Math.PI) * this._argumentRadius - this._cardSize / 2,\n        this._enemyOriginY + Math.cos(j / nArgs * 2*Math.PI) * this._argumentRadius - this._cardSize / 2));\n  }\n  for (j = 0; j < nArgs; j++) {\n    argIcon = this.enemyDeckIcons[j];\n    if (typeof argIcon === 'undefined' || argIcon === null)\n      continue;\n    tweens.push(game.add.tween(argIcon).to(\n      { x: tweeningPositions[j].x, y: tweeningPositions[j].y},\n      1000, Phaser.Easing.Quadratic.InOut, false, 0));\n  }\n  for (j = 0; j < tweens.length; j++) {\n    // Notify completion of argument rotation\n    if (j === 0) {\n      tweens[j].onComplete.add(function () {\n        this.argAnimCompleteSignal.dispatch(this._game);\n      }, this);\n    }\n    tweens[j].start();\n  }\n};\n\nBattleUi.prototype.flickerOverlay = function () {\n  var tween = this._game.add.tween(this._overlay);\n  var timeLeft = 500; // half a second total\n  var flickerTime = 10;\n  var nFlickers = this._game.rnd.integerInRange(2,4);\n  var defaultTint = this._overlay.tint;\n  var tintColor = 0x333535;\n  var firstTween = tween;\n\n  for (var i = 0; i < nFlickers; i++) {\n    // use up all remaining time if it is the last flicker\n    var randTime = i == nFlickers - 1\n      ? timeLeft\n      : this._game.rnd.frac() * timeLeft;\n\n    // flicker instantly if it's the first flicker\n    var splitTime = i == 0 ? 0 : this._game.rnd.frac() * randTime;\n    tween.to( { tint: tintColor }, flickerTime, Phaser.Easing.Linear.In, false, splitTime);\n\n    var nextTween = this._game.add.tween(this._overlay);\n    nextTween.to( { tint: defaultTint }, flickerTime, Phaser.Easing.Linear.In, false, randTime - splitTime);\n    tween.chain(nextTween);\n\n    tween = nextTween;\n    timeLeft -= randTime;\n  }\n  firstTween.start();\n};\n\nBattleUi.prototype.updateCredBar = function (value, isDamage) {\n  // damage indication\n  if (isDamage) {\n    this.flickerOverlay();\n  }\n  this.credText.displayObject.text = value;\n  var originalTint = this.credText.displayObject.tint;\n  var firstTween = this._game.add.tween(this.credText.displayObject);\n  firstTween.to({ tint: 0x970B26 }, 100, Phaser.Easing.Linear.In, false, 0);\n  var secondTween = this._game.add.tween(this.credText.displayObject);\n  secondTween.to({ tint: originalTint }, 500, Phaser.Easing.Linear.In, false, 0);\n  firstTween.chain(secondTween);\n  firstTween.start();\n};\n\nBattleUi.prototype.updatePersuasionBar = function () {\n  this.persuadeBar.setPercent(this._game.persuasion * 25);\n};\n\nBattleUi.prototype.cardsInputEnabled = function (isEnabled) {\n  for (var i = 0; i < this.playerDeckIcons.length; i++) {\n    this.playerDeckIcons[i].inputEnabled = isEnabled;\n  }\n};\n\nBattleUi.prototype.addTooltip = function (cardIdx, x, y) {\n  var playerCardIcon = this.playerDeckIcons[cardIdx];\n\n  var tooltip = function () {\n    var tooltipWidth = 250;\n    var tooltipHeight = 250;\n\n    var bmd = this._game.add.bitmapData(tooltipWidth, tooltipHeight);\n    bmd.ctx.beginPath();\n    bmd.ctx.rect(0, 0, tooltipWidth, tooltipHeight);\n    bmd.ctx.fillStyle = '#424d4f';\n    bmd.ctx.fill();\n\n    this._game.slickUI.add(this.tooltip = new SlickUI.Element.DisplayObject(\n      x,y, this._game.make.sprite(0, 0, bmd)));\n    this.tooltip.alpha = 0.8;\n\n    var nameTextStyle = { font: '14px Goudy Bookletter 1911', fill: '#48f2ff', wordWrap: true, wordWrapWidth: tooltipWidth, fontWeight: 'bold', boundsAlignH: 'center' };\n    var nameText = new SlickUI.Element.DisplayObject(0,0,\n      this._game.make.text(0,0, items[playerCardIcon.id]['name'].toUpperCase(), nameTextStyle));\n    this.tooltip.add(nameText);\n    // for alignment purposes\n    var nameTextHeight = nameText.displayObject.getBounds().height;\n    nameText.displayObject.setTextBounds(0,0, tooltipWidth, tooltipHeight);\n\n    var descTextStyle = { font: '14px Open Sans', fill: '#48f2ff', wordWrap: true, wordWrapWidth: tooltipWidth, align: 'left' };\n    var descText = new SlickUI.Element.DisplayObject(\n      0, Math.round(nameTextHeight),\n      this._game.make.text(0,0, items[playerCardIcon.id]['desc'], descTextStyle));\n    this.tooltip.add(descText);\n  };\n\n  var deleteTooltip = function () {\n    if (this.tooltip) {\n      this.tooltip.container.displayGroup.removeAll();\n    }\n    this.tooltip = undefined;\n  };\n\n  playerCardIcon.events.onInputDown.add(deleteTooltip, playerCardIcon);\n\n  // tooltip functions\n  playerCardIcon.events.onInputOver.add(tooltip, playerCardIcon);\n  playerCardIcon.events.onInputOut.add(deleteTooltip, playerCardIcon);\n\n};\n","'use strict';\n\n\nfunction Card(game, x, y, assetName) {\n  Phaser.Sprite.call(this, game, x, y, assetName);\n  this._game = game;\n  this.assetName = assetName;\n  this.key = assetName;\n  this.description = 'test';\n}\n\nCard.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = Card.prototype.constructor = Card;\n","/*\n* Clickable\n* ====\n*\n* A sample prefab (extended game object class), displaying a clickable object in a room.\n*/\n\n'use strict';\n\nvar Toast = require('./Toast');\nvar items = require('../../static/assets/items.json');\n\nfunction Clickable(game, x, y, id, height, width) {\n  Phaser.Sprite.call(this, game, x, y, id);\n  this.height = height;\n  this.width = width;\n\n  this._game = game;\n  this.id = id;\n  this.name = items[this.id]['name'];\n  this.anchor.set(0.5);\n  this.alpha = 0.5;\n  this.inputEnabled = true;\n  this.input.useHandCursor = true;\n  this.events.onInputDown.add(click, this);\n  this.events.onInputOver.add(mouseover, this);\n  this.events.onInputOut.add(mouseout, this);\n\n  this.input.pixelPerfectOver = true;   // checks pixels so that collision only happens with non-transparent areas\n                                        // computationally expensive, but maybe necessary for realism purposes?\n}\n\nfunction click() {\n  this._game.sound.play('inventory-add');\n  this.destroy();\n  this._game.add.existing(new Toast(this._game, 'You\\'ve acquired ' + this.name + '!', 5));\n  this._game.player.inventory.push(this.id);\n  var items = this._game.room.area.items;\n  var remove_item = -1;\n  //because it is checking the id of the item and not the actual item\n  for (let i = 0; i < items.length; i++) {\n    if (items[i].id === this.id){\n      remove_item = i;\n    }\n  }\n  if (remove_item > -1) {\n    items.splice(remove_item, 1);\n  }\n  this._game.dialogueWindow.display(true); // refresh dialogue display, display instantly\n  this._game.memoryBankWindow.display();  // refresh memory bank display\n}\n\nfunction mouseover() {\n  this.alpha = 1;\n  this._game.add.existing(this.toast = new Toast(this._game, this.name, 5));\n}\n\nfunction mouseout() {\n  if (this.toast) {\n    this.toast.toast.container.displayGroup.removeAll();\n    this.toast.destroy();\n  }\n}\n\nClickable.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = Clickable.prototype.constructor = Clickable;\n","/*\n * ConversationManager\n * ===================\n *\n * Handles loading JSON assets for conversation and managing conversation state\n */\n\n'use strict';\n\nmodule.exports = ConversationManager;\n\nvar npcs = require('../../static/assets/npcs.json');\n\nfunction ConversationManager(game, customActions/*, ...args*/) {\n  // PROPERTIES:\n  // - conversation - json conversation\n\n  this._game = game;\n  this.customActions = customActions;\n\n  this.conversation = null;\n  this.idx = 0;\n  this.shown = [];\n}\nConversationManager.prototype.constructor = ConversationManager;\n\n/* Assumes JSON has already been loaded into cache!\n * Use game.load.json otherwise\n */\nConversationManager.prototype.loadJSONConversation = function (jsonKey) {\n  var json = this._game.cache.getJSON(jsonKey);\n\n  this.conversation = json;\n\n  if (this._game.areaTransitionWindow !== null \n    && typeof this._game.areaTransitionWindow !== 'undefined') {\n    this._game.areaTransitionWindow.disable();\n  }\n  //the player object will initialize the start index of a conversation\n  // at the end of a conversation the index will return to 0\n  // so that the next file will start at the begining.\n\n};\n\nConversationManager.prototype.getCurrentText = function () {\n  if (this.conversation === null) {\n    return '';\n  }\n\n  return this.conversation[this.idx]['text'];\n};\n\nConversationManager.prototype.getResponses = function () {\n  if (!this.conversation === null) {\n    return [''];\n  }\n  var responses = this.conversation[this.idx]['responses'];\n  var ret = [];\n  for (var i = 0; i < responses.length; i++) {\n    //check showOnce of target node\n    if (this.shown.indexOf(responses[i]['target']) > -1) {    // this node is marked \"show once\" and has already been shown\n      continue;\n    }\n    //check conditions on response\n    if ('conditions' in responses[i]) {\n      var conditionsNeeded = 0;\n      var conditionsMet = 0;\n      for (var condition in responses[i]['conditions']) {\n        if (this.checkCondition(this._game, condition, responses[i]['conditions'][condition])) {\n          conditionsMet++;\n        }\n        conditionsNeeded++;\n      }\n      if (conditionsMet >= conditionsNeeded) {\n        ret.push(responses[i]); //if all conditions are met, display response\n      }\n    } else {\n      ret.push(responses[i]);   //no conditions on this response, display it\n    }\n  }\n\n  return ret;\n};\n\nConversationManager.prototype.checkCondition = function(game, condition, value) {\n  if (condition.startsWith('var')) {\n    var variable = condition.substring(3);\n    if (value.startsWith('!')) {\n      if (!(variable in game.player.variables) || game.player.variables[variable] !== value.substring(1)) {\n        return true;    //player does not have this variable set, or has it set to a different value\n      }\n    } else if (variable in game.player.variables && game.player.variables[variable] === value) {\n      return true;      //player has this variable set to this value\n    }\n  } else if (condition.startsWith('inv')) {\n    var item = condition.substring(3);\n    if (value.startsWith('!')) {\n      if (game.player.inventory.indexOf(item) === -1) {\n        return true;    //player does not have this inventory item\n      }\n    } else if (game.player.inventory.indexOf(item) > -1) {\n      return true;      //player has this inventory item\n    }\n  } else if (condition.startsWith('seen')) {\n    var visited = value.split(' ');\n    var visitedAll = true;\n    for (var i = 0; i < visited.length; i++) {\n      if (this.shown.indexOf(parseInt(visited[i])) === -1) {\n        visitedAll = false;\n      }\n    }\n    return visitedAll;\n  }\n  return false;\n};\n\nConversationManager.prototype.getSpeaker = function () {\n  if (this.conversation === null) {\n    return [''];\n  }\n\n  return npcs[this.conversation[this.idx]['speaker']]['name'];\n};\n\nConversationManager.prototype.getAvatar = function() {\n  if (this.conversation === null) {\n    return [''];\n  }\n\n  return npcs[this.conversation[this.idx]['speaker']]['avatar'];\n};\n\nConversationManager.prototype.takeActions = function() {\n  if (this.conversation === null) {\n    return;\n  }\n\n  if (this.conversation[this.idx]['showOnce'] === 1 && !this.shown.includes(this.idx)) {\n    //if save at this point keeps getting resaved.\n    this.shown.push(this.idx);\n  }\n\n  if (this.conversation[this.idx]['actions'].length === 0) {\n    return;\n  }\n\n  for (var action in this.conversation[this.idx]['actions']) {\n    this.takeAction(this._game, action, this.conversation[this.idx]['actions'][action]);\n  }\n  return;\n};\n\nConversationManager.prototype.takeAction = function(game, action, value) {\n  if (action.startsWith('var')) {\n    var variable = action.substring(3);\n    if (value.startsWith('!')) {\n      delete game.player.variables[variable]; //remove variable from\n    } else {\n      game.player.variables[variable] = value;  //set variable on player\n    }\n  } else if (action.startsWith('inv')) {\n    var item = action.substring(3);\n    if (value.startsWith('!')) {\n      if (!(item in game.player.inventory)) {\n        var index = game.player.inventory.indexOf(item);\n        if (index > -1) {\n          game.player.inventory.splice(index, 1); //remove item from player inventory\n        }\n      }\n    } else {\n      game.player.inventory.push(item); //add item to player inventory\n    }\n  } else if (action === 'custom') {\n    this.customActions.customAction(value);\n  }\n};\n\nConversationManager.prototype.endConversation = function() {\n  if (this.conversation === null) {\n    return;\n  }\n\n  for (var i = 0; i < this._game.room.npcs.length; i++) {\n    var npc = this._game.room.npcs[i];\n    npc.show();\n  }\n    \n  if ('onEnd' in this.conversation) {\n    this.customActions.customAction(this.conversation['onEnd']);\n  }\n\n  this.shown = [];\n  this.idx = 0;\n  //think this is a cyclic ref. TODO: fix \n  this._game.dialogueWindow.convoFile = null;\n  this._game.areaTransitionWindow.enable();\n};\n\nConversationManager.prototype.advanceToTarget = function (targetIdx) {\n  this.idx = targetIdx;\n  return true;  // returns whether should refresh display.\n};\n\nConversationManager.prototype.update = function () {\n  // TODO: Stub.\n};\n","/*\n* DialogueWindow\n* ==============\n*\n* Handles displaying dialogue (conversation data) to screen\n*/\n\n'use strict';\n\nmodule.exports = DialogueWindow;\n\nvar Scrollbar = require('./Scrollbar');\nvar textstyles = require('../../static/assets/textstyles.json');\n\nfunction DialogueWindow(game, convoManager/*, ...args*/) {\n  Phaser.Group.call(this, game/*, ...args*/);\n\n  // PROPERTIES\n  // - dialogPanel\n  // - speakerText\n  // - dialogText\n  // - convoManager (passed in ConversationManager)\n  // - dialogWidth\n  // - dialogHeight\n  // - buttons\n\n  this.convoManager = convoManager;\n  // messy, but useful if we need a reference to the game\n  this._game = game;\n\n  /* SIGNALS */\n  // private\n  this._onDialogTextFinished = new Phaser.Signal(); // when the char-by-char display finishes\n\n  // private members specifying margin and padding\n  this._dialogTextOriginX = 96;\n  this._dialogTextOriginY = 60;\n  this._dialogPadding = 32;\n\n  // speaker avatar display\n  game.slickUI.add(this.avatar = new SlickUI.Element.DisplayObject(\n    400, 100, game.make.sprite(0, 0, 'invisible'),\n    400, 500));\n\n  this.dialogHeight = game.height * 3 / 8 /* 3/8 height */ - this._dialogPadding / 2;\n  this.dialogWidth = game.width - this._dialogPadding;\n\n  // dialog text dimensions (private)\n  this._dialogTextHeight = this.dialogHeight - this._dialogTextOriginY - 18;\n  this._dialogTextWidth = this.dialogWidth - 185;\n\n  // window coordinates\n  var dialogX = this._dialogPadding / 2;\n  var dialogY = game.height * 5 / 8;  // 5/8 down\n\n  game.slickUI.add(\n    this.dialogPanel = new SlickUI.Element.DisplayObject(\n      dialogX, dialogY, game.make.sprite(0,0, 'dialogue-panel'),\n      this.dialogWidth, this.dialogHeight));\n  this.dialogPanel.displayObject.width = this.dialogWidth;\n  this.dialogPanel.displayObject.height = this.dialogHeight;\n\n  // actual window contents\n  var speakerX = this._dialogPadding + 64;\n  var speakerY = this._dialogPadding / 4;\n  this.dialogPanel.add(\n    this.speakerText = new SlickUI.Element.DisplayObject(\n      Math.round(speakerX), speakerY,\n      game.make.text(0, 0, 'Speaker', textstyles['speaker'])));\n\n  // using a mask for scrolling purposes\n  this._scrollMask = game.make.graphics(0, 0);\n  this._scrollMask.beginFill(0xffffff);\n  this._scrollMask.drawRect( this._dialogTextOriginX, this._dialogTextOriginY, this._dialogTextWidth, this._dialogTextHeight );\n  this._scrollMask.endFill();\n\n  var bodyStyle = textstyles['dialogueBody'];\n  bodyStyle.wordWrapWidth = this._dialogTextWidth;\n  this.dialogPanel.add(\n    this.dialogText = new SlickUI.Element.DisplayObject(this._dialogTextOriginX, this._dialogTextOriginY, \n      game.make.text(0, 0, 'placeholder text', bodyStyle)));\n  this.dialogText.displayObject.lineSpacing = 0;\n\n  this.dialogPanel.add(new SlickUI.Element.DisplayObject(0, 0, this._scrollMask));\n  this.dialogText.displayObject.mask = this._scrollMask;\n\n  this.dialogPanel.alpha = 0.8;\n\n  // for removing player choice buttons\n  this.buttons = [];\n  this.buttonTweens = [];\n  // slider for scrolling overflow\n  this.slider = null;\n  // stores each button Y value\n  // also keeps track of how low our content goes; last element is content bottom\n  this._buttonsY = [];\n\n  //for keeping track of whether the avatar needs to be updated (performance intensive)\n  this.avatarName = 'invisible';\n\n  // will track the conversation file, so that save checkpoints will\n  // go to the correct area in the conversation\n  this.convoFile = null;\n\n  // for rendering lines character by character\n  this.charTimer = null;\n}\n\nDialogueWindow.prototype = Object.create(Phaser.Group.prototype);\nDialogueWindow.prototype.constructor = DialogueWindow;\n\nDialogueWindow.prototype.begin = function(jsonKey) {\n  if (jsonKey) {\n    this.convoFile = jsonKey;\n    this.convoManager.loadJSONConversation(jsonKey);\n    this.show();\n    this.display();\n  } else {\n    this.hide();\n  }\n};\n\nDialogueWindow.prototype.display = function (displaysInstant = false \n                              /* by default, not set to display text instantly */) {\n  this.cleanWindow();\n  if (this.convoFile) {\n    this.takeActions();\n    this.displayAvatar();\n\n    // On finishing the dialog text display, display our responses\n    // Added before our actual display call in case we display instantly\n    this._onDialogTextFinished.add(function () {\n      this.displayResponses();\n      this._onDialogTextFinished.removeAll();\n    }, this);\n    this.displayText(displaysInstant);\n  }\n};\n\nDialogueWindow.prototype.cleanWindow = function () {\n  // stop all button tweens\n  for (var i = 0; i < this.buttonTweens.length; i++) {\n    this.buttonTweens[i].stop();\n  }\n\n  // remove all buttons\n  for (var j = 0; j < this.buttons.length; j++) {\n    var button = this.buttons[j];\n    button.container.displayGroup.removeAll(true);\n    button.container.displayGroup.destroy();\n    button.container.children = [];\n    button.container = undefined;\n    button.sprite = undefined;\n  }\n  this.buttons = [];\n  this._buttonsY = [];\n\n  // remove scroller and restore dialog text position\n  if (this.slider !== null) {\n    this.slider.destroy();\n    this.slider = null;\n  }\n  this.dialogText.y = this._dialogTextOriginY;\n  this.dialogText.displayObject.inputEnabled = false;\n  this.dialogText.displayObject.events.onInputOver.removeAll();\n  this.dialogText.displayObject.events.onInputOut.removeAll();\n  this._game.input.mouse.mouseWheelCallback = null;\n};\n\nDialogueWindow.prototype.takeActions = function() {\n  this.convoManager.takeActions(this._game);\n};\n\n// if avatar needs to change, fade out the current one and fade in the new one\nDialogueWindow.prototype.displayAvatar = function() {\n  var speaker = this.convoManager.getAvatar();\n  var fadeOut = 200;\n  var fadeIn = 200;\n  if (speaker !== this.avatarName) {\n    var fadeInTween = this._game.add.tween(this.avatar);\n    fadeInTween.to({alpha: 0}, fadeOut, Phaser.Easing.Linear.None, true);\n    fadeInTween.onComplete.add(function() {\n      this.avatar.displayObject.loadTexture(speaker);\n      this._game.add.tween(this.avatar).to({alpha: 1}, fadeIn, Phaser.Easing.Linear.None, true);\n    }, this);\n    this.avatarName = speaker;\n  }\n};\n\nDialogueWindow.prototype.displayText = function (displaysInstant) {\n  this.speakerText.displayObject.text = this.convoManager.getSpeaker().toUpperCase();\n  this.dialogText.displayObject.mask = this._scrollMask;\n\n  if (displaysInstant) {\n    this.dialogText.displayObject.text = this.convoManager.getCurrentText();\n    if (this.charTimer != null) {\n      this._game.time.events.remove(this.charTimer);  // stop characters from rendering one by one, if they are currently rendering\n    }\n    this._onDialogTextFinished.dispatch();\n    return;\n  }\n\n  // character-by-character display\n  this.displayCurrentLine();\n  \n};\n\nDialogueWindow.prototype.displayResponses = function () {\n  // start rendering buttons at the bottom of dialogue\n  var responses = this.convoManager.getResponses(this._game);\n\n  var textBottom = this._dialogTextOriginY + this.dialogText.displayObject.getBounds().height;\n  this.nextButtonY = textBottom;\n\n  if (responses.length === 0) {\n    // no responses - waiting on player to do something to progress\n    var waitButton = this.addChoiceButton(this._dialogTextOriginX, this.nextButtonY,\n      'END', null);\n    waitButton.visible = false;\n    this.buttons.push(waitButton);\n  }\n\n  this.buttonTweens = [];\n\n  for (var i = 0; i < responses.length; i++) {\n    var responseDelay = 250;\n    var button = this.addChoiceButton(\n      this._dialogTextOriginX, this.nextButtonY,\n      responses[i]['text'], responses[i]['target']);\n    button.alpha = 0;\n    var tween = this._game.add.tween(button).to({alpha: 1}, responseDelay, Phaser.Easing.Linear.None, true, responseDelay * i);\n    if (i === responses.length - 1) {\n      tween.onComplete.add(function() {\n        this.addOverflowScroll();\n      }, this);\n    }\n    this.buttonTweens.push(tween);  // for deletion later\n    this.buttons.push(button);\n    this._buttonsY.push(button.y);\n    this.nextButtonY += button.sprite.height;\n  }\n\n  // last element is bottom of content\n  this._buttonsY.push(this.nextButtonY);\n};\n\nDialogueWindow.prototype.addChoiceButton = function (x, y, responseTextField, responseTarget) {\n  // display text\n  var buttonSidePadding = 32;\n  var buttonTextStyle = textstyles['choiceButton'];\n  buttonTextStyle.wordWrapWidth = this._dialogTextWidth - buttonSidePadding;\n  var responseText = this._game.make.text(0, 0, responseTextField, buttonTextStyle);\n  var buttonText = new SlickUI.Element.DisplayObject(\n    Math.round(this._dialogTextWidth / 2 - responseText.width / 2),0, /* center text */\n    responseText);\n\n  // add to sized button\n  var choiceButton;\n  this.dialogPanel.add(choiceButton = new SlickUI.Element.DisplayObject(\n    x, y,\n    this._game.make.button(0,0, 'dialogue-choice-button'),\n    this.dialogWidth, responseText.height));\n  choiceButton.add(buttonText);\n  choiceButton.sprite.width = this._dialogTextWidth;\n  choiceButton.sprite.height = responseText.height;\n\n  // end of conversation. action deletes window\n  if (responseTarget < 0) {\n    choiceButton.events.onInputUp.add(\n      function () {\n        this.dialogueWindow.hide();\n        this.dialogueWindow.convoManager.endConversation();  // take any actions that trigger when this conversation ends\n      }, {dialogueWindow: this});\n  }\n\n  choiceButton.events.onInputUp.add(\n    function () {\n      var shouldRefresh = this.dialogueWindow.convoManager.advanceToTarget(responseTarget);\n      if (shouldRefresh)\n        this.dialogueWindow.display();\n    }, {dialogueWindow: this, responseTarget: responseTarget});\n  // add mask\n  choiceButton.sprite.mask = this._scrollMask;\n  buttonText.displayObject.mask = this._scrollMask;\n\n  return choiceButton;\n};\n\nDialogueWindow.prototype.addOverflowScroll = function () {\n  // can we fit everything in the current window?\n  var heightDiff = this._buttonsY[this._buttonsY.length - 1]\n    - (this._dialogTextOriginY + this._dialogTextHeight);\n  // add a slider otherwise\n  if (heightDiff > 0) {\n\n    var scrolllineWidth = 1.5;\n    this.slider = new Scrollbar(\n      this._game,\n      this._dialogTextOriginX + this._dialogTextWidth + this._dialogPadding - scrolllineWidth,\n      this._dialogTextOriginY - scrolllineWidth,\n      this.dialogPanel, // parent\n      {\n        'x': [0, this._dialogPadding, 0],\n        'y': [0, this._dialogTextHeight / 2, this._dialogTextHeight]\n      },\n      heightDiff, scrolllineWidth);\n\n    var scrollCallback = function (value) {\n      // mapping height differences to scroll values\n      var scrollValue = heightDiff*value;\n      this.dialogText.y = this._dialogTextOriginY - scrollValue;\n      for (var i = 0; i < this.buttons.length; i++) {\n        // slide all buttons up\n        this.buttons[i].y = this.dialogPanel.y + this._buttonsY[i] - scrollValue;\n      }\n    };\n\n    this.slider.onDrag.add(scrollCallback, this);\n    this.slider.onSetValue.add(scrollCallback, this);\n\n    // Mouse wheel events\n    this.dialogText.displayObject.inputEnabled = true;\n    this.dialogText.displayObject.events.onInputOver.add(\n      function () { this._dialogOver = true; }, this);\n    this.dialogText.displayObject.events.onInputOut.add(\n      function () { this._dialogOver = false; }, this);\n    this._game.input.mouse.mouseWheelCallback = (function (event) {\n      if (!this._dialogOver)\n        return;\n      this.slider.value += (1/heightDiff) * event.deltaY;\n    }).bind(this);\n  }\n};\n\nDialogueWindow.prototype.showAvatar = function() {\n  var fadeInTween = this._game.add.tween(this.avatar);\n  var fadeIn = 200;\n  fadeInTween.to({alpha: 1}, fadeIn, Phaser.Easing.Linear.None, true);\n};\n\nDialogueWindow.prototype.hideAvatar = function() {\n  var fadeOutTween = this._game.add.tween(this.avatar);\n  var fadeOut = 200;\n  fadeOutTween.to({alpha: 0}, fadeOut, Phaser.Easing.Linear.None, true);\n};\n\nDialogueWindow.prototype.show = function() {\n  this.dialogPanel.visible = true;\n  this.showAvatar();\n};\n\nDialogueWindow.prototype.hide = function () {\n  this.cleanWindow();\n  this.dialogPanel.visible = false;\n  this.hideAvatar(); //hide avatar\n};\n\nDialogueWindow.prototype.displayCurrentLine = function () {\n\n  var line = this.convoManager.getCurrentText();\n  this.dialogText.displayObject.text = '';\n\n  //  Split the current line on characters, so one char per array element\n  var split = line.split('');\n\n  //  Reset the word index to zero (the first word in the line)\n  this._cIndex = 0;\n  // TODO: make this a selectable option\n  //var charDelay = 3;\n\n  // Add an option to skip the text on clicking down.\n  this.dialogPanel.displayObject.inputEnabled = true;\n  this.dialogPanel.events.onInputDown.add(this.skipText, this);\n\n  var nextChar = function () {\n    var delay = 3;\n    this.dialogText.displayObject.text =\n      this.dialogText.displayObject.text.concat(split[this._cIndex]);\n    if (split[this._cIndex] === ',') {\n      delay = 200;    // brief pause on commas\n    } else if (['.', '?', '!'].indexOf(split[this._cIndex]) > -1) {\n      delay = 300;    // longer pause after each sentence\n    }\n    this._cIndex++;\n    if (this._cIndex == split.length) {\n      // Tell the window when we're done\n      this._onDialogTextFinished.dispatch();\n      this.charTimer = null;\n    } else {\n      // Add the next event in the chain\n      this.charTimer = this._game.time.events.add(delay, nextChar, this);\n    }\n  };\n\n  //  Call the 'nextChar' function and chain until it reaches the end of the line\n  this.charTimer = this._game.time.events.add(0, nextChar, this);\n\n};\n\nDialogueWindow.prototype.skipText = function () {\n  this._game.time.removeAll();\n  this.displayText(true);\n  this.dialogPanel.events.onInputDown.removeAll();\n};\n\nDialogueWindow.prototype.update = function () {\n  // TODO: Stub.\n};\n","/**\nCopyright (c) 2015 Belahcen Marwane (b.marwane@gmail.com)\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nvar HealthBar = function(game, providedConfig) {\n  this.game = game;\n\n  this.setupConfiguration(providedConfig);\n  this.setPosition(this.config.x, this.config.y);\n  this.drawBackground();\n  this.drawHealthBar();\n  this.setFixedToCamera(this.config.isFixedToCamera);\n};\nHealthBar.prototype.constructor = HealthBar;\n\nHealthBar.prototype.setupConfiguration = function (providedConfig) {\n  this.config = this.mergeWithDefaultConfiguration(providedConfig);\n  this.flipped = this.config.flipped;\n};\n\nHealthBar.prototype.mergeWithDefaultConfiguration = function(newConfig) {\n  var defaultConfig= {\n    width: 250,\n    height: 40,\n    x: 0,\n    y: 0,\n    bg: {\n      color: '#808080'\n    },\n    bar: {\n      color: '#651828'\n    },\n    animationDuration: 200,\n    flipped: false,\n    isFixedToCamera: false\n  };\n    \n  if(newConfig.flipped) {\n    defaultConfig.bg.color = '#651828';\n    defaultConfig.bar.color = '#808080';\n  }\n    \n  return mergeObjects(defaultConfig, newConfig);\n};\n\nfunction mergeObjects(targetObj, newObj) {\n  for (var p in newObj) {\n    try {\n      targetObj[p] = newObj[p].constructor==Object ? mergeObjects(targetObj[p], newObj[p]) : newObj[p];\n    } catch(e) {\n      targetObj[p] = newObj[p];\n    }\n  }\n  return targetObj;\n}\n\nHealthBar.prototype.drawBackground = function() {\n\n  var bmd = this.game.add.bitmapData(this.config.width, this.config.height);\n  bmd.ctx.fillStyle = this.config.bg.color;\n  bmd.ctx.beginPath();\n  bmd.ctx.rect(0, 0, this.config.width, this.config.height);\n  bmd.ctx.fill();\n\n  this.bgSprite = this.game.add.sprite(this.x, this.y, bmd);\n  this.bgSprite.anchor.set(0.5);\n\n  if(this.flipped){\n    this.bgSprite.scale.x = -1;\n  }\n};\n\nHealthBar.prototype.drawHealthBar = function() {\n  var bmd = this.game.add.bitmapData(this.config.width, this.config.height);\n  bmd.ctx.fillStyle = this.config.bar.color;\n  bmd.ctx.beginPath();\n  bmd.ctx.rect(0, 0, this.config.width, this.config.height);\n  bmd.ctx.fill();\n\n  this.barSprite = this.game.add.sprite(this.x - this.bgSprite.width/2, this.y, bmd);\n  this.barSprite.anchor.y = 0.5;\n\n  if(this.flipped){\n    this.barSprite.scale.x = -1;\n  }\n};\n\nHealthBar.prototype.setPosition = function (x, y) {\n  this.x = x;\n  this.y = y;\n\n  if(this.bgSprite !== undefined && this.barSprite !== undefined){\n    this.bgSprite.position.x = x;\n    this.bgSprite.position.y = y;\n\n    this.barSprite.position.x = x - this.config.width/2;\n    this.barSprite.position.y = y;\n  }\n};\n\n\nHealthBar.prototype.setPercent = function(newValue){\n  if (newValue < 0) newValue = 0;\n  if (newValue > 100) newValue = 100;\n\n  var newWidth = (newValue * this.config.width) / 100;\n\n  this.setWidth(newWidth);\n};\n\nHealthBar.prototype.setWidth = function(newWidth){\n  if (this.flipped) {\n    newWidth = -1 * newWidth;\n  }\n  this.game.add.tween(this.barSprite).to( { width: newWidth }, this.config.animationDuration, Phaser.Easing.Linear.None, true);\n};\n\nHealthBar.prototype.setFixedToCamera = function(fixedToCamera) {\n  this.bgSprite.fixedToCamera = fixedToCamera;\n  this.barSprite.fixedToCamera = fixedToCamera;\n};\n\nHealthBar.prototype.kill = function() {\n  this.bgSprite.kill();\n  this.barSprite.kill();\n};\n\nmodule.exports = HealthBar;\n","/*\n * Icon\n * ====\n *\n * Icon base class (masked sprite group)\n */\n\n'use strict';\n\nmodule.exports = Icon;\n\nfunction Icon(game, x, y, asset, mask, border, width = 100.0/*, TODO: height = 100.0 ...args*/) {\n  Phaser.Sprite.call(this, game, x, y, asset/*, ...args*/);\n\n  // PROPERTIES\n  // - maskSprite\n  this.maskSprite;\n  // - borderSprite\n  this.borderSprite;\n  // - asset key\n  this.id = asset;\n\n  this._game = game;\n  // expands borders of mask slightly\n  var scaleRelax = 1.05;\n\n  if (typeof mask !== 'undefined' && mask !== null) {\n    this.maskSprite = game.make.sprite(x,y, mask);\n\n    this.maskSprite.scale.setTo(this.width*scaleRelax / this.maskSprite.width);\n\n    var maskedBmd = game.make.bitmapData(this.maskSprite.width, this.maskSprite.height);\n    maskedBmd.alphaMask(this, this.maskSprite);\n    // replace main sprite with bitmap data mask\n    this.loadTexture(maskedBmd);\n  }\n\n  this.scale.setTo(width / this.width);\n  var parentScale = this.scale.x;\n\n  if (typeof border !== 'undefined' && border !== null) {\n    this.borderSprite = game.make.sprite(0,0, border);\n    this.addChild(this.borderSprite);\n    this.borderSprite.scale.setTo((width / this.borderSprite.width) / parentScale);\n  }\n\n}\n\nIcon.prototype = Object.create(Phaser.Sprite.prototype);\nIcon.prototype.constructor = Icon;\n\nIcon.prototype.update = function () {\n  var i = this.children.length;\n  while (i--) {\n    this.getChildAt(i).update();\n  }\n};\n","/*\n * MemoryBankWindow\n * ===============\n *\n * UI window for the memory bank\n */\n\n'use strict';\n\nvar items = require('../../static/assets/items.json');\nvar Icon = require('./Icon');\n\nmodule.exports = MemoryBankWindow;\n\nfunction memoryBankButtonToggle() {\n  // unresponsive while animating\n  if (this._isTweening)\n    return;\n\n  this._isTweening = true;\n  var timeToTween = 500;  // milliseconds\n\n  // hide panel\n  if (this.panel.visible) {\n    this._game.sound.play('swish-close');\n    this._game.add.tween(this.panel).to(\n        {x: this._baseX + this.panelWidth + this._memoryPadding}, timeToTween, Phaser.Easing.Exponential.Out, true\n      ).onComplete.add(\n        function () {\n          this.panel.visible = false;\n          this._isTweening = false;\n        }, this\n      );\n    return;\n  }\n\n  // show panel\n\n  // if area transition window is open, close it\n  if (this._game.areaTransitionWindow.panel.visible) {\n    this._game.areaTransitionWindow.panel.visible = false;\n  }\n  this.panel.visible = true;\n  this.display();\n\n  this.panel.x = this._baseX + this.panelWidth + this._memoryPadding;\n  this._game.sound.play('swish-open');\n  this._game.add.tween(this.panel).to(\n      {x: this._baseX}, timeToTween, Phaser.Easing.Exponential.Out, true\n    ).onComplete.add(function () { this._isTweening = false; }, this);\n}\n\nfunction MemoryBankWindow(game/*, ...args*/) {\n  Phaser.Group.call(this, game/*, ...args*/);\n\n  this._game = game;\n\n  // private members specifying margin and padding\n  this._memoryTextOriginX = 100;\n  this._memoryTextOriginY = 155;\n  this._memoryPadding = 32;\n  this._itemOriginX = 80;\n  this._itemOriginY = 25;\n  this._baseX = this._memoryPadding / 2;\n  this._baseY = this._memoryPadding * 2;\n\n  // memory bank window dimensions\n  this.panelHeight = game.height * 1/2 - this._memoryPadding / 2;\n  this.panelWidth = game.width - this._memoryPadding;\n  this._rowCapacity = 5;  // items per row\n  this._itemStart = 0;  // determines which row to show\n\n  // window-dependent private member dimensions\n  this._memoryTextWidth = this.panelWidth - 185;\n  this._itemPadding = this.panelWidth / 50;\n  this._nextOriginX = this.panelWidth - 55;\n  this._nextOriginY = 0;\n  this._prevOriginX = -18;\n  this._prevOriginY = 0;\n\n  /**\n   * Panel\n   */\n\n  game.slickUI.add(\n    this.panel = new SlickUI.Element.DisplayObject(\n      this._baseX, this._baseY, game.make.sprite(0,0, 'memory-bank'),\n      this.panelWidth, this.panelHeight));\n  this.panel.displayObject.width = this.panelWidth;\n  this.panel.displayObject.height = this.panelHeight;\n\n  // by default, not displayed\n  this.panel.visible = false;\n  this.panel.alpha = 0.8;\n\n  /**\n   * Toggle button\n   */\n  // until you click on the toggle button\n  game.slickUI.add(\n    this.toggleButton = new SlickUI.Element.DisplayObject(\n      0,this._memoryPadding, game.make.button(0,0, 'memory-bank-button')));\n  // set scale such that width = 1/8 panel width\n  this.toggleButton.displayObject.scale.setTo(\n    (this.panelWidth / 8) / this.toggleButton.displayObject.width);\n  this.toggleButton.x = game.width - this._memoryPadding - this.toggleButton.displayObject.width;\n  // show panel callback\n  this.toggleButton.events.onInputDown.add(memoryBankButtonToggle, this);\n  this.toggleButton.alpha = 0.9;\n\n  /**\n   * Text - name and description\n   */\n  var nameTextStyle = { font: '14px Goudy Bookletter 1911', fill: '#48f2ff', wordWrap: true, wordWrapWidth: this._memoryTextWidth, fontWeight: 'bold', boundsAlignH: 'center' };\n  this.panel.add(\n    this.nameText = new SlickUI.Element.DisplayObject(\n      this._memoryTextOriginX,\n      this._memoryTextOriginY,\n      game.make.text(0,0, '', nameTextStyle), this._memoryTextWidth));\n  // for alignment purposes\n  var nameTextHeight = this.nameText.displayObject.getBounds().height;\n  this.nameText.displayObject.setTextBounds(0,0, this._memoryTextWidth, nameTextHeight);\n\n  var descTextStyle = { font: '14px Open Sans', fill: '#48f2ff', wordWrap: true, wordWrapWidth: this._memoryTextWidth, align: 'left' };\n  this.panel.add(\n    this.descText = new SlickUI.Element.DisplayObject(\n      this._memoryTextOriginX,\n      this._memoryTextOriginY + nameTextHeight,\n      game.make.text(0,0, '', descTextStyle), this._memoryTextWidth));\n\n  /**\n   * Bookkeeping\n   */\n  // are we currently animating?\n  this._isTweening = false;\n  this._itemDisplayObjects = []; // for deletion purposes\n  this._navButtons = [];\n}\n\nMemoryBankWindow.prototype = Object.create(Phaser.Group.prototype);\nMemoryBankWindow.prototype.constructor = MemoryBankWindow;\n\nMemoryBankWindow.prototype.display = function () {\n  this.cleanWindow();\n  this.displayItems();\n  this.showNavButtons();\n};\n\nMemoryBankWindow.prototype.cleanWindow = function () {\n  for (var i = 0; i < this._itemDisplayObjects.length; i++) {\n    var item = this._itemDisplayObjects[i];\n    item.container.displayGroup.removeAll(true);\n    item.container.displayGroup.destroy();\n  }\n  for (i = 0; i < this._navButtons.length; i++) {\n    var navButton = this._navButtons[i];\n    navButton.container.displayGroup.removeAll(true);\n    navButton.container.displayGroup.destroy();\n  }\n  this._itemDisplayObjects = [];\n  this._navButtons = [];\n};\n\nMemoryBankWindow.prototype.displayItems = function () {\n  var inventory = this._game.player.inventory;\n\n  var itemEnd = this._itemStart + this._rowCapacity < inventory.length\n    ? this._itemStart + this._rowCapacity\n    : inventory.length;\n\n  // Assumes InventoryItem objects in inventory.\n  for (var i = this._itemStart; i < itemEnd; i++) {\n    var itemId = inventory[i];\n\n    // scaled width = 1/7 panel width;\n    var desiredWidth = (this.panelWidth / 7);\n    var itemIcon = new Icon(this._game, 0,0,\n      itemId, 'memory-bank-icon-mask', 'memory-bank-icon' /* border */, desiredWidth);\n\n    var slickItem;\n    this.panel.add(slickItem = new SlickUI.Element.DisplayObject(\n      this._itemOriginX + (i - this._itemStart)*(this._itemPadding + desiredWidth), this._itemOriginY,\n      itemIcon));\n\n    itemIcon.inputEnabled = true;\n    itemIcon.input.useHandCursor = true;\n    itemIcon.events.onInputOver.add(function () {\n      this.nameText.displayObject.text = items[this.itemId]['name'].toUpperCase();\n      this.descText.displayObject.text = items[this.itemId]['desc'];\n    }, {nameText: this.nameText, descText: this.descText, itemId: itemId});\n\n    this._itemDisplayObjects.push(slickItem);\n  }\n};\n\nMemoryBankWindow.prototype.showNavButtons = function () {\n  // next buttons\n  if (this._itemStart + this._rowCapacity < this._game.player.inventory.length) {\n    var nextButton = this._game.make.button(0,0,'memory-bank-next');\n    var slickNext;\n    this.panel.add(slickNext = new SlickUI.Element.DisplayObject(\n      this._nextOriginX, this._nextOriginY, nextButton));\n    // scaled by height, equal to panel height\n    nextButton.scale.setTo(this.panelHeight / nextButton.height);\n    this._navButtons.push(slickNext);\n\n    nextButton.events.onInputUp.add(function () {\n      this.switchRow(true);\n      this.display();\n    }, this);\n\n  }\n\n  // prev buttons\n  if (this._itemStart > 0) {\n    var prevButton = this._game.make.button(0,0,'memory-bank-next');\n    // rotate sprite\n    prevButton.anchor.setTo(0.5, 0.5);\n    prevButton.scale.y *= -1;\n    prevButton.anchor.setTo(1,1);\n\n    var slickPrev;\n    this.panel.add(slickPrev = new SlickUI.Element.DisplayObject(\n      this._prevOriginX, this._prevOriginY,\n      prevButton));\n    this._navButtons.push(slickPrev);\n\n    prevButton.scale.setTo(this.panelHeight / prevButton.height);\n\n    prevButton.events.onInputUp.add(function () {\n      this.switchRow(false);\n      this.display();\n    }, this);\n\n  }\n};\n\nMemoryBankWindow.prototype.switchRow = function (wantsNextRow) {\n  var inventory = this._game.player.inventory;\n  if (wantsNextRow && this._itemStart + this._rowCapacity < inventory.length) {\n    this._itemStart += this._rowCapacity;\n    return;\n  }\n  if (!wantsNextRow && this._itemStart - this._rowCapacity >= 0) {\n    this._itemStart -= this._rowCapacity;\n    return;\n  }\n};\n\nMemoryBankWindow.prototype.update = function () {\n  // TODO: Stub.\n};\n","/*\n * NPC\n * ====\n *\n * A sample prefab (extended game object class), displaying an NPC in a room.\n */\n\n'use strict';\n\nvar npcs = require('../../static/assets/npcs.json');\nvar Toast = require('./Toast');\n\nfunction NPC(game, x, y, id, height, width) {\n  this.id = id;\n  this.img = npcs[id]['image'];\n  Phaser.Sprite.call(this, game, x, y, this.img);\n  this.height = height;\n  this.width = width;\n  this.name = npcs[id]['name'];\n\n  this._game = game;\n  this.conv = npcs[id]['conv'];\n  this.anchor.set(0.5);\n  this.inputEnabled = true;\n  this.input.useHandCursor = true;\n  this.events.onInputDown.add(click, this);\n  this.events.onInputOver.add(mouseover, this);\n  this.events.onInputOut.add(mouseout, this);\n\n  this.input.pixelPerfectOver = true;   // checks pixels so that collision only happens with non-transparent areas\n                                        // computationally expensive, but maybe necessary for realism purposes?\n}\n\nNPC.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = NPC.prototype.constructor = NPC;\n\nfunction click() {\n  this.hide();\n  this._game.dialogueWindow.begin(this.conv);\n}\n\nfunction mouseover() {\n  this._game.add.existing(this.toast = new Toast(this._game, this.name, 5));\n}\n\nfunction mouseout() {\n  if (this.toast) {\n    this.toast.toast.container.displayGroup.removeAll();\n    this.toast.destroy();\n  }\n}\n\nNPC.prototype.show = function() {\n  var fadeInTween = this._game.add.tween(this);\n  var fadeIn = 200;\n  fadeInTween.to({alpha: 1}, fadeIn, Phaser.Easing.Linear.None, true);\n  this.inputEnabled = true;\n};\n\nNPC.prototype.hide = function() {\n  var fadeOutTween = this._game.add.tween(this);\n  var fadeOut = 200;\n  fadeOutTween.to({alpha: 0}, fadeOut, Phaser.Easing.Linear.None, true);\n  this.inputEnabled = false;\n};\n","/*\n * Placeable\n * ====\n *\n * A sample prefab (extended game object class), displaying an object in a room\n * (usually larger than a clickable) that can be clicked on to display a message,\n * but not added to the player's inventory.\n */\n\n'use strict';\n\nvar Toast = require('./Toast');\nvar items = require('../../static/assets/items.json');\n\nfunction Placeable(game, x, y, id, height, width) {\n  Phaser.Sprite.call(this, game, x, y, id);\n  this.height = height;\n  this.width = width;\n\n  this._game = game;\n  this.id = id;\n  this.name = items[id]['name'];\n  this.message = items[id]['message'];\n  this.anchor.set(0.5);\n  this.inputEnabled = true;\n  this.input.useHandCursor = true;\n  this.events.onInputDown.add(click, this);\n  this.events.onInputOver.add(mouseover, this);\n  this.events.onInputOut.add(mouseout, this);\n\n  this.input.pixelPerfectOver = true;   // checks pixels so that collision only happens with non-transparent areas\n                                        // computationally expensive, but maybe necessary for realism purposes?\n}\n\nfunction click() {\n  this._game.add.existing(new Toast(this._game, this.message, 5));\n}\n\nfunction mouseover() {\n  this._game.add.existing(this.toast = new Toast(this._game, this.name, 5));\n}\n\nfunction mouseout() {\n  if (this.toast) {\n    this.toast.toast.container.displayGroup.removeAll();\n    this.toast.destroy();\n  }\n}\n\nPlaceable.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = Placeable.prototype.constructor = Placeable;","/*\n* Player\n* ====\n*\n* The player object class.\n*/\n\n'use strict';\n\nfunction Player(game) {\n  Phaser.Group.call(this, game);\n  this.inventory = [];\n  this.memoryBank = [];\n  this.seenAreas = []; //areas seen to track what can go in area transition window\n  this.variables = {};\n  this.currentRoom = null;\n  this.convoIdx = 0;\n  this.shownConvo = [];\n  this.convoFile = null;\n\n}\n\nPlayer.prototype = Object.create(Phaser.Group.prototype);\nmodule.exports = Player.prototype.constructor = Player;\n\nPlayer.prototype.serialize = function(game){\n  var fields = [\n    'inventory',\n    'memoryBank',\n    'seenAreas',\n    'variables'\n  ];\n\n  var obj = {};\n\n  for (let i in fields){\n    let field = fields[i];\n    obj[field] = this[field];\n  }\n  //since the room info contains all the objects in room, can I pop off there?\n  obj['currentRoom'] = game.room.area;\n  obj['convoIdx'] = game.dialogueWindow.convoManager.idx;\n  obj['shownConvo'] = game.dialogueWindow.convoManager.shown;\n  //since the convoFile is not stored in the game, we will just store it with the\n  //player whenever a new file is started.\n  //or we could store that also in the Dialogue manager??\n  obj['convoFile'] = game.dialogueWindow.convoFile;\n  return JSON.stringify(obj);\n};\n\nPlayer.unserialize = function(playerState, game){\n\n  if (typeof playerState === 'string'){\n    playerState = JSON.parse(playerState, (key, value) => {\n      return value;     // return the unchanged property value.\n    });\n  }\n\n  game.player = game.add.existing(new Player(game));\n\n  for (let field in playerState){\n    game.player[field] = playerState[field];\n  }\n\n};\n","/*\n * Room\n * ====\n *\n * A sample prefab (extended game object class), displaying a room background.\n */\n\n'use strict';\n\nvar Clickable = require('../objects/Clickable');\nvar Placeable = require('../objects/Placeable');\nvar NPC = require('../objects/NPC');\nvar areas = require('../../static/assets/areas.json');\n\nfunction Room(game, room) {\n  this._game = game;\n  this.name = room;\n\n  this.area = areas[room];\n  this.items = [];\n  this.placeables = [];\n  this.npcs = [];//how does this interact with the conversation manager?\n  //this is causing the glitch where the room blinks on load\n  //though even a new game blinks\n  Phaser.Sprite.call(this, game, game.world.centerX, game.world.centerY, this.area['bg']);\n  this.anchor.set(0.5);\n\n}\n\nRoom.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = Room.prototype.constructor = Room;\n\nRoom.prototype.addItems = function() {\n  //would prefer this in load areas TODO restructure\n  if (typeof this._game.music !== 'undefined' && this._game.music !== null)\n    this._game.music.fadeOut(1000); // fade out previous music\n  this._game.music = this._game.sound.play(this.area.music);\n  this._game.music.loopFull(1);\n\n  for (var i = 0; i < this.area['items'].length; i++) {\n    var item = this.area['items'][i];\n    this._game.add.existing(item = new Clickable(this._game, item['x'], item['y'], item['id'], item['height'], item['width']));\n    this.items.push(item);\n  }\n  for (i = 0; i < this.area['placeables'].length; i++) {\n    var placeable = this.area['placeables'][i];\n    this._game.add.existing(placeable = new Placeable(this._game, placeable['x'], placeable['y'], placeable['id'], placeable['height'], placeable['width']));\n    this.placeables.push(placeable);\n  }\n  for (i = 0; i < this.area['npcs'].length; i++) {\n    var npc = this.area['npcs'][i];\n\n    var showNPC = true;       // check to see if NPC meets conditions to be shown in this area\n    if ('showif' in npc) {\n      for (var condition in npc['showif']) {\n        if (this._game.player.variables[condition] != npc['showif'][condition]) {\n          showNPC = false;\n        }\n      }\n    }\n    if (!showNPC) {\n      continue; // if NPC doesn't meet conditions to be shown, skip them\n    }\n    this._game.add.existing(npc = new NPC(this._game, npc['x'], npc['y'], npc['id'], npc['height'], npc['width']));\n    if (npc.conv === this._game.player.convoFile){\n      npc.alpha = 0;\n    }\n    // if we want to re-enter a room and talk to a character again\n    // then we don't want to pop them off of the stack\n    this.npcs.push(npc);\n  }\n  this._game.world.bringToTop(this._game.slickUI.container.displayGroup);\n};\n\nRoom.prototype.clearItems = function() {\n  for (var i = 0; i < this.items.length; i++) {\n    this.items[i].destroy();\n  }\n  for (i = 0; i < this.placeables.length; i++) {\n    this.placeables[i].destroy();\n  }\n  for (i = 0; i < this.npcs.length; i++) {\n    this.npcs[i].destroy();\n  }\n  this.items = [];\n  this.placeables = [];\n  this.npcs = [];\n};\n\nRoom.prototype.loadArea = function(area) {\n  this.area = areas[area];\n\n  //below should track areas seen so that when area transition is pressed\n  //it will update with what the specific player has access to.\n  if (!this._game.player.seenAreas.includes(area)){\n    this._game.player.seenAreas.push(area);\n  }\n  this.name = area;\n  this._game.camera.fade('#000000', 2000);\n  this._game.camera.onFadeComplete.addOnce(function() {\n    this.clearItems();\n    this._game.camera.flash('#000000', 2000);\n    this.loadTexture(this.area['bg']);\n    this.addItems();\n  }, this);\n};\n","/*\n * SaveButton\n * ====\n * Save button, flush player Object to local store.\n *\n */\n\n'use strict';\n\nvar Toast = require('./Toast');\n\nfunction SaveButton(game) {\n  Phaser.Sprite.call(this, game, 20, 20, 'saveButton');\n  this.height = 30;\n  this.width = 50;\n\n  this._game = game;\n  this.id = 'saveButton';\n  this.name = 'Save Button';\n  this.anchor.set(0.5);\n  this.alpha = 0.5;\n  this.inputEnabled = true;\n  this.input.useHandCursor = true;\n  this.events.onInputDown.add(click, this);\n  this.events.onInputOver.add(mouseover, this);\n  this.events.onInputOut.add(mouseout, this);\n}\n\nfunction click() {\n  this._game.sound.play('save-notification');\n  this._game.add.existing(new Toast(this._game, 'Game Saved!', 5));\n  this._game.dialogueWindow.display(true); // refresh dialogue display\n  var saveString = this._game.player.serialize(this._game);\n  localStorage.setItem('playerState', saveString);\n}\n\nfunction mouseover() {\n  this.alpha = 1;\n  this._game.add.existing(this.toast = new Toast(this._game, this.name, 5));\n}\n\nfunction mouseout() {\n  if (this.toast) {\n    this.toast.toast.container.displayGroup.removeAll();\n    this.toast.destroy();\n  }\n}\n\nSaveButton.prototype = Object.create(Phaser.Sprite.prototype);\nmodule.exports = SaveButton.prototype.constructor = SaveButton;\n","/*\n * Scrollbar\n * =========\n *\n * Bitmap scrollbar that follows a set of given points.\n */\n\n'use strict';\n\nmodule.exports = Scrollbar;\n\nfunction Scrollbar(game, x, y, uiParent, points, maxScroll, lineWidth = 2, scrollbarWidth = 6) {\n  Phaser.Group.call(this, game/*, ...args*/);\n\n  this._game = game;\n  // Dispatch signals; others may attach events to these signals\n  this.onDragStart = new Phaser.Signal();\n  this.onDrag = new Phaser.Signal();\n  this.onDragStop = new Phaser.Signal();\n  this.onSetValue = new Phaser.Signal();\n\n  // Initial value\n  this._value = 0;\n  // How wide is our scrollbar?\n  this._scrollbarWidth = scrollbarWidth;\n  // How many pixels down can we scroll?\n  this._maxScroll = maxScroll;\n  // Determines path of scrollbar, as well as bounds\n  this.points = points;\n\n  // Draw bitmap path\n  this.maxWidth = Math.max(...this.points.x);\n  this.maxHeight = Math.max(...this.points.y);\n\n  var bmdPath = this._game.make.bitmapData(this.maxWidth + lineWidth, this.maxHeight + lineWidth);\n  var interpInc = 1 / this.maxHeight;\n  for (var i = 0; i < 1; i += interpInc) {\n    var px = this._game.math.linearInterpolation(this.points.x, i);\n    var py = this._game.math.linearInterpolation(this.points.y, i);\n    bmdPath.rect(px, py, lineWidth, lineWidth, '#48f2ff');\n  }\n\n  this.scrollbarLine = new SlickUI.Element.DisplayObject(\n    x, y, this._game.make.sprite(0,0, bmdPath));\n\n  // Draw scrollbar\n  this._scrollbarRatio = (this.maxHeight + this._scrollbarWidth - this._maxScroll) / this.maxHeight;\n\n  // Bitmap data for scrollbar\n  this._bmdScroll = this._game.make.bitmapData(\n    this.maxWidth + this._scrollbarWidth, \n    this.maxHeight + this._scrollbarWidth);\n\n  for (i = 0; i < this._scrollbarRatio; i += interpInc) {\n    px = this._game.math.linearInterpolation(points.x, i);\n    py = this._game.math.linearInterpolation(points.y, i);\n    this._bmdScroll.rect(px, py, this._scrollbarWidth, this._scrollbarWidth, '#48f2ff');\n  }\n  var scrollbarSprite = this._game.make.sprite(0,0, this._bmdScroll);\n  this.scrollbar = new SlickUI.Element.DisplayObject(\n    x-this._scrollbarWidth/2, \n    y-this._scrollbarWidth/2, \n    scrollbarSprite);\n\n  // Display events\n  scrollbarSprite.inputEnabled = true;\n  scrollbarSprite.input.useHandCursor = true;\n  \n  // Handle mouse input\n  scrollbarSprite.events.onInputDown.add(function (sprite, pointer) {\n    this._dragging = true;\n    this._dragPoint = pointer.y;\n    this._dragValue = this._value;\n\n    this.onDragStart.dispatch(this._value);\n  }, this);\n  scrollbarSprite.events.onInputUp.add(function () {\n    this._dragging = false;\n\n    this.onDragStop.dispatch(this._value);\n  }, this);\n\n  this._game.input.addMoveCallback(function (pointer, pointerX, pointerY) {\n    if (!this._dragging)\n      return;\n\n    // Measure scroll relative to dragPoint\n    var start = this._dragPoint - this._dragValue*this._maxScroll;\n    var clampedDelta = Math.min(Math.max(0, pointerY - start), this._maxScroll);\n\n    // Update value\n    this._value = (1/this._maxScroll)*clampedDelta;\n\n    // Redraw bitmap to update sprite\n    this.redraw();\n\n    this.onDrag.dispatch(this._value);\n    \n  }, this);\n\n  // Add to SlickUI parent\n  uiParent.add(this.scrollbarLine);\n  uiParent.add(this.scrollbar);\n  \n}\nScrollbar.prototype = Object.create(Phaser.Group.prototype);\nScrollbar.prototype.constructor = Scrollbar;\n\nScrollbar.prototype.redraw = function () {\n  this._bmdScroll.clear();\n  // Redraw bitmap to update sprite\n  var startBitmap = this._value*this._maxScroll / this.maxHeight;\n  var interpInc = 1/this.maxHeight;\n  for (var i = startBitmap; i < startBitmap + this._scrollbarRatio; i += interpInc) {\n    var px = this._game.math.linearInterpolation(this.points.x, i);\n    var py = this._game.math.linearInterpolation(this.points.y, i);\n    this._bmdScroll.rect(px, py, this._scrollbarWidth, this._scrollbarWidth, '#48f2ff');\n  }\n};\n\nScrollbar.prototype.destroy = function () {\n  // if display container exists (i.e. not destroyed)\n  if (typeof this.scrollbarLine.container !== 'undefined' && this.scrollbarLine.container !== null) {\n    this.scrollbarLine.container.displayGroup.removeAll(true);\n    this.scrollbarLine.container.displayGroup.destroy();\n    this.scrollbarLine.container = undefined;\n  }\n  \n  if (typeof this.scrollbar.container !== 'undefined' && this.scrollbar.container !== null) {\n    this.scrollbar.container.displayGroup.removeAll(true);\n    this.scrollbar.container.displayGroup.destroy();\n    this.scrollbar.container = undefined;\n  }\n  this.scrollbarLine.sprite = undefined;\n  this.scrollbar.sprite = undefined;\n};\n\nScrollbar.prototype.update = function () {\n  // TODO: Stub.\n};\n\n/** Explicitly define setters and getters */\n// value\nObject.defineProperty(Scrollbar.prototype, 'value', {\n  get: function () {\n    return this._value;\n  },\n  set: function (value) {\n    this._value = Math.min(Math.max(0, value), 1);\n    this.redraw();\n    this.onSetValue.dispatch(this._value);\n  }\n});\n","/*\n * Toast\n * ====\n *\n * A sample prefab (extended game object class), displaying a toast (popup at top of game screen) that displays\n * text and disappears after several seconds.\n */\n\n'use strict';\n\nvar textstyles = require('../../static/assets/textstyles.json');\n\nfunction Toast(game, message, timeout) {\n  Phaser.Group.call(this, game);\n\n  this._game = game;\n  this.message = message;\n  this.timeout = timeout;\n\n  if (game.toast) {\n    game.toast.toast.container.displayGroup.removeAll();\n    game.toast.destroy();\n  }\n\n  // private members specifying margin and padding\n  this.toastTextY = 16;\n\n  this.toastHeight = game.height * 1/12;\n  this.toastWidth = game.width * 1/2;\n\n  this.toastX = game.width * 1/2 - this.toastWidth * 1/2;\n  this.toastY = 8;\n\n  game.slickUI.add(this.toast = new SlickUI.Element.DisplayObject(\n    this.toastX, this.toastY, game.make.sprite(0, 0, 'toast'),\n    this.toastWidth, this.toastHeight));\n  this.toast.displayObject.width = this.toastWidth;\n  this.toast.displayObject.height = this.toastHeight;\n\n  game.toast = this;\n\n  this.toast.add(\n    this.toastText = new SlickUI.Element.DisplayObject(0, 0, \n      game.make.text(0, this.toastTextY, message, textstyles['toast']))\n  );\n  this.toastText.displayObject.setTextBounds(0, this.toastTextY, this.toastWidth, this.toastHeight);\n\n  this.toast.alpha = 0.8;\n\n  game.time.events.add(Phaser.Timer.SECOND * timeout, destroyPopup, this);\n}\n\nfunction destroyPopup() {\n  this.toast.container.displayGroup.removeAll();\n  this.destroy();\n}\n\nToast.prototype = Object.create(Phaser.Group.prototype);\nmodule.exports = Toast.prototype.constructor = Toast;","'use strict';\n\nvar Card = require('../objects/Card');\nvar Argument = require('../objects/Argument');\nvar items = require('../../static/assets/items.json');\nvar Player = require('../objects/Player');\nvar Room = require('../objects/Room');\n\nvar BattleUi = require('../objects/BattleUi.js');\nvar ArgumentManager = require('../objects/ArgumentManager');\nvar DialogueWindow = require('../objects/DialogueWindow');\nvar CustomActions = require('../utils/CustomActions');\n\nexports.preload = function(game) {\n  // preload all UI menu themes.\n  game.slickUI.load('ui/kenney-theme/kenney.json');\n};\n\nexports.create = function (game) {\n  if (game.player === null || typeof game.player === 'undefined') {\n    game.player = game.add.existing(new Player(game));\n    // DUMMY DATA\n    game.player.inventory.push('listener');\n    game.player.inventory.push('note');\n    game.room = (new Room(game, 'hangar'));\n    // END DUMMY DATA\n  }\n\n  // Music\n  if (typeof game.music !== 'undefined' && game.music !== null)\n    game.music.fadeOut(1000); // fade out previous music\n  \n  game.music = game.sound.play('off-limits');\n  game.music.fadeIn(3000);\n  game.music.loopFull(1);\n\n  game.argumentManager = new ArgumentManager(game);\n  var customActions = new CustomActions(game);\n  game.argumentManager = new ArgumentManager(game, customActions);\n\n  game.argumentManager.loadJSONConversation('battle01');\n  game.currentArgument = 0;\n  game.playerTurn = true;\n  game.cred = 4;\n  game.persuasion = 2;\n\n  // adding in player cards and face\n  game.playerDeck = [];\n  for (var i = 0; i < game.player.inventory.length; i++) {\n    game.playerDeck.push(new Card(game, 0,0, items[game.player.inventory[i]]['id']));\n  }\n\n  // adding opponent face and opponent cards --to do: fetch these from main game state\n  game.opponentDeck = [];\n  var args = game.argumentManager.getAllArguments();\n  for (i = 0; i < args.length; i++) {\n    // TODO: support for multiple counters\n    game.opponentDeck.push(new Argument(game, 0,0, args[i]['id'], args[i]['counters'][0]));\n  }\n\n  game.battleUi = new BattleUi(game, game.playerDeck, game.opponentDeck);\n  game.battleUi.cardSignal.add(cardAction, this);\n\n  game.dialogueWindow = new DialogueWindow(game, game.argumentManager);\n  game.dialogueWindow.begin('battle01');\n};\n\nfunction cardAction(game, card) {\n  if (game.playerTurn) {\n    game.dialogueWindow.skipText();\n\n    game.playerTurn = false;\n    game.battleUi.cardsInputEnabled(false);\n\n    var argument = game.opponentDeck[game.currentArgument];\n\n    var isCorrect = card.key === argument.key;\n\n    if (isCorrect) {\n\n      game.battleUi.playCardAnimation(card, argument, true);\n      game.opponentDeck[game.currentArgument] = undefined;\n      argument.destroy();\n      card.destroy();\n    } else {\n      game.battleUi.playCardAnimation(card, argument, false);\n\n    }\n\n    game.battleUi.cardAnimCompleteSignal.add(argumentInterlude, this, game, isCorrect);\n  }\n}\n\nfunction argumentInterlude(game, isCorrect) {\n  game.argumentManager.startArgInterlude(isCorrect);\n  game.dialogueWindow.display();\n  game.argumentManager.interludeCompleteSignal.add(opponentTurn, this, 0, game);\n\n  game.battleUi.cardAnimCompleteSignal.removeAll();\n}\n\nfunction opponentTurn(game) {\n  if (game.opponentDeck[game.currentArgument] === undefined) {\n    game.persuasion -= 1;\n    game.battleUi.updatePersuasionBar();    \n  } else if (game.opponentDeck[game.currentArgument]) {\n\n    game.cred -= 1;\n    game.battleUi.updateCredBar(game.cred, true); // update cred bar with damage indication\n    game.opponentDeck[game.currentArgument].destroy();\n  } else {\n    game.persuasion -= 1;\n    game.battleUi.updatePersuasionBar();\n  }\n  updateCurrentArgument(game);\n  game.battleUi.updateArguments(game.opponentDeck, game.currentArgument);\n  game.battleUi.positionArguments(game, true);\n  // Display arguments on animation completion\n  game.battleUi.argAnimCompleteSignal.add(function () {\n    updateArgumentWindow(game);\n    game.battleUi.cardsInputEnabled(true);\n    game.playerTurn = true;\n    game.battleUi.argAnimCompleteSignal.removeAll();\n  }, this);\n\n  game.argumentManager.interludeCompleteSignal.removeAll();\n}\n\nfunction updateArgumentWindow(game) {\n  game.argumentManager.advanceToTarget(game.currentArgument);\n  if(game.cred === 0) {\n    game.argumentManager.idx = 3;\n  }\n  if(game.persuasion === 0) {\n    game.argumentManager.idx = 4;\n  }\n  game.dialogueWindow.display();\n}\n\nfunction updateCurrentArgument(game) {\n  game.currentArgument += 1;\n\n  for (var i = 0; i < game.opponentDeck.length; i++) {\n    var idx = game.currentArgument + i;\n    if (idx >= game.opponentDeck.length)\n      idx -= game.opponentDeck.length;\n    // if exists\n    if (typeof game.opponentDeck[idx] !== 'undefined' && game.opponentDeck[idx] !== null) {\n      game.currentArgument = idx;\n      return;\n    }\n  }\n  // exiting means we have no more arguments\n}\n","/*\n * Boot state\n * ==========\n *\n * The first state of the game, responsible for setting up some Phaser\n * features. Adjust the game appearance, number of input pointers, screen\n * orientation handling etc. using this game state.\n */\n\n'use strict';\n\nvar assets = require('../assets');\n\nexports.preload = function (game) {\n  // Point the Phaser Asset Loader to where your game assets live.\n  game.load.path = 'assets/';\n\n  // Initialize physics engines here. Remember that Phaser builds including\n  // Arcade Physics have it enabled by default.\n  //game.physics.startSystem(Phaser.Physics.P2);\n\n  // Adjust how many pointers Phaser will check for input events.\n  game.input.maxPointers = 2;\n\n  // Set the alignment of the game canvas within the page.\n  game.scale.pageAlignHorizontally = true;\n\n  // Adjust the scaling mode of the game canvas.\n  // Example: If you're developing a pixel-art game, set it to 'USER_SCALE'.\n  game.scale.scaleMode = Phaser.ScaleManager.NO_SCALE;\n\n  // When using 'USER_SCALE' scaling mode, use this method to adjust the\n  // scaling factor.\n  //game.scale.setUserScale(2);\n\n  // Uncomment the following line to adjust the rendering of the canvas to\n  // crisp graphics. Great for pixel-art!\n  //Phaser.Canvas.setImageRenderingCrisp(game.canvas);\n\n  // Uncomment this line to disable smoothing of textures.\n  //game.stage.smoothed = false;\n\n  // If the game canvas loses focus, keep the game loop running.\n  game.stage.disableVisibilityChange = true;\n\n  // Whether to use frame-based interpolations or not.\n  game.tweens.frameBased = false;\n\n  // Load the graphical assets required to show the splash screen later,\n  // using the asset pack data.\n  game.load.pack('boot', null, assets);\n};\n\nexports.create = function (game) {\n  // After applying the first adjustments and loading the splash screen\n  // assets, move to the next game state.\n  game.state.start('Preloader');\n};\n","/*\n* Credits state\n* =============\n*\n* The player should be able to return to the main menu.\n*\n*/\n\n'use strict';\n\nexports.init = function() {\n  this.description = 'Congratulations! You\\'ve reached the end of our playable demo. \\\n  We hope you enjoyed the first chapter of Quasaria as much as we enjoyed making it!';\n  this.credits = 'Developed by:\\nAlexandros Christodoulou-Rubalcava\\nHana Lee\\nAmber Thomas\\nEdward Wang';\n};\n\nexports.create = function (game) {\n  this.camera.flash('#000000', 2000);\n\n  //might not be in quotes, its an issue below\n  var screen = game.add.sprite(game.world.centerX, game.world.centerY, 'menu_screen');\n  screen.anchor.setTo(0.5, 0.5);\n\n  let screenFont = 'Cinzel Decorative';\n  let fillColor = '#42dff4';\n\n  var descText = game.add.text(game.world.centerX, game.world.centerY - 100, this.description, {\n    font: '16px ' + screenFont,\n    fill: fillColor,\n    align: 'center',\n    wordWrap: true,\n    wordWrapWidth: game.width - 300\n  });\n\n  var creditsText = game.add.text(game.world.centerX, game.world.centerY + 120, this.credits, {\n    font: '16px ' + screenFont,\n    fill: fillColor,\n    align: 'center',\n    wordWrap: true,\n    wordWrapWidth: game.width - 300\n  });\n\n  var mainMenuText = game.add.text(game.world.centerX, game.world.centerY, 'Main Menu', {\n    font: '50px ' + screenFont,\n    fill: fillColor,\n    align: 'center'\n  });\n\n  descText.anchor.setTo(0.5, 0.5);\n  creditsText.anchor.setTo(0.5, 0.5);\n\n  mainMenuText.anchor.setTo(0.5, 0.5);\n  mainMenuText.inputEnabled = true;\n  mainMenuText.events.onInputOver.add(function() {\n    mainMenuText.fill = '#ff00ff';\n  }, this);\n\n  mainMenuText.events.onInputOut.add(function() {\n    mainMenuText.fill = '#42dff4';\n  }, this);\n\n  mainMenuText.events.onInputDown.add(function () {\n    game.state.start('MainMenu');\n  }, this);\n\n};\n","/*\n* Game state\n* ==========\n*\n* A sample Game state, displaying the Phaser logo.\n*/\n\n'use strict';\n\nvar Room = require('../objects/Room');\nvar Player = require('../objects/Player');\nvar DialogueWindow = require('../objects/DialogueWindow');\nvar ConversationManager = require('../objects/ConversationManager');\nvar CustomActions = require('../utils/CustomActions');\nvar MemoryBankWindow = require('../objects/MemoryBankWindow');\nvar AreaTransitionWindow = require('../objects/AreaTransitionWindow');\nvar SaveButton = require('../objects/SaveButton');\n\nexports.preload = function(game) {\n  // preload all UI menu themes.\n  game.slickUI.load('ui/kenney-theme/kenney.json');\n};\n\nexports.init = function(game, resumeGame, fromBattle){\n\n  let playerState = localStorage.getItem('playerState');\n  if (fromBattle) {\n    game.room = new Room(game, 'hangar');  \n  } else if (resumeGame && playerState !== null){\n    Player.unserialize(playerState, game);\n    //current room is actually room.area\n    //need to deep copy, otherwise we will loose the area info\n    var area = JSON.parse(JSON.stringify(game.player.currentRoom));\n    game.room = (new Room(game, area.id));\n    game.room.area = area;\n\n  } else { //check if old model blinks\n    localStorage.clear();\n    game.player = (new Player(game));\n    //game.player.variables['debug'] = 'true';    // comment this out to get rid of DEBUG - SKIP TO END conversation options\n    game.player.convoFile = 'prologue01';\n    game.room = (new Room(game, 'shuttle'));\n\n  }\n\n};\n\nexports.create = function (game) {\n\n  this.camera.flash('#000000', 2000);\n  game.add.existing(game.player);\n\n  game.add.existing(game.room);\n  game.room.addItems();\n\n\n  // we previously had music in the game state, but I move it to the room object\n  // so that we can have different themes for different rooms\n  // need to set the music in the other states like logic battles\n\n  game.add.existing(new SaveButton(game));\n\n  // custom actions for conversations\n  var customActions = new CustomActions(game);\n  // conversation manager\n  var convoManager = new ConversationManager(game, customActions);\n  convoManager.idx = game.player.convoIdx;\n  convoManager.shown = game.player.shownConvo;\n\n  // dialogue window object\n  game.dialogueWindow = new DialogueWindow(game, convoManager);\n  // memory bank window object\n  game.memoryBankWindow = new MemoryBankWindow(game);\n  // area transition window object\n  game.areaTransitionWindow = new AreaTransitionWindow(game);\n\n  game.dialogueWindow.begin(game.player.convoFile);\n\n};\n","/*\n* Game Over state\n* ===============\n*\n* The player should be able to restart a saved game or return to the main menu..\n*\n*/\n\n'use strict';\n\nexports.init = function(game, gameOverText) {\n  this.gameOverText = gameOverText;\n};\n\nexports.create = function (game) {\n  this.camera.flash('#000000', 2000);\n\n  if (typeof game.music !== 'undefined' && game.music !== null)\n    game.music.fadeOut(1000); // fade out previous music\n  game.music = game.sound.play('cold-moon');\n  game.music.loopFull(1);\n  //might not be in quotes, its an issue below\n  var screen = game.add.sprite(game.world.centerX, game.world.centerY, 'menu_screen');\n  screen.anchor.setTo(0.5, 0.5);\n\n  let screenFont = 'Cinzel Decorative';\n  let fillColor = '#42dff4';\n\n  var titleText = game.add.text(game.world.centerX, game.world.centerY- 85, 'Game Over', {\n    font: '75px ' + screenFont,\n    fontWeight: 'bold',\n    fill: fillColor,\n    align: 'center'\n  });\n\n  var descText = game.add.text(game.world.centerX, game.world.centerY - 20, this.gameOverText, {\n    font: '25px ' + screenFont,\n    fill: fillColor,\n    align: 'center'\n  });\n\n  var contText = game.add.text(game.world.centerX, game.world.centerY + 30, 'Reload', {\n    font: '50px ' + screenFont,\n    fill: fillColor,\n    align: 'center'\n  });\n\n  var mainMenuText = game.add.text(game.world.centerX, game.world.centerY + 85, 'Main Menu', {\n    font: '50px ' + screenFont,\n    fill: fillColor,\n    align: 'center'\n  });\n\n  titleText.anchor.setTo(0.5, 0.5);\n\n  descText.anchor.setTo(0.5, 0.5);\n\n  contText.anchor.setTo(0.5, 0.5);\n  contText.inputEnabled = true;\n  contText.events.onInputOver.add(function() {\n    contText.fill = '#ff00ff';\n  }, this);\n\n  contText.events.onInputOut.add(function() {\n    contText.fill = '#42dff4';\n  }, this);\n\n  contText.events.onInputDown.add(function () {\n    let resumeGame = true;\n    game.state.start('Game', true, false, game, resumeGame);\n  }, this);\n\n  mainMenuText.anchor.setTo(0.5, 0.5);\n  mainMenuText.inputEnabled = true;\n  mainMenuText.events.onInputOver.add(function() {\n    mainMenuText.fill = '#ff00ff';\n  }, this);\n\n  mainMenuText.events.onInputOut.add(function() {\n    mainMenuText.fill = '#42dff4';\n  }, this);\n\n  mainMenuText.events.onInputDown.add(function () {\n    game.state.start('MainMenu');\n  }, this);\n\n};\n","/*\n* Main Menu state\n* ===============\n*\n* The player should be able to restart a saved game or start a new game.\n*\n*/\n\n'use strict';\n\nexports.create = function (game) {\n\n  //might not be in quotes, its an issue below\n  game.music = game.sound.play('menu-theme-terraform');\n  game.music.loopFull(1);\n\n  var screen = game.add.sprite(game.world.centerX, game.world.centerY, 'menu_screen');\n  screen.anchor.setTo(0.5, 0.5);\n\n  var logo = game.add.sprite(game.world.centerX, game.world.centerY - 30, 'quasaria-logo-MM');\n  logo.anchor.setTo(0.5, 0.5);\n  logo.alpha = .1;\n\n  let screenFont = 'Cinzel Decorative';\n  let fillColor = '#42dff4';\n\n  var titleText = game.add.text(game.world.centerX, game.world.centerY- 75, 'Quasaria', {\n    font: '75px ' + screenFont,\n    fontWeight: 'bold',\n    fill: fillColor,\n    align: 'center'\n  });\n\n  var contText = game.add.text(game.world.centerX, game.world.centerY, 'Continue', {\n    font: '50px ' + screenFont,\n    fill: fillColor,\n    align: 'center'\n  });\n\n  var newGameText = game.add.text(game.world.centerX, game.world.centerY + 55, 'New Game', {\n    font: '50px ' + screenFont,\n    fill: fillColor,\n    align: 'center'\n  });\n\n  titleText.anchor.setTo(0.5, 0.5);\n\n\n  contText.anchor.setTo(0.5, 0.5);\n  contText.inputEnabled = true;\n  contText.events.onInputOver.add(function() {\n    contText.fill = '#ff00ff';\n  }, this);\n\n  contText.events.onInputOut.add(function() {\n    contText.fill = '#42dff4';\n  }, this);\n\n  contText.events.onInputDown.add(function () {\n    let resumeGame = true;\n    game.state.start('Game', true, false, game, resumeGame);\n  }, this);\n\n  newGameText.anchor.setTo(0.5, 0.5);\n  newGameText.inputEnabled = true;\n  newGameText.events.onInputOver.add(function() {\n    newGameText.fill = '#ff00ff';\n  }, this);\n\n  newGameText.events.onInputOut.add(function() {\n    newGameText.fill = '#42dff4';\n  }, this);\n\n  newGameText.events.onInputDown.add(function () {\n    let resumeGame = false;\n    game.state.start('Game', true, false, game, resumeGame);\n  }, this);\n\n};\n","/*\n * Preloader state\n * ===============\n *\n * Takes care of loading the main game assets, including graphics and sound\n * effects, while displaying a busy splash screen.\n */\n\n'use strict';\n\nvar assets = require('../assets');\n\n\nfunction showSplashScreen (game) {\n  game.add.image(0, 0, 'splash-screen');\n  game.load.setPreloadSprite(game.add.image(82, 282, 'progress-bar'));\n}\n\nexports.preload = function (game) {\n  showSplashScreen(game);\n  game.load.pack('game', null, assets);\n  game.load.pack('main_menu', null, assets);\n  game.load.pack('ui', null, assets);\n  game.load.pack('conversations', null, assets);\n  game.load.pack('sounds', null, assets);\n  game.load.pack('logic_battle', null, assets);\n};\n\nexports.create = function (game) {\n  // Here is a good place to initialize plugins dependent of any game asset.\n  // Don't forget to `require` them first. Example:\n  //game.myPlugin = game.plugins.add(MyPlugin/*, ... parameters ... */);\n\n  // Slick UI initialization; added from index.html\n  // NOTE: slick UI loads theme from cache\n  // between preload and create functions FOR EACH STATE\n  game.slickUI = game.plugins.add(Phaser.Plugin.SlickUI);\n\n  game.state.start('MainMenu');\n\n};\n","/*\n * `states` module\n * ===============\n *\n * Declares all present game states.\n * Expose the required game states using this module.\n */\n\n'use strict';\n\nexports.Boot = require('./Boot');\nexports.Preloader = require('./Preloader');\nexports.MainMenu = require('./MainMenu');\nexports.Game = require('./Game');\nexports.Battleground = require('./Battleground');\nexports.GameOver = require('./GameOver');\nexports.Credits = require('./Credits');","/*\n * Custom Actions\n * ===================\n *\n * Stores code for custom actions to be taken during conversations.\n */\n\n'use strict';\n\nmodule.exports = CustomActions;\n\nfunction CustomActions(game/*, ...args*/) {\n  Phaser.Group.call(this, game/*, ...args*/);\n  this._game = game;\n}\n\nCustomActions.prototype = Object.create(Phaser.Group.prototype);\nCustomActions.prototype.constructor = CustomActions;\n\nCustomActions.prototype.customAction = function(action) {\n  if (action.startsWith('fadeInAndOut')) {\n    this.fadeInAndOut(parseInt(action.substring('fadeInAndOut'.length)));\n  } else if (action === 'startConv:prologue02') {\n    this._game.camera.fade('#000000', 2000);\n    this._game.camera.onFadeComplete.addOnce(function() {\n      this._game.camera.flash('#000000', 2000);\n      this.startConversation('prologue02');\n    }, this);\n  } else if (action.startsWith('moveToArea:')) {\n    this.moveToArea(action.substring('moveToArea:'.length));\n  } else if (action === 'startBattle') {\n    this.loadBattle();  \n  } else if (action === 'loadMainGameState') {\n    this._game.state.start('Game', true, false, this._game, false, true);\n  } else if (action.startsWith('gameover')) {\n    this._game.state.start('GameOver', true, false, this._game, action.substring('gameover'.length));\n  } else if (action === 'credits') {\n    this._game.state.start('Credits', true, false, this._game);\n  }\n};\n\n\n\n\nCustomActions.prototype.loadBattle = function() {\n  this._game.dialogueWindow.hide();\n  this._game.state.start('Battleground', true, false);\n};\n\nCustomActions.prototype.startConversation = function(conv) {\n  this._game.dialogueWindow.begin(conv);\n};\n\nCustomActions.prototype.moveToArea = function(area) {\n  this._game.room.loadArea(area);\n};\n\nCustomActions.prototype.fadeInAndOut = function(duration) {\n  this._game.camera.fade('#000000', duration/2);\n  this._game.dialogueWindow.avatar.visible = false;\n  this._game.dialogueWindow.dialogPanel.visible = false;\n  this._game.camera.onFadeComplete.addOnce(function() {\n    this._game.camera.flash('#000000', duration/2);\n    this._game.dialogueWindow.avatar.visible = true;\n    this._game.dialogueWindow.dialogPanel.visible = true;\n  }, this);\n};","module.exports={\n\t\"shuttle\": {\n\t\t\"id\": \"shuttle\",\n\t\t\"name\": \"Shuttle\",\n\t\t\"bg\": \"shuttle\",\n\t\t\"music\": \"puzzle2\",\n\t\t\"items\": [\n\t\t\t{\n\t\t\t\t\"id\": \"listener\",\n\t\t\t\t\"x\": 150,\n\t\t\t\t\"y\": 150,\n\t\t\t\t\"height\": 100,\n\t\t\t\t\"width\": 100\n\t\t\t}, {\n\t\t\t\t\"id\": \"note\",\n\t\t\t\t\"x\": 720,\n\t\t\t\t\"y\": 200,\n\t\t\t\t\"height\": 100,\n\t\t\t\t\"width\": 100\n\t\t\t}\n\t\t],\n\t\t\"placeables\": [],\n\t\t\"npcs\": [],\n\t\t\"navigable\": false,\n\t\t\"areaAccess\": []\n\t},\n\t\"hangar\": {\n\t\t\"id\": \"hangar\",\n\t\t\"name\": \"Hangar Bay\",\n\t\t\"bg\": \"hangar\",\n\t\t\"music\": \"lostjungle\",\n\t\t\"items\": [],\n\t\t\"placeables\": [\n\t\t\t{\n\t\t\t\t\"id\": \"shuttle-placeable\",\n\t\t\t\t\"x\": 475,\n\t\t\t\t\"y\": 300,\n\t\t\t\t\"height\": 300,\n\t\t\t\t\"width\": 401\n\t\t\t}\n\t\t],\n\t\t\"npcs\": [\n\t\t\t{\n\t\t\t\t\"id\": \"Vesper\",\n\t\t\t\t\"x\": 100,\n\t\t\t\t\"y\": 350,\n\t\t\t\t\"height\": 350,\n\t\t\t\t\"width\": 150\n\t\t\t}, {\n\t\t\t\t\"id\": \"Gleaming Shoal\",\n\t\t\t\t\"x\": 400,\n\t\t\t\t\"y\": 300,\n\t\t\t\t\"height\": 400,\n\t\t\t\t\"width\": 400,\n\t\t\t\t\"showif\": {\n\t\t\t\t\t\"xenopsychologist\": \"done\",\n\t\t\t\t\t\"xenobiologist\": \"done\"\n\t\t\t\t}\n\t\t\t}\n\t\t],\n\t\t\"navigable\": true,\n\t\t\"areaAccess\": [\"medbay\"]\n\t},\n\t\"medbay\": {\n\t\t\"id\": \"medbay\",\n\t\t\"name\": \"Medical Bay\",\n\t\t\"bg\": \"medbay\",\n\t\t\"music\": \"puzzle1\",\n\t\t\"items\": [],\n\t\t\"placeables\": [],\n\t\t\"npcs\": [\n\t\t\t{\n\t\t\t\t\"id\": \"Dr. Talvine Mesmer-Quiverly\",\n\t\t\t\t\"x\": 320,\n\t\t\t\t\"y\": 340,\n\t\t\t\t\"height\": 183,\n\t\t\t\t\"width\": 100\n\t\t\t}, {\n\t\t\t\t\"id\": \"Dr. Valken\",\n\t\t\t\t\"x\": 600,\n\t\t\t\t\"y\": 250,\n\t\t\t\t\"height\": 330,\n\t\t\t\t\"width\": 112.5\n\t\t\t}\n\t\t],\n\t\t\"navigable\": true,\n\t\t\"areaAccess\": [\"hangar\"]\n\t}\n}\n","module.exports={\n\t\"listener\": {\n\t\t\"id\": \"listener\",\n\t\t\"url\": \"listener.png\",\n\t\t\"name\": \"Listener\",\n\t\t\"desc\": \"A small, pocket-sized blue orb that is normally cool to the touch, but warms when your mysterious rescuer uses it to communicate with you. He/she told you to keep this safe, and let no one know of its true purpose.\"\n\t},\n\t\"note\": {\n\t\t\"id\": \"note\",\n\t\t\"url\": \"note.png\",\n\t\t\"name\": \"Indecipherable Note\",\n\t\t\"desc\": \"A note covered in strange alien symbols. Your mysterious rescuer left this for you, saying it would help explain things, but so far you can't understand it.\"\n\t},\n\t\"shuttle-placeable\": {\n\t\t\"id\": \"shuttle-placeable\",\n\t\t\"url\": \"shuttle-placeable.png\",\n\t\t\"name\": \"My Shuttle\",\n\t\t\"message\": \"That's my shuttle, but I can't go in there right now.\"\n\t},\n\t\"biologistApproval\": {\n\t\t\"id\": \"biologistApproval\",\n\t\t\"url\": \"talvine.png\",\n\t\t\"name\": \"Dr. Talvine's Report\",\n\t\t\"desc\": \"A clean bill of health from Dr. Talvine Mesmer-Quiverly, Station Zero's xenobiologist.\"\n\t},\n\t\"psychologistApproval\": {\n\t\t\"id\": \"psychologistApproval\",\n\t\t\"url\": \"valken.png\",\n\t\t\"name\": \"Dr. Valken's Report\",\n\t\t\"desc\": \"A briefing on your psychological state from Dr. Valken, Station Zero's xenopsychologist.\"\n\t},\n\t\"secretaryNote\": {\n\t\t\"id\": \"secretaryNote\",\n\t\t\"url\": \"secretaryNote.png\",\n\t\t\"name\": \"Memo to Garnetta\",\n\t\t\"desc\": \"\\\"Garnetta: keep talking with Clearance staff. You won't be interrupted.\\\"\"\n\t}\n}","module.exports={\n\t\"Mysterious Voice\": {\n\t\t\"id\": \"Mysterious Voice\",\n\t\t\"name\": \"Mysterious Voice\",\n\t\t\"image\": \"mysterious-voice\",\n\t\t\"avatar\": \"mysterious-voice\",\n\t},\n\t\"Gleaming Shoal\": {\n\t\t\"id\": \"Gleaming Shoal\",\n\t\t\"name\": \"Gleaming Shoal\",\n\t\t\"image\": \"gleaming-shoal-npc\",\n\t\t\"avatar\": \"gleaming-shoal\",\n\t\t\"conv\": \"gleaming-shoal01\"\n\t},\n\t\"Unknown Alien\": {\n\t\t\"id\": \"Gleaming Shoal\",\n\t\t\"name\": \"Unknown Alien\",\n\t\t\"image\": \"unknown-alien\",\n\t\t\"avatar\": \"unknown-alien\"\n\t},\n\t\"Kismet\": {\n\t\t\"id\": \"Kismet\",\n\t\t\"name\": \"Kismet\",\n\t\t\"image\": \"kismet\",\n\t\t\"avatar\": \"kismet\"\n\t},\n\t\"Vesper\": {\n\t\t\"id\": \"Vesper\",\n\t\t\"name\": \"Vesper\",\n\t\t\"image\": \"vesper-npc\",\n\t\t\"avatar\": \"vesper\",\n\t\t\"conv\": \"vesper01\"\n\t},\n\t\"Dr. Talvine Mesmer-Quiverly\": {\n\t\t\"id\": \"Dr. Talvine Mesmer-Quiverly\",\n\t\t\"name\": \"Dr. Talvine\",\n\t\t\"image\": \"talvine-npc\",\n\t\t\"avatar\": \"talvine\",\n\t\t\"conv\": \"talvine01\"\n\t},\n\t\"Dr. Valken\": {\n\t\t\"id\": \"Dr. Valken\",\n\t\t\"name\": \"Dr. Valken\",\n\t\t\"image\": \"valken-npc\",\n\t\t\"avatar\": \"valken\",\n\t\t\"conv\": \"valken01\"\n\t}\n}","module.exports={\n\t\"speaker\": {\n\t\t\"font\": \"20px Goudy Bookletter 1911\", \n\t\t\"fill\": \"#48f2ff\", \n\t\t\"wordWrap\": false, \n\t\t\"align\": \"left\"\n\t},\n\t\"dialogueBody\": {\n\t\t\"font\": \"14px Open Sans\", \n\t\t\"fill\": \"#48f2ff\", \n\t\t\"wordWrap\": true, \n\t\t//\"wordWrapWidth\": \"this._dialogTextWidth\",\n\t\t\"align\": \"left\"\n\t},\n\t\"choiceButton\": {\n\t\t\"font\": \"14px Open Sans\",\n\t\t\"fill\": \"#48f2ff\", \n\t\t\"wordWrap\": true,\n\t\t//\"wordWrapWidth\": this._dialogTextWidth - buttonSidePadding, \n\t\t\"align\": \"left\"\n\t},\n\t\"toast\": {\n\t\t\"font\": \"14px Open Sans\",\n\t\t\"fill\": \"#48f2ff\",\n\t\t\"boundsAlignH\": \"center\"\n\t},\n\t\"credibility\": {\n\t\t\"font\": \"32px Cinzel Decorative\", \n\t\t\"fontWeight\": \"bold\",\n\t\t\"fill\": \"#48f2ff\", \n\t\t\"boundsAlignH\": \"center\", \n\t\t\"boundsAlignV\": \"middle\"\n\t},\n\t\"mainMenuTitle\": {\n\t\t\"font\": \"75px Cinzel Decorative\",\n\t\t\"fontWeight\": \"bold\",\n\t\t\"fill\": \"#42dff4\",\n\t\t\"align\": \"center\"\n\t}, \n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLmpzIiwic3JjL2Fzc2V0cy5qcyIsInNyYy9vYmplY3RzL0FyZWFUcmFuc2l0aW9uV2luZG93LmpzIiwic3JjL29iamVjdHMvQXJndW1lbnQuanMiLCJzcmMvb2JqZWN0cy9Bcmd1bWVudE1hbmFnZXIuanMiLCJzcmMvb2JqZWN0cy9CYXR0bGVVaS5qcyIsInNyYy9vYmplY3RzL0NhcmQuanMiLCJzcmMvb2JqZWN0cy9DbGlja2FibGUuanMiLCJzcmMvb2JqZWN0cy9Db252ZXJzYXRpb25NYW5hZ2VyLmpzIiwic3JjL29iamVjdHMvRGlhbG9ndWVXaW5kb3cuanMiLCJzcmMvb2JqZWN0cy9IZWFsdGhCYXIuanMiLCJzcmMvb2JqZWN0cy9JY29uLmpzIiwic3JjL29iamVjdHMvTWVtb3J5QmFua1dpbmRvdy5qcyIsInNyYy9vYmplY3RzL05QQy5qcyIsInNyYy9vYmplY3RzL1BsYWNlYWJsZS5qcyIsInNyYy9vYmplY3RzL1BsYXllci5qcyIsInNyYy9vYmplY3RzL1Jvb20uanMiLCJzcmMvb2JqZWN0cy9TYXZlQnV0dG9uLmpzIiwic3JjL29iamVjdHMvU2Nyb2xsYmFyLmpzIiwic3JjL29iamVjdHMvVG9hc3QuanMiLCJzcmMvc3RhdGVzL0JhdHRsZWdyb3VuZC5qcyIsInNyYy9zdGF0ZXMvQm9vdC5qcyIsInNyYy9zdGF0ZXMvQ3JlZGl0cy5qcyIsInNyYy9zdGF0ZXMvR2FtZS5qcyIsInNyYy9zdGF0ZXMvR2FtZU92ZXIuanMiLCJzcmMvc3RhdGVzL01haW5NZW51LmpzIiwic3JjL3N0YXRlcy9QcmVsb2FkZXIuanMiLCJzcmMvc3RhdGVzL2luZGV4LmpzIiwic3JjL3V0aWxzL0N1c3RvbUFjdGlvbnMuanMiLCJzdGF0aWMvYXNzZXRzL2FyZWFzLmpzb24iLCJzdGF0aWMvYXNzZXRzL2l0ZW1zLmpzb24iLCJzdGF0aWMvYXNzZXRzL25wY3MuanNvbiIsInN0YXRpYy9hc3NldHMvdGV4dHN0eWxlcy5qc29uIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25aQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3haQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLypcbiAqIGBhcHBgIG1vZHVsZVxuICogPT09PT09PT09PT09XG4gKlxuICogUHJvdmlkZXMgdGhlIGdhbWUgaW5pdGlhbGl6YXRpb24gcm91dGluZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIEltcG9ydCBnYW1lIHN0YXRlcy5cbnZhciBzdGF0ZXMgPSByZXF1aXJlKCcuL3N0YXRlcycpO1xuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBnYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTyk7XG5cbiAgLy8gRHluYW1pY2FsbHkgYWRkIGFsbCByZXF1aXJlZCBnYW1lIHN0YXRlcy5cbiAgT2JqZWN0XG4gICAgLmtleXMoc3RhdGVzKVxuICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGdhbWUuc3RhdGUuYWRkKGtleSwgc3RhdGVzW2tleV0pO1xuICAgIH0pO1xuXG4gIGdhbWUuc3RhdGUuc3RhcnQoJ0Jvb3QnKTtcblxuICByZXR1cm4gZ2FtZTtcbn07XG4iLCIvKlxuICogYGFzc2V0c2AgbW9kdWxlXG4gKiA9PT09PT09PT09PT09PT1cbiAqXG4gKiBEZWNsYXJlcyBzdGF0aWMgYXNzZXQgcGFja3MgdG8gYmUgbG9hZGVkIHVzaW5nIHRoZSBgUGhhc2VyLkxvYWRlciNwYWNrYFxuICogbWV0aG9kLiBVc2UgdGhpcyBtb2R1bGUgdG8gZGVjbGFyZSBnYW1lIGFzc2V0cy5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIC0tIFNwbGFzaCBzY3JlZW4gYXNzZXRzIHVzZWQgYnkgdGhlIFByZWxvYWRlci5cbmV4cG9ydHMuYm9vdCA9IFt7XG4gIGtleTogJ3NwbGFzaC1zY3JlZW4nLFxuICB0eXBlOiAnaW1hZ2UnXG59LCB7XG4gIGtleTogJ3Byb2dyZXNzLWJhcicsXG4gIHR5cGU6ICdpbWFnZSdcbn1dO1xuXG5leHBvcnRzLm1haW5fbWVudSA9IFt7XG4gIGtleTogJ3F1YXNhcmlhLWxvZ28tTU0nLFxuICB0eXBlOiAnaW1hZ2UnXG59LCB7XG4gIGtleTogJ2NvbnRpbnVlQnV0dG9uJyxcbiAgdHlwZTogJ2ltYWdlJ1xufSwge1xuICBrZXk6ICdtZW51X3NjcmVlbicsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2JhY2tncm91bmRzL21lbnVfc2NyZWVuX3NjYWxlZC5wbmcnXG59XTtcblxuXG4vLyAtLSBHZW5lcmFsIGFzc2V0cyB1c2VkIHRocm91Z2hvdXQgdGhlIGdhbWUuXG5leHBvcnRzLmdhbWUgPSBbe1xuICBrZXk6ICdxdWFzYXJpYS1sb2dvJyxcbiAgdHlwZTogJ2ltYWdlJ1xufSwge1xuICBrZXk6ICdzaHV0dGxlJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmFja2dyb3VuZHMvc2h1dHRsZS5wbmcnXG59LCB7XG4gIGtleTogJ2hhbmdhcicsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2JhY2tncm91bmRzL2hhbmdhci5wbmcnXG59LCB7XG4gIGtleTogJ21lZGJheScsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2JhY2tncm91bmRzL21lZGJheS5wbmcnXG59LCB7XG4gIGtleTogJ2xpc3RlbmVyJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnaXRlbXMvbGlzdGVuZXIucG5nJ1xufSwge1xuICBrZXk6ICdub3RlJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnaXRlbXMvbm90ZS5wbmcnXG59LCB7XG4gIGtleTogJ2Jpb2xvZ2lzdEFwcHJvdmFsJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYXZhdGFycy90YWx2aW5lLnBuZydcbn0sIHtcbiAga2V5OiAncHN5Y2hvbG9naXN0QXBwcm92YWwnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdhdmF0YXJzL3ZhbGtlbi5wbmcnXG59LCB7XG4gIGtleTogJ3NodXR0bGUtcGxhY2VhYmxlJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnaXRlbXMvc2h1dHRsZS1wbGFjZWFibGUucG5nJ1xufSwge1xuICBrZXk6ICd2ZXNwZXItbnBjJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnbnBjcy92ZXNwZXIucG5nJ1xufSwge1xuICBrZXk6ICd0YWx2aW5lLW5wYycsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ25wY3MvdGFsdmluZS5wbmcnXG59LCB7XG4gIGtleTogJ3ZhbGtlbi1ucGMnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICducGNzL3ZhbGtlbi5wbmcnXG59LCB7XG4gIGtleTogJ2dsZWFtaW5nLXNob2FsLW5wYycsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ25wY3MvZ2xlYW1pbmctc2hvYWwucG5nJ1xufV07XG5cbi8vIC0tIFVJLXNwZWNpZmljIGFzc2V0cy5cbmV4cG9ydHMudWkgPSBbe1xuICBrZXk6ICdkaWFsb2d1ZS1jaG9pY2UtYnV0dG9uJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAndWkvZGlhbG9ndWUtY2hvaWNlLWJ1dHRvbi5wbmcnXG59LCB7XG4gIGtleTogJ2RpYWxvZ3VlLXBhbmVsJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAndWkvZGlhbG9ndWUtcGFuZWwucG5nJ1xufSwge1xuICBrZXk6ICd0b2FzdCcsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ3VpL3RvYXN0LnBuZydcbn0sIHtcbiAga2V5OiAnbWVtb3J5LWJhbmstYnV0dG9uJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAndWkvbWVtb3J5LWJhbmstYnV0dG9uLnBuZydcbn0sIHtcbiAga2V5OiAnbWVtb3J5LWJhbmstaWNvbicsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ3VpL21lbW9yeS1iYW5rLWljb24ucG5nJ1xufSwge1xuICBrZXk6ICdtZW1vcnktYmFuay1pY29uLW1hc2snLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICd1aS9tZW1vcnktYmFuay1pY29uLW1hc2sucG5nJ1xufSwge1xuICBrZXk6ICdtZW1vcnktYmFuay1uZXh0JyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAndWkvbWVtb3J5LWJhbmstbmV4dC5wbmcnXG59LCB7XG4gIGtleTogJ21lbW9yeS1iYW5rJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAndWkvbWVtb3J5LWJhbmsucG5nJ1xufSwge1xuICBrZXk6ICdzYXZlQnV0dG9uJyxcbiAgdHlwZTogJ2ltYWdlJ1xufSwge1xuICBrZXk6ICdidXR0b24nLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICd1aS9idXR0b24ucG5nJ1xufSwge1xuICBrZXk6ICdiYXR0bGUtYmFja2dyb3VuZCcsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ3VpL2JhdHRsZS1iYWNrZ3JvdW5kLnBuZydcbn0sIHtcbiAga2V5OiAnYmF0dGxlLW92ZXJsYXknLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICd1aS9iYXR0bGUtb3ZlcmxheS1zY2FsZWQucG5nJ1xufSwge1xuICBrZXk6ICdtZW1vcnktYmFuay1pY29uLWZpbGwnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICd1aS9tZW1vcnktYmFuay1pY29uLWZpbGwucG5nJ1xufV07XG5cbi8vIC0tIENvbnZlcnNhdGlvbiBqc29ucyBhbmQgYXZhdGFycy5cbmV4cG9ydHMuY29udmVyc2F0aW9ucyA9IFt7XG4gIGtleTogJ3Byb2xvZ3VlMDEnLFxuICB0eXBlOiAnanNvbicsXG4gIHVybDogJ2NvbnZlcnNhdGlvbnMvcHJvbG9ndWUwMS5qc29uJ1xufSwge1xuICBrZXk6ICdwcm9sb2d1ZTAyJyxcbiAgdHlwZTogJ2pzb24nLFxuICB1cmw6ICdjb252ZXJzYXRpb25zL3Byb2xvZ3VlMDIuanNvbidcbn0sIHtcbiAga2V5OiAndmVzcGVyMDEnLFxuICB0eXBlOiAnanNvbicsXG4gIHVybDogJ2NvbnZlcnNhdGlvbnMvdmVzcGVyMDEuanNvbidcbn0sIHtcbiAga2V5OiAndGFsdmluZTAxJyxcbiAgdHlwZTogJ2pzb24nLFxuICB1cmw6ICdjb252ZXJzYXRpb25zL3RhbHZpbmUwMS5qc29uJ1xufSwge1xuICBrZXk6ICd2YWxrZW4wMScsXG4gIHR5cGU6ICdqc29uJyxcbiAgdXJsOiAnY29udmVyc2F0aW9ucy92YWxrZW4wMS5qc29uJ1xufSwge1xuICBrZXk6ICdnbGVhbWluZy1zaG9hbDAxJyxcbiAgdHlwZTogJ2pzb24nLFxuICB1cmw6ICdjb252ZXJzYXRpb25zL2dsZWFtaW5nLXNob2FsMDEuanNvbidcbn0sIHtcbiAga2V5OiAnbXlzdGVyaW91cy12b2ljZScsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2F2YXRhcnMvbXlzdGVyaW91cy12b2ljZS5wbmcnXG59LCB7XG4gIGtleTogJ2tpc21ldCcsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2F2YXRhcnMva2lzbWV0LnBuZydcbn0sIHtcbiAga2V5OiAnZ2xlYW1pbmctc2hvYWwnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdhdmF0YXJzL2dsZWFtaW5nLXNob2FsLnBuZydcbn0sIHtcbiAga2V5OiAnZ2xlYW1pbmctc2hvYWwtcG9ydHJhaXQnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdhdmF0YXJzL2dsZWFtaW5nLXNob2FsLXBvcnRyYWl0LnBuZydcbn0sIHtcbiAga2V5OiAndW5rbm93bi1hbGllbicsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2F2YXRhcnMvZ2xlYW1pbmctc2hvYWwtc2lsaG91ZXR0ZS5wbmcnXG59LCB7XG4gIGtleTogJ3Zlc3BlcicsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2F2YXRhcnMvdmVzcGVyLnBuZydcbn0sIHtcbiAga2V5OiAndGFsdmluZScsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2F2YXRhcnMvdGFsdmluZS5wbmcnXG59LCB7XG4gIGtleTogJ3ZhbGtlbicsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2F2YXRhcnMvdmFsa2VuLnBuZydcbn0sIHtcbiAga2V5OiAnaW52aXNpYmxlJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYXZhdGFycy9pbnZpc2libGUucG5nJ1xufV07XG5cbi8vIC0tIFNvdW5kIGVmZmVjdHMgYW5kIGJhY2tncm91bmQgbXVzaWNcbmV4cG9ydHMuc291bmRzID0gW3tcbiAga2V5OiAnc3VucmlzZS1mcm9tLW9yYml0JyxcbiAgdHlwZTogJ2F1ZGlvJyxcbiAgdXJsczogWydtdXNpYy9TdW5yaXNlIEZyb20gT3JiaXQgKERlbW8pLm1wMyddXG59LCB7XG4gIGtleTogJ21lbnUtdGhlbWUtdGVycmFmb3JtJyxcbiAgdHlwZTogJ2F1ZGlvJyxcbiAgdXJsczogWydtdXNpYy9UZXJyYWZvcm1pbmctQmVnaW5zX0xvb3BpbmcubXAzJ11cbn0sIHtcbiAga2V5OiAnb2ZmLWxpbWl0cycsXG4gIHR5cGU6ICdhdWRpbycsXG4gIHVybHM6IFsnbXVzaWMvU2VjdG9yLU9mZi1MaW1pdHNfTG9vcGluZy5tcDMnXVxufSwge1xuICBrZXk6ICdwdXp6bGUxJyxcbiAgdHlwZTogJ2F1ZGlvJyxcbiAgdXJsczogWydtdXNpYy9QdXp6bGUtR2FtZV9Mb29waW5nLm1wMyddXG59LCB7XG4gIGtleTogJ3B1enpsZTInLFxuICB0eXBlOiAnYXVkaW8nLFxuICB1cmxzOiBbJ211c2ljL1B1enpsZS1HYW1lLTJfTG9vcGluZy5tcDMnXVxufSwge1xuICBrZXk6ICdsb3N0anVuZ2xlJyxcbiAgdHlwZTogJ2F1ZGlvJyxcbiAgdXJsczogWydtdXNpYy9Mb3N0LUp1bmdsZV9Mb29waW5nLm1wMyddXG59LCB7XG4gIGtleTogJ2NvbGQtbW9vbicsXG4gIHR5cGU6ICdhdWRpbycsXG4gIHVybHM6IFsnbXVzaWMvQ29sZC1Nb29uLm1wMyddXG59LCB7XG4gIGtleTogJ2NvcnJlY3QtY2FyZCcsXG4gIHR5cGU6ICdhdWRpbycsXG4gIHVybHM6IFsnc291bmRmeC9wb3NpdGl2ZS9nbG93X21lZF9MX3RvX1JfMDAyLndhdiddXG59LCB7XG4gIGtleTogJ3dyb25nLWNhcmQnLFxuICB0eXBlOiAnYXVkaW8nLFxuICB1cmxzOiBbJ3NvdW5kZngvbmVnYXRpdmUvU1cwMTFfQWxhcm1zX2NvbnN0cnVjdGlvbi1raXQtZWxlbWVudF8wODEud2F2J11cbn0sIHtcbiAga2V5OiAnc2F2ZS1ub3RpZmljYXRpb24nLFxuICB0eXBlOiAnYXVkaW8nLFxuICB1cmxzOiBbJ3NvdW5kZngvU0ZYLUFSQ0FESUFfTm90aWZpY2F0aW9uMDEud2F2J11cbn0sIHtcbiAga2V5OiAnc3dpc2gtY2xvc2UnLFxuICB0eXBlOiAnYXVkaW8nLFxuICB1cmxzOiBbJ3NvdW5kZngvMTN0aC13aG9vc2gtc3dpbmctc291bmQubXAzJ11cbn0sIHtcbiAga2V5OiAnc3dpc2gtb3BlbicsXG4gIHR5cGU6ICdhdWRpbycsXG4gIHVybHM6IFsnc291bmRmeC9zd29vc2gtbWV0YWwtcm9kLXN3aW5nLXNvdW5kLW1hZGUtd2l0aC1iYW1ib28tc3RpY2subXAzJ11cbn0sIHtcbiAga2V5OiAnaW52ZW50b3J5LWFkZCcsXG4gIHR5cGU6ICdhdWRpbycsXG4gIHVybHM6IFsnc291bmRmeC9TRlgtQVJDQURJQV9FcnJvcjAzLndhdiddXG59XTtcblxuLy8gLS1sb2dpYyBiYXR0bGUgcGxhY2Vob2xkZXIgaW1hZ2VzXG5cbmV4cG9ydHMubG9naWNfYmF0dGxlID0gW3tcbiAga2V5OiAnYWxpZW4tc3RhcmUnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdiYXR0bGUvYWxpZW4tc3RhcmUucG5nJ1xufSwge1xuICBrZXk6ICdncmVlay1zcGhpbngnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdiYXR0bGUvZ3JlZWstc3BoaW54LnBuZydcbn0sIHtcbiAga2V5OiAnY3lib3JnLWZhY2UnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdiYXR0bGUvY3lib3JnLWZhY2UucG5nJ1xufSwge1xuICBrZXk6ICdjdXJseS1tYXNrJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmF0dGxlL2N1cmx5LW1hc2sucG5nJ1xufSwge1xuICBrZXk6ICdsdW5hci1tb2R1bGUnLFxuICB0eXBlOiAnaW1hZ2UnLFxuICB1cmw6ICdiYXR0bGUvbHVuYXItbW9kdWxlLnBuZydcbn0sIHtcbiAga2V5OiAnZmVuY2VyJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmF0dGxlL2ZlbmNlci5wbmcnXG59LCB7XG4gIGtleTogJ25ldy1ib3JuJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmF0dGxlL25ldy1ib3JuLnBuZydcbn0sIHtcbiAga2V5OiAnc2FpbnQtYmFzaWwtY2F0aGVkcmFsJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmF0dGxlL3NhaW50LWJhc2lsLWNhdGhlZHJhbC5wbmcnXG59LCB7XG4gIGtleTogJ2dvYmxpbi1oZWFkJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmF0dGxlL2dvYmxpbi1oZWFkLnBuZydcbn0sIHtcbiAga2V5OiAneGVub2JpbycsXG4gIHR5cGU6ICdpbWFnZScsXG4gIHVybDogJ2JhdHRsZS94ZW5vYmlvLnBuZydcbn0sIHtcbiAga2V5OiAneGVub3BzeWNoJyxcbiAgdHlwZTogJ2ltYWdlJyxcbiAgdXJsOiAnYmF0dGxlL3hlbm9wc3ljaC5wbmcnXG59LCB7XG4gIGtleTogJ3F1YXNhcmlhLWxvZ28tZmlsbCcsXG4gIHR5cGU6ICdpbWFnZSdcbn0sIHtcbiAga2V5OiAnYmF0dGxlMDEnLFxuICB0eXBlOiAnanNvbicsXG4gIHVybDogJ2JhdHRsZS9iYXR0bGUwMS5qc29uJ1xufV07XG4iLCIvKlxuICogQXJlYVRyYW5zaXRpb25cbiAqID09PT09PT09PT09PT09PVxuICpcbiAqIFVJIHdpbmRvdyBmb3IgYXJlYSB0cmFuc2l0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXJlYXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL2FyZWFzLmpzb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBBcmVhVHJhbnNpdGlvbldpbmRvdztcblxuZnVuY3Rpb24gYXJlYVRyYW5zaXRpb25CdXR0b25Ub2dnbGUoKSB7XG4gIC8vIHVucmVzcG9uc2l2ZSB3aGlsZSBhbmltYXRpbmdcbiAgaWYgKHRoaXMuX2lzVHdlZW5pbmcpXG4gICAgcmV0dXJuO1xuXG4gIHRoaXMuX2lzVHdlZW5pbmcgPSB0cnVlO1xuICB2YXIgdGltZVRvVHdlZW4gPSA1MDA7ICAvLyBtaWxsaXNlY29uZHNcblxuICAvLyBoaWRlIHBhbmVsXG4gIGlmICh0aGlzLnBhbmVsLnZpc2libGUpIHtcbiAgICB0aGlzLl9nYW1lLnNvdW5kLnBsYXkoJ3N3aXNoLWNsb3NlJyk7XG4gICAgdGhpcy5fZ2FtZS5hZGQudHdlZW4odGhpcy5wYW5lbCkudG8oXG4gICAgICAgIHt4OiAwIC0gdGhpcy5wYW5lbFdpZHRoIC0gdGhpcy5fbWVtb3J5UGFkZGluZ30sIHRpbWVUb1R3ZWVuLCBQaGFzZXIuRWFzaW5nLkV4cG9uZW50aWFsLk91dCwgdHJ1ZVxuICAgICAgKS5vbkNvbXBsZXRlLmFkZChcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRoaXMucGFuZWwudmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuX2lzVHdlZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgdGhpc1xuICAgICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBzaG93IHBhbmVsXG5cbiAgLy8gaWYgbWVtb3J5IGJhbmsgd2luZG93IGlzIG9wZW4sIGNsb3NlIGl0XG4gIGlmICh0aGlzLl9nYW1lLm1lbW9yeUJhbmtXaW5kb3cucGFuZWwudmlzaWJsZSkge1xuICAgIHRoaXMuX2dhbWUubWVtb3J5QmFua1dpbmRvdy5wYW5lbC52aXNpYmxlID0gZmFsc2U7XG4gIH1cblxuICB0aGlzLnBhbmVsLnZpc2libGUgPSB0cnVlO1xuICB0aGlzLmRpc3BsYXkoKTtcbiAgLy9lYWNoIHRpbWUgeW91IHByZXNzIHRoZSBidXR0b24gaXQgc2hvdWxkIHJlZnJlc2ggdGhlIGFyZWFzIHRoYXQgaXQgZGlzcGxheXNcblxuICB0aGlzLnBhbmVsLnggPSAwIC0gdGhpcy5wYW5lbFdpZHRoIC0gdGhpcy5fbWVtb3J5UGFkZGluZztcbiAgdGhpcy5fZ2FtZS5zb3VuZC5wbGF5KCdzd2lzaC1vcGVuJyk7XG4gIHRoaXMuX2dhbWUuYWRkLnR3ZWVuKHRoaXMucGFuZWwpLnRvKFxuICAgICAge3g6IHRoaXMuX2Jhc2VYfSwgdGltZVRvVHdlZW4sIFBoYXNlci5FYXNpbmcuRXhwb25lbnRpYWwuT3V0LCB0cnVlXG4gICAgKS5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbiAoKSB7IHRoaXMuX2lzVHdlZW5pbmcgPSBmYWxzZTsgfSwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIEFyZWFUcmFuc2l0aW9uV2luZG93KGdhbWUvKiwgLi4uYXJncyovKSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUvKiwgLi4uYXJncyovKTtcblxuICB0aGlzLl9nYW1lID0gZ2FtZTtcblxuICAvLyBwcml2YXRlIG1lbWJlcnMgc3BlY2lmeWluZyBtYXJnaW4gYW5kIHBhZGRpbmdcbiAgdGhpcy5fbWVtb3J5VGV4dE9yaWdpblggPSAxMDA7XG4gIHRoaXMuX21lbW9yeVRleHRPcmlnaW5ZID0gMTU1O1xuICB0aGlzLl9tZW1vcnlQYWRkaW5nID0gMzI7XG4gIHRoaXMuX2l0ZW1PcmlnaW5YID0gODA7XG4gIHRoaXMuX2l0ZW1PcmlnaW5ZID0gMjU7XG4gIHRoaXMuX2Jhc2VYID0gdGhpcy5fbWVtb3J5UGFkZGluZyAvIDI7XG4gIHRoaXMuX2Jhc2VZID0gdGhpcy5fbWVtb3J5UGFkZGluZyAqIDI7XG5cbiAgLy8gbWVtb3J5IGJhbmsgd2luZG93IGRpbWVuc2lvbnNcbiAgdGhpcy5wYW5lbEhlaWdodCA9IGdhbWUuaGVpZ2h0ICogMS8yIC0gdGhpcy5fbWVtb3J5UGFkZGluZyAvIDI7XG4gIHRoaXMucGFuZWxXaWR0aCA9IGdhbWUud2lkdGggLSB0aGlzLl9tZW1vcnlQYWRkaW5nO1xuICB0aGlzLl9yb3dDYXBhY2l0eSA9IDU7ICAvLyBpdGVtcyBwZXIgcm93XG4gIHRoaXMuX2l0ZW1TdGFydCA9IDA7ICAvLyBkZXRlcm1pbmVzIHdoaWNoIHJvdyB0byBzaG93XG5cbiAgLy8gd2luZG93LWRlcGVuZGVudCBwcml2YXRlIG1lbWJlciBkaW1lbnNpb25zXG4gIHRoaXMuX21lbW9yeVRleHRXaWR0aCA9IHRoaXMucGFuZWxXaWR0aCAtIDE4NTtcbiAgdGhpcy5faXRlbVBhZGRpbmcgPSB0aGlzLnBhbmVsV2lkdGggLyA1MDtcbiAgdGhpcy5fbmV4dE9yaWdpblggPSB0aGlzLnBhbmVsV2lkdGggLSA1NTtcbiAgdGhpcy5fbmV4dE9yaWdpblkgPSAwO1xuICB0aGlzLl9wcmV2T3JpZ2luWCA9IC0xODtcbiAgdGhpcy5fcHJldk9yaWdpblkgPSAwO1xuXG4gIC8qKlxuICAgKiBQYW5lbFxuICAgKi9cblxuICBnYW1lLnNsaWNrVUkuYWRkKFxuICAgIHRoaXMucGFuZWwgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9iYXNlWCwgdGhpcy5fYmFzZVksIGdhbWUubWFrZS5zcHJpdGUoMCwwLCAnbWVtb3J5LWJhbmsnKSxcbiAgICAgIHRoaXMucGFuZWxXaWR0aCwgdGhpcy5wYW5lbEhlaWdodCkpO1xuICB0aGlzLnBhbmVsLmRpc3BsYXlPYmplY3Qud2lkdGggPSB0aGlzLnBhbmVsV2lkdGg7XG4gIHRoaXMucGFuZWwuZGlzcGxheU9iamVjdC5oZWlnaHQgPSB0aGlzLnBhbmVsSGVpZ2h0O1xuXG4gIC8vIGJ5IGRlZmF1bHQsIG5vdCBkaXNwbGF5ZWRcbiAgdGhpcy5wYW5lbC52aXNpYmxlID0gZmFsc2U7XG4gIHRoaXMucGFuZWwuYWxwaGEgPSAwLjg7XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBidXR0b25cbiAgICovXG4gIC8vIHVudGlsIHlvdSBjbGljayBvbiB0aGUgdG9nZ2xlIGJ1dHRvblxuICBnYW1lLnNsaWNrVUkuYWRkKFxuICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KFxuICAgICAgdGhpcy5fbWVtb3J5UGFkZGluZyx0aGlzLl9tZW1vcnlQYWRkaW5nLCBnYW1lLm1ha2UuYnV0dG9uKDAsMCwgJ2J1dHRvbicpKSk7XG4gIC8vIHNldCBzY2FsZSBzdWNoIHRoYXQgd2lkdGggPSAxLzggcGFuZWwgd2lkdGhcbiAgdGhpcy50b2dnbGVCdXR0b24uZGlzcGxheU9iamVjdC5zY2FsZS5zZXRUbyhcbiAgICAodGhpcy5wYW5lbFdpZHRoIC8gOCkgLyB0aGlzLnRvZ2dsZUJ1dHRvbi5kaXNwbGF5T2JqZWN0LndpZHRoKTtcbiAgLy90aGlzLnRvZ2dsZUJ1dHRvbi54ID0gZ2FtZS53aWR0aCAtIHRoaXMuX21lbW9yeVBhZGRpbmcgLSB0aGlzLnRvZ2dsZUJ1dHRvbi5kaXNwbGF5T2JqZWN0LndpZHRoO1xuICAvLyBzaG93IHBhbmVsIGNhbGxiYWNrXG4gIHRoaXMudG9nZ2xlQnV0dG9uLmV2ZW50cy5vbklucHV0RG93bi5hZGQoYXJlYVRyYW5zaXRpb25CdXR0b25Ub2dnbGUsIHRoaXMpO1xuICB0aGlzLnRvZ2dsZUJ1dHRvbi5hbHBoYSA9IDAuOTtcblxuICB2YXIgdG9nZ2xlU3R5bGUgPSB7IGZvbnQ6ICcxNHB4IEdvdWR5IEJvb2tsZXR0ZXIgMTkxMScsIGZpbGw6ICcjNDhmMmZmJywgYm91bmRzQWxpZ25IOiAnY2VudGVyJywgYm91bmRzQWxpZ25WOiAnbWlkZGxlJ307XG4gIHRoaXMudG9nZ2xlQnV0dG9uLmFkZChcbiAgICB0aGlzLnRvZ2dsZVRleHQgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoMCwgMCwgZ2FtZS5tYWtlLnRleHQoMCwgMCwgJ0FSRUFTJywgdG9nZ2xlU3R5bGUpKSk7XG4gIHRoaXMudG9nZ2xlVGV4dC5kaXNwbGF5T2JqZWN0LnNldFRleHRCb3VuZHMoMCwgdGhpcy50b2FzdFRleHRZLCB0aGlzLnRvZ2dsZUJ1dHRvbi5kaXNwbGF5T2JqZWN0LndpZHRoLCB0aGlzLnRvZ2dsZUJ1dHRvbi5kaXNwbGF5T2JqZWN0LmhlaWdodCk7XG5cbiAgLyoqXG4gICAqIFRleHQgLSBuYW1lIGFuZCBkZXNjcmlwdGlvblxuICAgKi9cbiAgdmFyIG5hbWVUZXh0U3R5bGUgPSB7IGZvbnQ6ICcxNHB4IEdvdWR5IEJvb2tsZXR0ZXIgMTkxMScsIGZpbGw6ICcjNDhmMmZmJywgd29yZFdyYXA6IHRydWUsIHdvcmRXcmFwV2lkdGg6IHRoaXMuX21lbW9yeVRleHRXaWR0aCwgZm9udFdlaWdodDogJ2JvbGQnLCBib3VuZHNBbGlnbkg6ICdjZW50ZXInIH07XG4gIHRoaXMucGFuZWwuYWRkKFxuICAgIHRoaXMubmFtZVRleHQgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9tZW1vcnlUZXh0T3JpZ2luWCxcbiAgICAgIHRoaXMuX21lbW9yeVRleHRPcmlnaW5ZLFxuICAgICAgZ2FtZS5tYWtlLnRleHQoMCwwLCAnJywgbmFtZVRleHRTdHlsZSksIHRoaXMuX21lbW9yeVRleHRXaWR0aCkpO1xuICAvLyBmb3IgYWxpZ25tZW50IHB1cnBvc2VzXG4gIHZhciBuYW1lVGV4dEhlaWdodCA9IHRoaXMubmFtZVRleHQuZGlzcGxheU9iamVjdC5nZXRCb3VuZHMoKS5oZWlnaHQ7XG4gIHRoaXMubmFtZVRleHQuZGlzcGxheU9iamVjdC5zZXRUZXh0Qm91bmRzKDAsMCwgdGhpcy5fbWVtb3J5VGV4dFdpZHRoLCBuYW1lVGV4dEhlaWdodCk7XG5cbiAgdmFyIGRlc2NUZXh0U3R5bGUgPSB7IGZvbnQ6ICcxNHB4IE9wZW4gU2FucycsIGZpbGw6ICcjNDhmMmZmJywgd29yZFdyYXA6IHRydWUsIHdvcmRXcmFwV2lkdGg6IHRoaXMuX21lbW9yeVRleHRXaWR0aCwgYWxpZ246ICdsZWZ0JyB9O1xuICB0aGlzLnBhbmVsLmFkZChcbiAgICB0aGlzLmRlc2NUZXh0ID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KFxuICAgICAgdGhpcy5fbWVtb3J5VGV4dE9yaWdpblgsXG4gICAgICB0aGlzLl9tZW1vcnlUZXh0T3JpZ2luWSArIG5hbWVUZXh0SGVpZ2h0LFxuICAgICAgZ2FtZS5tYWtlLnRleHQoMCwwLCAnJywgZGVzY1RleHRTdHlsZSksIHRoaXMuX21lbW9yeVRleHRXaWR0aCkpO1xuXG4gIC8qKlxuICAgKiBCb29ra2VlcGluZ1xuICAgKi9cbiAgLy8gYXJlIHdlIGN1cnJlbnRseSBhbmltYXRpbmc/XG4gIHRoaXMuX2lzVHdlZW5pbmcgPSBmYWxzZTtcbiAgdGhpcy5faXRlbURpc3BsYXlPYmplY3RzID0gW107IC8vIGZvciBkZWxldGlvbiBwdXJwb3Nlc1xuICB0aGlzLl9uYXZCdXR0b25zID0gW107XG4gIHRoaXMuYXJlYXNUb1Nob3cgPSBPYmplY3Qua2V5cyhhcmVhcykuZmlsdGVyKGZ1bmN0aW9uKGFyZWEpIHtcbiAgICByZXR1cm4gYXJlYXNbYXJlYV1bJ25hdmlnYWJsZSddID09IHRydWU7XG4gIH0pO1xufVxuXG5BcmVhVHJhbnNpdGlvbldpbmRvdy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5Hcm91cC5wcm90b3R5cGUpO1xuQXJlYVRyYW5zaXRpb25XaW5kb3cucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQXJlYVRyYW5zaXRpb25XaW5kb3c7XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb25zOiBpbnN0YW50bHkgaGlkZSBvciBzaG93IHBhbmVsL1VJXG5BcmVhVHJhbnNpdGlvbldpbmRvdy5wcm90b3R5cGUuaGlkZVBhbmVsID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnBhbmVsLnZpc2libGUgPSBmYWxzZTtcbiAgdGhpcy5wYW5lbC54ID0gMCAtIHRoaXMucGFuZWxXaWR0aCAtIHRoaXMuX21lbW9yeVBhZGRpbmc7XG59O1xuXG5BcmVhVHJhbnNpdGlvbldpbmRvdy5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5oaWRlUGFuZWwoKTtcbiAgdGhpcy50b2dnbGVCdXR0b24udmlzaWJsZSA9IGZhbHNlO1xuICB0aGlzLnRvZ2dsZUJ1dHRvbi5pbnB1dEVuYWJsZWQgPSBmYWxzZTtcbn07XG5cbkFyZWFUcmFuc2l0aW9uV2luZG93LnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuaGlkZVBhbmVsKCk7XG4gIHRoaXMudG9nZ2xlQnV0dG9uLnZpc2libGUgPSB0cnVlO1xuICB0aGlzLnRvZ2dsZUJ1dHRvbi5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAvL25vdCBzdXJlIHRoYXQgdGhpcyB3aWxsIHJlLWFkZCBsaXN0ZW5lcnNcbn07XG5cbkFyZWFUcmFuc2l0aW9uV2luZG93LnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNsZWFuV2luZG93KCk7XG4gIHRoaXMuZGlzcGxheUFyZWFzKCk7XG4gIHRoaXMuc2hvd05hdkJ1dHRvbnMoKTtcbn07XG5cbkFyZWFUcmFuc2l0aW9uV2luZG93LnByb3RvdHlwZS5jbGVhbldpbmRvdyA9IGZ1bmN0aW9uICgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9pdGVtRGlzcGxheU9iamVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHRoaXMuX2l0ZW1EaXNwbGF5T2JqZWN0c1tpXTtcbiAgICBpdGVtLmNvbnRhaW5lci5kaXNwbGF5R3JvdXAucmVtb3ZlQWxsKHRydWUpO1xuICAgIGl0ZW0uY29udGFpbmVyLmRpc3BsYXlHcm91cC5kZXN0cm95KCk7XG4gIH1cbiAgZm9yIChpID0gMDsgaSA8IHRoaXMuX25hdkJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbmF2QnV0dG9uID0gdGhpcy5fbmF2QnV0dG9uc1tpXTtcbiAgICBuYXZCdXR0b24uY29udGFpbmVyLmRpc3BsYXlHcm91cC5yZW1vdmVBbGwodHJ1ZSk7XG4gICAgbmF2QnV0dG9uLmNvbnRhaW5lci5kaXNwbGF5R3JvdXAuZGVzdHJveSgpO1xuICB9XG4gIHRoaXMuX2l0ZW1EaXNwbGF5T2JqZWN0cyA9IFtdO1xuICB0aGlzLl9uYXZCdXR0b25zID0gW107XG59O1xuXG5BcmVhVHJhbnNpdGlvbldpbmRvdy5wcm90b3R5cGUuZGlzcGxheUFyZWFzID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmFyZWFzVG9TaG93ID0gT2JqZWN0LmtleXMoYXJlYXMpLmZpbHRlcihmdW5jdGlvbihhcmVhKSB7XG4gICAgbGV0IHNlZW4gPSB0aGlzLl9nYW1lLnBsYXllci5zZWVuQXJlYXMuaW5jbHVkZXMoYXJlYSk7XG4gICAgLy90aGlzIGZpbHRlciB3aWxsIGFkZCByb29tcyBzZWVuIGluIHRoZSBwYXN0IHRoYXQgc2hvdWxkIGJlIGF2YWxpYWJsZSBpbiB0aGUgd2luZG93XG4gICAgcmV0dXJuIGFyZWFzW2FyZWFdWyduYXZpZ2FibGUnXSA9PSB0cnVlICYmIHRoaXMuX2dhbWUucm9vbS5uYW1lICE9IGFyZWEgJiYgc2VlbjtcbiAgfSwgdGhpcyk7XG4gIC8vdGhpcyBpcyBnb2luZyB0byBsZWF2ZSB0aGluZ3Mgb3V0LCBvciBoYXZlIGN5Y2xlc1xuICAvLyB3ZSB3aWxsIGhhdmUgdG8gdGhpbmsgY2FyZWZ1bGx5IHdoZW4gYWRkaW5nIHRoaXMgaW5mb3JtYXRpb24gdG8gdGhlIGpzb25cbiAgLy8gZG8gd2Ugd2FudCBhIGdpdmVuIHJvb20gdG8gb25seSBhcHBlYXIgaWYgc2VlbiBvciBkbyB3ZSB3YW50IHRvIGhhdmUgYSBncm91cCBvZlxuICAvLyByb29tcyBhbGwgbmF2aWdhYmxlIGZyb20gb25lIGFub3RoZXI/XG4gIC8vIGllIGhhbmdlciBtdXN0IGJlIHJlYWNoZWQgZmlyc3QsIGJ1dCBvbmNlIHRoZXJlIHlvdSBoYXZlIGltbWVkaWF0ZSBhY2Nlc3MgdG8gdGFsdmluZVxuICBmb3IgKGxldCBhcmVhIG9mIHRoaXMuX2dhbWUucm9vbS5hcmVhLmFyZWFBY2Nlc3Mpe1xuICAgIGlmICghdGhpcy5hcmVhc1RvU2hvdy5pbmNsdWRlcyhhcmVhKSl7XG4gICAgICB0aGlzLmFyZWFzVG9TaG93LnB1c2goYXJlYSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGl0ZW1FbmQgPSB0aGlzLl9pdGVtU3RhcnQgKyB0aGlzLl9yb3dDYXBhY2l0eSA8IHRoaXMuYXJlYXNUb1Nob3cubGVuZ3RoXG4gICAgPyB0aGlzLl9pdGVtU3RhcnQgKyB0aGlzLl9yb3dDYXBhY2l0eVxuICAgIDogdGhpcy5hcmVhc1RvU2hvdy5sZW5ndGg7XG5cbiAgZm9yICh2YXIgaSA9IHRoaXMuX2l0ZW1TdGFydDsgaSA8IGl0ZW1FbmQ7IGkrKykge1xuICAgIHZhciBpdGVtSWQgPSB0aGlzLmFyZWFzVG9TaG93W2ldO1xuXG4gICAgLy8gc2NhbGVkIHdpZHRoID0gMS83IHBhbmVsIHdpZHRoO1xuICAgIHZhciBkZXNpcmVkV2lkdGggPSAodGhpcy5wYW5lbFdpZHRoIC8gNyk7XG4gICAgdmFyIGFzc2V0U3ByaXRlID0gdGhpcy5fZ2FtZS5tYWtlLnNwcml0ZSgwLDAsIGl0ZW1JZCk7XG4gICAgYXNzZXRTcHJpdGUuc2NhbGUuc2V0VG8oZGVzaXJlZFdpZHRoIC8gYXNzZXRTcHJpdGUud2lkdGgpO1xuXG4gICAgdmFyIG1hc2tTcHJpdGUgPSB0aGlzLl9nYW1lLm1ha2Uuc3ByaXRlKDAsMCwgJ21lbW9yeS1iYW5rLWljb24tbWFzaycpO1xuICAgIG1hc2tTcHJpdGUuc2NhbGUuc2V0VG8oZGVzaXJlZFdpZHRoIC8gbWFza1Nwcml0ZS53aWR0aCk7XG5cbiAgICB2YXIgbWFza2VkQm1kID0gdGhpcy5fZ2FtZS5tYWtlLmJpdG1hcERhdGEobWFza1Nwcml0ZS53aWR0aCwgbWFza1Nwcml0ZS5oZWlnaHQpO1xuICAgIG1hc2tlZEJtZC5hbHBoYU1hc2soYXNzZXRTcHJpdGUsIG1hc2tTcHJpdGUpO1xuXG4gICAgdmFyIGl0ZW1TcHJpdGUgPSB0aGlzLl9nYW1lLm1ha2Uuc3ByaXRlKDAsMCwgbWFza2VkQm1kKTtcbiAgICB2YXIgc2xpY2tJdGVtO1xuICAgIHRoaXMucGFuZWwuYWRkKHNsaWNrSXRlbSA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICAgIHRoaXMuX2l0ZW1PcmlnaW5YICsgKGkgLSB0aGlzLl9pdGVtU3RhcnQpKih0aGlzLl9pdGVtUGFkZGluZyArIGl0ZW1TcHJpdGUud2lkdGgpLCB0aGlzLl9pdGVtT3JpZ2luWSxcbiAgICAgIGl0ZW1TcHJpdGUpKTtcblxuICAgIHZhciBib3JkZXJTcHJpdGUgPSB0aGlzLl9nYW1lLm1ha2Uuc3ByaXRlKDAsMCwgJ21lbW9yeS1iYW5rLWljb24nKTtcbiAgICBib3JkZXJTcHJpdGUuc2NhbGUuc2V0VG8oZGVzaXJlZFdpZHRoIC8gYm9yZGVyU3ByaXRlLndpZHRoKTtcbiAgICB2YXIgc2xpY2tCb3JkZXI7XG4gICAgdGhpcy5wYW5lbC5hZGQoc2xpY2tCb3JkZXIgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9pdGVtT3JpZ2luWCArIChpIC0gdGhpcy5faXRlbVN0YXJ0KSoodGhpcy5faXRlbVBhZGRpbmcgKyBpdGVtU3ByaXRlLndpZHRoKSwgdGhpcy5faXRlbU9yaWdpblksXG4gICAgICBib3JkZXJTcHJpdGUpKTtcblxuICAgIGl0ZW1TcHJpdGUuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgICBpdGVtU3ByaXRlLmlucHV0LnVzZUhhbmRDdXJzb3IgPSB0cnVlO1xuICAgIGl0ZW1TcHJpdGUuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm5hbWVUZXh0LmRpc3BsYXlPYmplY3QudGV4dCA9IGFyZWFzW3RoaXMuaXRlbUlkXVsnbmFtZSddLnRvVXBwZXJDYXNlKCk7XG4gICAgfSwge25hbWVUZXh0OiB0aGlzLm5hbWVUZXh0LCBpdGVtSWQ6IGl0ZW1JZH0pO1xuICAgIGl0ZW1TcHJpdGUuZXZlbnRzLm9uSW5wdXRVcC5hZGQoZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmdhbWUucm9vbS5sb2FkQXJlYSh0aGlzLml0ZW1JZCk7XG4gICAgfSwge2dhbWU6IHRoaXMuX2dhbWUsIGl0ZW1JZDogaXRlbUlkfSk7XG4gICAgaXRlbVNwcml0ZS5ldmVudHMub25JbnB1dFVwLmFkZChhcmVhVHJhbnNpdGlvbkJ1dHRvblRvZ2dsZSwgdGhpcyk7XG5cbiAgICB0aGlzLl9pdGVtRGlzcGxheU9iamVjdHMucHVzaChzbGlja0l0ZW0pO1xuICAgIHRoaXMuX2l0ZW1EaXNwbGF5T2JqZWN0cy5wdXNoKHNsaWNrQm9yZGVyKTtcbiAgfVxufTtcblxuQXJlYVRyYW5zaXRpb25XaW5kb3cucHJvdG90eXBlLnNob3dOYXZCdXR0b25zID0gZnVuY3Rpb24gKCkge1xuXG4gIC8vIG5leHQgYnV0dG9uc1xuICBpZiAodGhpcy5faXRlbVN0YXJ0ICsgdGhpcy5fcm93Q2FwYWNpdHkgPCB0aGlzLmFyZWFzVG9TaG93Lmxlbmd0aCkge1xuICAgIHZhciBuZXh0QnV0dG9uID0gdGhpcy5fZ2FtZS5tYWtlLmJ1dHRvbigwLDAsJ21lbW9yeS1iYW5rLW5leHQnKTtcbiAgICB2YXIgc2xpY2tOZXh0O1xuICAgIHRoaXMucGFuZWwuYWRkKHNsaWNrTmV4dCA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICAgIHRoaXMuX25leHRPcmlnaW5YLCB0aGlzLl9uZXh0T3JpZ2luWSwgbmV4dEJ1dHRvbikpO1xuICAgIC8vIHNjYWxlZCBieSBoZWlnaHQsIGVxdWFsIHRvIHBhbmVsIGhlaWdodFxuICAgIG5leHRCdXR0b24uc2NhbGUuc2V0VG8odGhpcy5wYW5lbEhlaWdodCAvIG5leHRCdXR0b24uaGVpZ2h0KTtcbiAgICB0aGlzLl9uYXZCdXR0b25zLnB1c2goc2xpY2tOZXh0KTtcblxuICAgIG5leHRCdXR0b24uZXZlbnRzLm9uSW5wdXRVcC5hZGQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zd2l0Y2hSb3codHJ1ZSk7XG4gICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICB9LCB0aGlzKTtcblxuICB9XG5cbiAgLy8gcHJldiBidXR0b25zXG4gIGlmICh0aGlzLl9pdGVtU3RhcnQgPiAwKSB7XG4gICAgdmFyIHByZXZCdXR0b24gPSB0aGlzLl9nYW1lLm1ha2UuYnV0dG9uKDAsMCwnbWVtb3J5LWJhbmstbmV4dCcpO1xuICAgIC8vIHJvdGF0ZSBzcHJpdGVcbiAgICBwcmV2QnV0dG9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gICAgcHJldkJ1dHRvbi5zY2FsZS55ICo9IC0xO1xuICAgIHByZXZCdXR0b24uYW5jaG9yLnNldFRvKDEsMSk7XG5cbiAgICB2YXIgc2xpY2tQcmV2O1xuICAgIHRoaXMucGFuZWwuYWRkKHNsaWNrUHJldiA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICAgIHRoaXMuX3ByZXZPcmlnaW5YLCB0aGlzLl9wcmV2T3JpZ2luWSxcbiAgICAgIHByZXZCdXR0b24pKTtcbiAgICB0aGlzLl9uYXZCdXR0b25zLnB1c2goc2xpY2tQcmV2KTtcblxuICAgIHByZXZCdXR0b24uc2NhbGUuc2V0VG8odGhpcy5wYW5lbEhlaWdodCAvIHByZXZCdXR0b24uaGVpZ2h0KTtcblxuICAgIHByZXZCdXR0b24uZXZlbnRzLm9uSW5wdXRVcC5hZGQoZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5zd2l0Y2hSb3coZmFsc2UpO1xuICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfSwgdGhpcyk7XG5cbiAgfVxufTtcblxuQXJlYVRyYW5zaXRpb25XaW5kb3cucHJvdG90eXBlLnN3aXRjaFJvdyA9IGZ1bmN0aW9uICh3YW50c05leHRSb3cpIHtcbiAgaWYgKHdhbnRzTmV4dFJvdyAmJiB0aGlzLl9pdGVtU3RhcnQgKyB0aGlzLl9yb3dDYXBhY2l0eSA8IHRoaXMuYXJlYXNUb1Nob3cubGVuZ3RoKSB7XG4gICAgdGhpcy5faXRlbVN0YXJ0ICs9IHRoaXMuX3Jvd0NhcGFjaXR5O1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoIXdhbnRzTmV4dFJvdyAmJiB0aGlzLl9pdGVtU3RhcnQgLSB0aGlzLl9yb3dDYXBhY2l0eSA+PSAwKSB7XG4gICAgdGhpcy5faXRlbVN0YXJ0IC09IHRoaXMuX3Jvd0NhcGFjaXR5O1xuICAgIHJldHVybjtcbiAgfVxufTtcblxuQXJlYVRyYW5zaXRpb25XaW5kb3cucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gVE9ETzogU3R1Yi5cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxuZnVuY3Rpb24gQXJndW1lbnQoZ2FtZSwgeCwgeSwgYXNzZXROYW1lLCBtYXRjaCkge1xuICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgYXNzZXROYW1lKTtcbiAgdGhpcy5hc3NldE5hbWUgPSBhc3NldE5hbWU7XG4gIHRoaXMuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgdGhpcy5pbnB1dC51c2VIYW5kQ3Vyc29yID0gdHJ1ZTtcbiAgdGhpcy5rZXkgPSBtYXRjaDtcbn1cblxuQXJndW1lbnQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5tb2R1bGUuZXhwb3J0cyA9IEFyZ3VtZW50LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFyZ3VtZW50O1xuIiwiLypcbiAqIEFyZ3VtZW50TWFuYWdlclxuICogPT09PT09PT09PT09PT09XG4gKlxuICogRXh0ZW5zaW9uIG9mIENvbnZlcnNhdGlvbk1hbmFnZXIgZm9yIExvZ2ljIEJhdHRsZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBDb252ZXJzYXRpb25NYW5hZ2VyID0gcmVxdWlyZSgnLi9Db252ZXJzYXRpb25NYW5hZ2VyJyk7XG52YXIgbnBjcyA9IHJlcXVpcmUoJy4uLy4uL3N0YXRpYy9hc3NldHMvbnBjcy5qc29uJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gQXJndW1lbnRNYW5hZ2VyO1xuXG5mdW5jdGlvbiBBcmd1bWVudE1hbmFnZXIoZ2FtZSwgY3VzdG9tQWN0aW9ucy8qLCAuLi5hcmdzKi8pIHtcbiAgLy8gVE9ETzpcbiAgLy8gICAxLiBFZGl0IGNvbnN0cnVjdG9yIHBhcmFtZXRlcnMgYWNjb3JkaW5nbHkuXG4gIC8vICAgMi4gQWRqdXN0IG9iamVjdCBwcm9wZXJ0aWVzLlxuXG4gIENvbnZlcnNhdGlvbk1hbmFnZXIuY2FsbCh0aGlzLCBnYW1lLCBjdXN0b21BY3Rpb25zKTtcbiAgdGhpcy5hcmdJZHggPSAwO1xuICB0aGlzLndhbnRzQXJndW1lbnRUZXh0ID0gZmFsc2U7XG4gIHRoaXMuYXJnVGV4dFR5cGUgPSAnaW5jb3JyZWN0JztcblxuICB0aGlzLmludGVybHVkZUNvbXBsZXRlU2lnbmFsID0gbmV3IFBoYXNlci5TaWduYWwoKTtcblxufVxuQXJndW1lbnRNYW5hZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoQ29udmVyc2F0aW9uTWFuYWdlci5wcm90b3R5cGUpO1xuQXJndW1lbnRNYW5hZ2VyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEFyZ3VtZW50TWFuYWdlcjtcblxuQXJndW1lbnRNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRPRE86IFN0dWIuXG59O1xuXG4vKiogQkVHSU4gT1ZFUlJJREUgRlVOQ1RJT05TICovXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLmdldFJlc3BvbnNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMud2FudHNBcmd1bWVudFRleHQpXG4gICAgcmV0dXJuIFt7ICd0YXJnZXQnOiB0aGlzLmFyZ0lkeCsxLCAndGV4dCc6ICdOZXh0JyB9XTtcbiAgZWxzZSBpZiAoJ3Jlc3BvbnNlcycgaW4gdGhpcy5jb252ZXJzYXRpb25bdGhpcy5pZHhdKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVsncmVzcG9uc2VzJ107XG4gIH1cbiAgcmV0dXJuW107XG59O1xuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLmFkdmFuY2VUb1RhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZHgpIHtcbiAgaWYgKHRoaXMud2FudHNBcmd1bWVudFRleHQpIHtcbiAgICBpZiAodGFyZ2V0SWR4IGluIHRoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVt0aGlzLmFyZ1RleHRUeXBlXSkge1xuICAgICAgdGhpcy5hcmdJZHggPSB0YXJnZXRJZHg7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLmVuZEFyZ0ludGVybHVkZSgpO1xuICAgIHJldHVybiBmYWxzZTsgLy8gZG8gTk9UIHJlZnJlc2ggZGlzcGxheSBvbiBlbmQgb2YgYXJndW1lbnQgaW50ZXJsdWRlXG4gIH1cbiAgdGhpcy5pZHggPSB0YXJnZXRJZHg7XG4gIHJldHVybiB0cnVlO1xufTtcblxuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLmVuZENvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmN1c3RvbUFjdGlvbnMuY3VzdG9tQWN0aW9uKHRoaXMuY29udmVyc2F0aW9uWydvbkVuZCddKTsgIFxufTtcblxuQXJndW1lbnRNYW5hZ2VyLnByb3RvdHlwZS5nZXRBdmF0YXIgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiAnaW52aXNpYmxlJztcbn07XG5cbkFyZ3VtZW50TWFuYWdlci5wcm90b3R5cGUudGFrZUFjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKiBzdHViICovXG59O1xuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLmdldEN1cnJlbnRUZXh0ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5jb252ZXJzYXRpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cblxuICBpZiAodGhpcy53YW50c0FyZ3VtZW50VGV4dCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZlcnNhdGlvblt0aGlzLmlkeF1bdGhpcy5hcmdUZXh0VHlwZV1bdGhpcy5hcmdJZHhdWyd0ZXh0J107XG4gIH1cblxuICByZXR1cm4gdGhpcy5jb252ZXJzYXRpb25bdGhpcy5pZHhdWyd0ZXh0J107XG59O1xuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLmdldFNwZWFrZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmNvbnZlcnNhdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIGlmICh0aGlzLndhbnRzQXJndW1lbnRUZXh0KSB7XG4gICAgcmV0dXJuIHRoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVt0aGlzLmFyZ1RleHRUeXBlXVt0aGlzLmFyZ0lkeF1bJ3NwZWFrZXInXTtcbiAgfVxuXG4gIHJldHVybiBucGNzW3RoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVsnc3BlYWtlciddXVsnbmFtZSddOyBcbn07XG4vKiogRU5EIE9WRVJSSURFIEZVTkNUSU9OUyAqL1xuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLnN0YXJ0QXJnSW50ZXJsdWRlID0gZnVuY3Rpb24gKHRleHRUeXBlKSB7XG4gIHRoaXMuYXJnSWR4ID0gMDtcbiAgdGhpcy53YW50c0FyZ3VtZW50VGV4dCA9IHRydWU7XG4gIHRoaXMuYXJnVGV4dFR5cGUgPSB0ZXh0VHlwZSA/ICdjb3JyZWN0JyA6ICdpbmNvcnJlY3QnO1xufTtcblxuQXJndW1lbnRNYW5hZ2VyLnByb3RvdHlwZS5lbmRBcmdJbnRlcmx1ZGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYXJnSWR4ID0gMDtcbiAgdGhpcy53YW50c0FyZ3VtZW50VGV4dCA9IGZhbHNlO1xuICB0aGlzLmludGVybHVkZUNvbXBsZXRlU2lnbmFsLmRpc3BhdGNoKCk7XG59O1xuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLmdldEN1cnJlbnRDb3VudGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVsnY291bnRlcnMnXTtcbn07XG5cbkFyZ3VtZW50TWFuYWdlci5wcm90b3R5cGUuZ2V0QWxsQXJndW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAvLyByZXR1cm5zIGFzIGFuIGFycmF5XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgT2JqZWN0LmtleXModGhpcy5jb252ZXJzYXRpb24pLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGlmICh0aGlzLmNvbnZlcnNhdGlvbltpXVsnY291bnRlcnMnXS5sZW5ndGggPiAwKSB7XG4gICAgICBhcmdzLnB1c2godGhpcy5jb252ZXJzYXRpb25baV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXJncztcbn07XG5cbkFyZ3VtZW50TWFuYWdlci5wcm90b3R5cGUuc2V0QXJndW1lbnRCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jb252ZXJzYXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodGhpcy5jb252ZXJzYXRpb25baV1bJ2lkJ10gPT09IGlkKSB7XG4gICAgICB0aGlzLmlkeCA9IGk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59O1xuXG5Bcmd1bWVudE1hbmFnZXIucHJvdG90eXBlLnRha2VBY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gIGlmICgnYWN0aW9ucycgaW4gdGhpcy5jb252ZXJzYXRpb25bdGhpcy5pZHhdKSB7XG4gICAgZm9yICh2YXIgYWN0aW9uIGluIHRoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVsnYWN0aW9ucyddKSB7XG4gICAgICBDb252ZXJzYXRpb25NYW5hZ2VyLnByb3RvdHlwZS50YWtlQWN0aW9uLmNhbGwodGhpcywgdGhpcy5fZ2FtZSwgYWN0aW9uLCB0aGlzLmNvbnZlcnNhdGlvblt0aGlzLmlkeF1bJ2FjdGlvbnMnXVthY3Rpb25dKTtcbiAgICB9XG4gIH1cbn07IiwiLypcbiAqIEJhdHRsZVVpXG4gKiA9PT09PT09PVxuICpcbiAqIFVzZXIgaW50ZXJmYWNlIGZvciBMb2dpYyBCYXR0bGUgbWVjaGFuaWNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gQmF0dGxlVWk7XG5cbnZhciBIZWFsdGhCYXIgPSByZXF1aXJlKCcuL0hlYWx0aEJhci5qcycpO1xudmFyIEljb24gPSByZXF1aXJlKCcuL0ljb24nKTtcbnZhciBpdGVtcyA9IHJlcXVpcmUoJy4uLy4uL3N0YXRpYy9hc3NldHMvaXRlbXMuanNvbicpO1xudmFyIHRleHRzdHlsZXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL3RleHRzdHlsZXMuanNvbicpO1xuXG5mdW5jdGlvbiBCYXR0bGVVaShnYW1lLCBwbGF5ZXJEZWNrLCBlbmVteURlY2svKiwgLi4uYXJncyovKSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUvKiwgLi4uYXJncyovKTtcblxuICAvLyAtIHRoaXMuY2FyZFNpZ25hbFxuICAvLyAtIHRoaXMuY2FyZEFuaW1Db21wbGV0ZVNpZ25hbFxuICAvLyAtIHRoaXMuYXJnQW5pbUNvbXBsZXRlU2lnbmFsXG4gIC8vIC0gdGhpcy5wbGF5ZXJEZWNrSWNvbnNcbiAgLy8gLSB0aGlzLmVuZW15RGVja0ljb25zXG4gIC8vIC0gdGhpcy5jcmVkQmFyXG5cbiAgLyoqIFNpZ25hbHMgKi9cbiAgdGhpcy5jYXJkU2lnbmFsID0gbmV3IFBoYXNlci5TaWduYWwoKTtcbiAgdGhpcy5jYXJkQW5pbUNvbXBsZXRlU2lnbmFsID0gbmV3IFBoYXNlci5TaWduYWwoKTtcbiAgdGhpcy5hcmdBbmltQ29tcGxldGVTaWduYWwgPSBuZXcgUGhhc2VyLlNpZ25hbCgpO1xuXG4gIHRoaXMucGxheWVyRGVja0ljb25zID0gW107XG4gIHRoaXMuZW5lbXlEZWNrSWNvbnMgPSBbXTtcblxuICAvKiogUHJpdmF0ZSBwcm9wZXJ0aWVzICovXG4gIHRoaXMuX2dhbWUgPSBnYW1lO1xuICB0aGlzLl9wb3J0cmFpdFNpemUgPSAxMDA7XG4gIHRoaXMuX2NhcmRTaXplID0gNzA7XG4gIHRoaXMuX2NyZWRTaXplID0gODU7XG4gIHRoaXMuX2VuZW15T3JpZ2luWSA9IGdhbWUuaGVpZ2h0ICogMC4zO1xuICB0aGlzLl9jZW50ZXJYID0gZ2FtZS53aWR0aCAvIDI7XG4gIHRoaXMuX2FyZ3VtZW50UmFkaXVzID0gdGhpcy5fcG9ydHJhaXRTaXplO1xuXG4gIC8qKiBCYWNrZ3JvdW5kICsgb3ZlcmxheSAodGhpcy5fYmFja2dyb3VuZCwgdGhpcy5fb3ZlcmxheSkgKi9cbiAgdmFyIHJvb21CZyA9IGdhbWUubWFrZS5zcHJpdGUoMCwwLCBnYW1lLnJvb20uYXJlYS5pZCk7XG4gIGdhbWUuYWRkLmV4aXN0aW5nKHJvb21CZyk7XG5cbiAgdGhpcy5fYmFja2dyb3VuZCA9IGdhbWUuYWRkLnNwcml0ZSgwLDAsJ2JhdHRsZS1iYWNrZ3JvdW5kJyk7XG4gIHRoaXMuX2JhY2tncm91bmQud2lkdGggPSBnYW1lLndpZHRoO1xuICB0aGlzLl9iYWNrZ3JvdW5kLmhlaWdodCA9IGdhbWUuaGVpZ2h0O1xuICB0aGlzLl9iYWNrZ3JvdW5kLmFscGhhID0gMC44NTtcbiAgdGhpcy5fYmFja2dyb3VuZC50aW50ID0gMHgzMzM0M2E7XG5cbiAgdGhpcy5fb3ZlcmxheSA9IGdhbWUuYWRkLnNwcml0ZSgwLDAsJ2JhdHRsZS1vdmVybGF5Jyk7XG4gIHRoaXMuX292ZXJsYXkud2lkdGggPSBnYW1lLndpZHRoO1xuICB0aGlzLl9vdmVybGF5LmhlaWdodCA9IGdhbWUuaGVpZ2h0O1xuXG4gIC8qKiBFbmVteSBkaXNwbGF5ICovXG4gIHZhciBlbmVteUJhckNvbmZpZyA9IHt4OiB0aGlzLl9jZW50ZXJYLCB5OiA1MCwgaGVpZ2h0OjIwLCB3aWR0aDoxNTAsIGZsaXBwZWQ6dHJ1ZX07XG4gIHRoaXMucGVyc3VhZGVCYXIgPSBuZXcgSGVhbHRoQmFyKGdhbWUsIGVuZW15QmFyQ29uZmlnKTtcbiAgdmFyIGVuZW15SWNvbiA9IGdhbWUuYWRkLmV4aXN0aW5nKG5ldyBJY29uKGdhbWUsXG4gICAgdGhpcy5fY2VudGVyWCAtIHRoaXMuX3BvcnRyYWl0U2l6ZS8yLCB0aGlzLl9lbmVteU9yaWdpblkgLSB0aGlzLl9wb3J0cmFpdFNpemUvMixcbiAgICAnZ2xlYW1pbmctc2hvYWwtcG9ydHJhaXQnLCBudWxsLCBudWxsLCB0aGlzLl9wb3J0cmFpdFNpemUpKTtcbiAgZW5lbXlJY29uLmFscGhhID0gMTtcblxuICAvKiogRW5lbXkgZGVjayBkaXNwbGF5ICovXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZW5lbXlEZWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGFyZ0ljb24gPSBnYW1lLmFkZC5leGlzdGluZyhuZXcgSWNvbihnYW1lLCAwLDAsXG4gICAgICBlbmVteURlY2tbaV0uYXNzZXROYW1lLCAnbWVtb3J5LWJhbmstaWNvbi1tYXNrJywgJ21lbW9yeS1iYW5rLWljb24nLCB0aGlzLl9jYXJkU2l6ZSkpO1xuICAgIHRoaXMuZW5lbXlEZWNrSWNvbnMucHVzaChhcmdJY29uKTtcbiAgfVxuICB0aGlzLnBvc2l0aW9uQXJndW1lbnRzKGdhbWUsIGZhbHNlKTtcblxuICAvKiBDdXJyZW50IGFyZ3VtZW50IHBvc2l0aW9uIG1hcmtlciAqL1xuICB2YXIgY3VycmVudEFyZ01hcmtlciA9IGdhbWUuYWRkLnNwcml0ZSgwLCAwLCAnbWVtb3J5LWJhbmstaWNvbicpO1xuICBjdXJyZW50QXJnTWFya2VyLnNjYWxlLnNldFRvKHRoaXMuX2NhcmRTaXplICogMS4yIC8gY3VycmVudEFyZ01hcmtlci53aWR0aCk7XG4gIGN1cnJlbnRBcmdNYXJrZXIuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblxuICBjdXJyZW50QXJnTWFya2VyLnggPSB0aGlzLl9jZW50ZXJYO1xuICBjdXJyZW50QXJnTWFya2VyLnkgPSB0aGlzLl9lbmVteU9yaWdpblkgKyB0aGlzLl9hcmd1bWVudFJhZGl1cztcblxuICAvKiogUGxheWVyIGRpc3BsYXkgKi9cbiAgdGhpcy5jcmVkSWNvbiA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICB0aGlzLl9jZW50ZXJYIC0gdGhpcy5fY3JlZFNpemUvMiwgZ2FtZS5oZWlnaHQgKiA1IC8gOCAtIHRoaXMuX2NyZWRTaXplIC8gMixcbiAgICBuZXcgSWNvbihnYW1lLCAwLDAsXG4gICAgJ21lbW9yeS1iYW5rLWljb24tbWFzaycsIG51bGwsICdtZW1vcnktYmFuay1pY29uJywgdGhpcy5fY3JlZFNpemUpKTtcbiAgZ2FtZS5zbGlja1VJLmFkZCh0aGlzLmNyZWRJY29uKTtcblxuICB0aGlzLmNyZWRJY29uLmFkZChcbiAgICB0aGlzLmNyZWRUZXh0ID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KDAsIDAsXG4gICAgICBnYW1lLm1ha2UudGV4dCgwLCAwLCAnJyt0aGlzLl9nYW1lLmNyZWQsIHRleHRzdHlsZXNbJ2NyZWRpYmlsaXR5J10pKVxuICApO1xuICB0aGlzLmNyZWRUZXh0LmRpc3BsYXlPYmplY3Quc2V0VGV4dEJvdW5kcygwLCAwLCB0aGlzLl9jcmVkU2l6ZSwgdGhpcy5jcmVkSWNvbi5kaXNwbGF5T2JqZWN0LmhlaWdodCk7XG5cbiAgLyoqIFBsYXllciBkZWNrIGRpc3BsYXkgKi9cbiAgdmFyIGRlY2tPcmlnaW5YID0gZ2FtZS53aWR0aCAqIDMgLyA1O1xuICB2YXIgZGVja09yaWdpblkgPSB0aGlzLmNyZWRJY29uLnkgKyAodGhpcy5fY3JlZFNpemUgLSB0aGlzLl9jYXJkU2l6ZSkgLyAyO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBwbGF5ZXJEZWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBsYXllckNhcmRJY29uID0gZ2FtZS5hZGQuZXhpc3RpbmcobmV3IEljb24oZ2FtZSwgMCwwLFxuICAgICAgcGxheWVyRGVja1tpXS5hc3NldE5hbWUsICdtZW1vcnktYmFuay1pY29uLW1hc2snLCAnbWVtb3J5LWJhbmstaWNvbicsIHRoaXMuX2NhcmRTaXplKSk7XG4gICAgcGxheWVyQ2FyZEljb24ueCA9IGRlY2tPcmlnaW5YICsgaSoodGhpcy5fY2FyZFNpemUpO1xuICAgIHBsYXllckNhcmRJY29uLnkgPSBkZWNrT3JpZ2luWTtcblxuICAgIHZhciBjYXJkU2lnbmFsID0gdGhpcy5jYXJkU2lnbmFsO1xuICAgIC8vIHNlbmQgc2lnbmFsIHVwb24gY2xpY2sgYW5kIGRlbGV0ZSB0b29sdGlwXG4gICAgcGxheWVyQ2FyZEljb24uZXZlbnRzLm9uSW5wdXREb3duLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICBjYXJkU2lnbmFsLmRpc3BhdGNoKHRoaXMuZ2FtZSwgdGhpcy5jdXJyZW50Q2FyZCk7XG4gICAgfSwge2dhbWU6IGdhbWUsIGN1cnJlbnRDYXJkOiBwbGF5ZXJEZWNrW2ldfSk7XG5cbiAgICBwbGF5ZXJDYXJkSWNvbi5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAgIHBsYXllckNhcmRJY29uLmlucHV0LnVzZUhhbmRDdXJzb3IgPSB0cnVlO1xuXG4gICAgdGhpcy5wbGF5ZXJEZWNrSWNvbnMucHVzaChwbGF5ZXJDYXJkSWNvbik7XG4gICAgdGhpcy5hZGRUb29sdGlwKGksXG4gICAgICB0aGlzLl9jZW50ZXJYICsgdGhpcy5fYXJndW1lbnRSYWRpdXMsIHRoaXMuX2VuZW15T3JpZ2luWSAtIHRoaXMuX2FyZ3VtZW50UmFkaXVzKTtcbiAgfVxuXG4gIC8qKiBQZXJzdWFzaW9uIG1ldGVyICovXG5cbn1cblxuQmF0dGxlVWkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuR3JvdXAucHJvdG90eXBlKTtcbkJhdHRsZVVpLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJhdHRsZVVpO1xuXG5CYXR0bGVVaS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAvLyBUT0RPOiBTdHViLlxufTtcblxuQmF0dGxlVWkucHJvdG90eXBlLmdldEFyZ0ljb24gPSBmdW5jdGlvbiAoYXJndW1lbnQpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVuZW15RGVja0ljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGFyZ0ljb24gPSB0aGlzLmVuZW15RGVja0ljb25zW2ldO1xuICAgIGlmIChhcmd1bWVudC5hc3NldE5hbWUgPT09IGFyZ0ljb24uaWQpIHtcbiAgICAgIHJldHVybiB7J2luZGV4JzogaSwgJ2ljb24nOiBhcmdJY29ufTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsnaW5kZXgnOiAtMSwgJ2ljb24nOiBudWxsfTtcbn07XG5cbkJhdHRsZVVpLnByb3RvdHlwZS5nZXRDYXJkSWNvbiA9IGZ1bmN0aW9uIChjYXJkKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wbGF5ZXJEZWNrSWNvbnMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgY2FyZEljb24gPSB0aGlzLnBsYXllckRlY2tJY29uc1tpXTtcbiAgICBpZiAoY2FyZC5rZXkgPT09IGNhcmRJY29uLmlkKSB7XG4gICAgICByZXR1cm4geydpbmRleCc6IGksICdpY29uJzogY2FyZEljb259O1xuICAgIH1cbiAgfVxuICByZXR1cm4geydpbmRleCc6IC0xLCAnaWNvbic6IG51bGx9O1xufTtcblxuQmF0dGxlVWkucHJvdG90eXBlLnN0YXJ0Q29ycmVjdENhcmRUd2VlbiA9IGZ1bmN0aW9uIChjYXJkSWNvbiwgY2FyZElkeCwgdGFyZ2V0ZWRBcmcpIHtcbiAgLy90aGlzIHNvdW5kcyBiZXN0IHdoZW4gaXQgc3RhcnRzIGF0IGNsaWNrXG4gIHRoaXMuX2dhbWUuc291bmQucGxheSgnY29ycmVjdC1jYXJkJyk7XG4gIHZhciB0d2VlbiA9IHRoaXMuX2dhbWUuYWRkLnR3ZWVuKGNhcmRJY29uKTtcbiAgdHdlZW4udG8oXG4gICAgeyB4OiB0YXJnZXRlZEFyZy54LCB5OiB0YXJnZXRlZEFyZy55IH0sIDEwMDAsXG4gICAgUGhhc2VyLkVhc2luZy5FeHBvbmVudGlhbC5JbiwgdHJ1ZSwgMCk7XG5cbiAgLy8gY3JlYXRlIGZpbGwgc3ByaXRlXG5cbiAgdmFyIHNoYXR0ZXJTcHJpdGUgPSB0aGlzLl9nYW1lLm1ha2Uuc3ByaXRlKFxuICAgIHRhcmdldGVkQXJnLnggKyB0YXJnZXRlZEFyZy53aWR0aC8yLFxuICAgIHRhcmdldGVkQXJnLnkgKyB0YXJnZXRlZEFyZy5oZWlnaHQvMiwgJ21lbW9yeS1iYW5rLWljb24tZmlsbCcpO1xuICBzaGF0dGVyU3ByaXRlLmFscGhhID0gMDtcbiAgLy8gYWRkIHNsaWdodCBmdWRnZSBmYWN0b3JcbiAgc2hhdHRlclNwcml0ZS5zY2FsZS5zZXRUbyh0aGlzLl9jYXJkU2l6ZSoxLjA1IC8gc2hhdHRlclNwcml0ZS53aWR0aCk7XG4gIHNoYXR0ZXJTcHJpdGUuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgdGhpcy5fZ2FtZS5hZGQuZXhpc3Rpbmcoc2hhdHRlclNwcml0ZSk7XG4gIHZhciBhbHBoYVR3ZWVuID0gdGhpcy5fZ2FtZS5hZGQudHdlZW4oc2hhdHRlclNwcml0ZSk7XG5cbiAgLy8gc3RhcnQgYWxwaGEgdHdlZW4gYWZ0ZXJcbiAgdHdlZW4ub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24gKCkge1xuICAgIGFscGhhVHdlZW4udG8oeyBhbHBoYTogMSB9LCAxMDAwLCBQaGFzZXIuRWFzaW5nLkV4cG9uZW50aWFsLkluLCB0cnVlLCAwKTtcbiAgICBhbHBoYVR3ZWVuLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhcmRJY29uLmRlc3Ryb3koKTtcbiAgICAgIHRhcmdldGVkQXJnLmRlc3Ryb3koKTtcbiAgICAgIHNoYXR0ZXJTcHJpdGUuZGVzdHJveSgpO1xuICAgICAgLy8gYXJndW1lbnRzIHVwZGF0ZSBieSB0aGVtc2VsdmVzLCBwbGF5ZXIgY2FyZHMgZG8gbm90XG4gICAgICB0aGlzLnBsYXllckRlY2tJY29ucy5zcGxpY2UoY2FyZElkeCwgMSk7XG4gICAgfSwgdGhpcyk7XG4gIH0sIHRoaXMpO1xuXG4gIC8vIHJldHVybiB0aGUgbGFzdCB0d2VlbiBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGFscGhhVHdlZW47XG59O1xuXG5CYXR0bGVVaS5wcm90b3R5cGUuc3RhcnRJbmNvcnJlY3RDYXJkVHdlZW4gPSBmdW5jdGlvbiAoY2FyZEljb24sIHRhcmdldGVkQXJnKSB7XG4gIHZhciB0d2VlbiA9IHRoaXMuX2dhbWUuYWRkLnR3ZWVuKGNhcmRJY29uKTtcbiAgdmFyIG9yaWdpblggPSBjYXJkSWNvbi54O1xuICB2YXIgb3JpZ2luWSA9IGNhcmRJY29uLnk7XG5cbiAgdHdlZW4udG8oeyB4OiB0YXJnZXRlZEFyZy54LCB5OiB0YXJnZXRlZEFyZy55IH0sIDEwMDAsXG4gICAgUGhhc2VyLkVhc2luZy5FeHBvbmVudGlhbC5Jbk91dCwgZmFsc2UsIDApO1xuICAvLyBhZGQgYW4gYWRkaXRpb25hbCB0d2VlbiB0byByZXR1cm4gdG8gb3JpZ2luYWwgcG9zaXRpb25cbiAgdHdlZW4ub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2dhbWUuc291bmQucGxheSgnd3JvbmctY2FyZCcpO1xuXG4gIH0sIHRoaXMpO1xuXG4gIHZhciBsYXN0VHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2VlbihjYXJkSWNvbik7XG4gIGxhc3RUd2Vlbi50byh7IHg6IG9yaWdpblgsIHk6IG9yaWdpblkgfSwgMTAwMCxcbiAgICBQaGFzZXIuRWFzaW5nLkV4cG9uZW50aWFsLkluLCBmYWxzZSwgMCk7XG5cbiAgdHdlZW4uY2hhaW4obGFzdFR3ZWVuKS5zdGFydCgpO1xuXG4gIC8vIHJldHVybiBsYXN0IHR3ZWVuIGluIHRoZSBjaGFpblxuICByZXR1cm4gbGFzdFR3ZWVuO1xufTtcblxuQmF0dGxlVWkucHJvdG90eXBlLnBsYXlDYXJkQW5pbWF0aW9uID0gZnVuY3Rpb24gKGNhcmQsIGFyZ3VtZW50LCBpc0NvcnJlY3QpIHtcbiAgLy8gZmluZCBtYXRjaGluZyBhcmd1bWVudCBpY29uXG4gIHZhciB0YXJnZXRlZEFyZyA9IHVuZGVmaW5lZDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmVuZW15RGVja0ljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGFyZ0ljb24gPSB0aGlzLmVuZW15RGVja0ljb25zW2ldO1xuICAgIGlmIChhcmd1bWVudC5hc3NldE5hbWUgPT09IGFyZ0ljb24uaWQpIHtcbiAgICAgIHRhcmdldGVkQXJnID0gYXJnSWNvbjtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpZiAodHlwZW9mIHRhcmdldGVkQXJnID09PSAndW5kZWZpbmVkJylcbiAgICByZXR1cm47XG5cbiAgLy8gZmluZCBtYXRjaGluZyBjYXJkIGljb25cbiAgZm9yIChpID0gMDsgaSA8IHRoaXMucGxheWVyRGVja0ljb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGNhcmRJY29uID0gdGhpcy5wbGF5ZXJEZWNrSWNvbnNbaV07XG4gICAgaWYgKGNhcmQua2V5ID09PSBjYXJkSWNvbi5pZCkge1xuICAgICAgdmFyIGxhc3RUd2VlbjtcbiAgICAgIC8vIHBsYXkgZGlmZmVyZW50IGFuaW1hdGlvbnMgb24gY29ycmVjdCB2cy4gaW5jb3JyZWN0IGNhcmRcbiAgICAgIGlmIChpc0NvcnJlY3QpIHtcbiAgICAgICAgbGFzdFR3ZWVuID0gdGhpcy5zdGFydENvcnJlY3RDYXJkVHdlZW4oY2FyZEljb24sIGksIHRhcmdldGVkQXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxhc3RUd2VlbiA9IHRoaXMuc3RhcnRJbmNvcnJlY3RDYXJkVHdlZW4oY2FyZEljb24sIHRhcmdldGVkQXJnKTtcbiAgICAgIH1cbiAgICAgIGxhc3RUd2Vlbi5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY2FyZEFuaW1Db21wbGV0ZVNpZ25hbC5kaXNwYXRjaCh0aGlzLl9nYW1lKTtcblxuICAgICAgfSwgdGhpcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG59O1xuXG5CYXR0bGVVaS5wcm90b3R5cGUudXBkYXRlQXJndW1lbnRzID0gZnVuY3Rpb24gKGFyZ3MsIGN1cnJlbnRBcmdJZHgpIHtcbiAgdmFyIG5ld0VuZW15RGVja0ljb25zID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGlkeCA9IGN1cnJlbnRBcmdJZHggKyBpO1xuICAgIGlmIChpZHggPj0gYXJncy5sZW5ndGgpXG4gICAgICBpZHggLT0gYXJncy5sZW5ndGg7XG5cbiAgICAvLyBudWxsIGFyZ3VtZW50XG4gICAgaWYgKHR5cGVvZiBhcmdzW2lkeF0gPT09ICd1bmRlZmluZWQnIHx8IGFyZ3NbaWR4XSA9PT0gbnVsbClcbiAgICAgIGNvbnRpbnVlO1xuXG4gICAgdmFyIGFyZ0ljb24gPSB0aGlzLmdldEFyZ0ljb24oYXJnc1tpZHhdKTtcbiAgICAvLyBub3QgZm91bmRcbiAgICBpZiAoYXJnSWNvblsnaW5kZXgnXSA9PT0gLTEpXG4gICAgICBjb250aW51ZTtcbiAgICBuZXdFbmVteURlY2tJY29ucy5wdXNoKGFyZ0ljb25bJ2ljb24nXSk7XG4gIH1cblxuICB0aGlzLmVuZW15RGVja0ljb25zID0gbmV3RW5lbXlEZWNrSWNvbnM7XG59O1xuXG5CYXR0bGVVaS5wcm90b3R5cGUucG9zaXRpb25Bcmd1bWVudHMgPSBmdW5jdGlvbiAoZ2FtZSwgaXNUd2VlbmluZyA9IHRydWUpIHtcbiAgdmFyIG5BcmdzID0gdGhpcy5lbmVteURlY2tJY29ucy5sZW5ndGg7XG4gIHZhciBhcmdJY29uO1xuXG4gIGlmICghaXNUd2VlbmluZykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbkFyZ3M7IGkrKykge1xuICAgICAgYXJnSWNvbiA9IHRoaXMuZW5lbXlEZWNrSWNvbnNbaV07XG4gICAgICBhcmdJY29uLnggPSB0aGlzLl9jZW50ZXJYICsgTWF0aC5zaW4oaSAvIG5BcmdzICogMipNYXRoLlBJKSAqIHRoaXMuX2FyZ3VtZW50UmFkaXVzIC0gdGhpcy5fY2FyZFNpemUgLyAyO1xuICAgICAgYXJnSWNvbi55ID0gdGhpcy5fZW5lbXlPcmlnaW5ZICsgTWF0aC5jb3MoaSAvIG5BcmdzICogMipNYXRoLlBJKSAqIHRoaXMuX2FyZ3VtZW50UmFkaXVzIC0gdGhpcy5fY2FyZFNpemUgLyAyO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgdHdlZW5pbmdQb3NpdGlvbnMgPSBbXTtcbiAgdmFyIHR3ZWVucyA9IFtdO1xuICBmb3IgKHZhciBqID0gMDsgaiA8IG5BcmdzOyBqKyspIHtcbiAgICB0d2VlbmluZ1Bvc2l0aW9ucy5wdXNoKFxuICAgICAgbmV3IFBoYXNlci5Qb2ludChcbiAgICAgICAgdGhpcy5fY2VudGVyWCArIE1hdGguc2luKGogLyBuQXJncyAqIDIqTWF0aC5QSSkgKiB0aGlzLl9hcmd1bWVudFJhZGl1cyAtIHRoaXMuX2NhcmRTaXplIC8gMixcbiAgICAgICAgdGhpcy5fZW5lbXlPcmlnaW5ZICsgTWF0aC5jb3MoaiAvIG5BcmdzICogMipNYXRoLlBJKSAqIHRoaXMuX2FyZ3VtZW50UmFkaXVzIC0gdGhpcy5fY2FyZFNpemUgLyAyKSk7XG4gIH1cbiAgZm9yIChqID0gMDsgaiA8IG5BcmdzOyBqKyspIHtcbiAgICBhcmdJY29uID0gdGhpcy5lbmVteURlY2tJY29uc1tqXTtcbiAgICBpZiAodHlwZW9mIGFyZ0ljb24gPT09ICd1bmRlZmluZWQnIHx8IGFyZ0ljb24gPT09IG51bGwpXG4gICAgICBjb250aW51ZTtcbiAgICB0d2VlbnMucHVzaChnYW1lLmFkZC50d2VlbihhcmdJY29uKS50byhcbiAgICAgIHsgeDogdHdlZW5pbmdQb3NpdGlvbnNbal0ueCwgeTogdHdlZW5pbmdQb3NpdGlvbnNbal0ueX0sXG4gICAgICAxMDAwLCBQaGFzZXIuRWFzaW5nLlF1YWRyYXRpYy5Jbk91dCwgZmFsc2UsIDApKTtcbiAgfVxuICBmb3IgKGogPSAwOyBqIDwgdHdlZW5zLmxlbmd0aDsgaisrKSB7XG4gICAgLy8gTm90aWZ5IGNvbXBsZXRpb24gb2YgYXJndW1lbnQgcm90YXRpb25cbiAgICBpZiAoaiA9PT0gMCkge1xuICAgICAgdHdlZW5zW2pdLm9uQ29tcGxldGUuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5hcmdBbmltQ29tcGxldGVTaWduYWwuZGlzcGF0Y2godGhpcy5fZ2FtZSk7XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG4gICAgdHdlZW5zW2pdLnN0YXJ0KCk7XG4gIH1cbn07XG5cbkJhdHRsZVVpLnByb3RvdHlwZS5mbGlja2VyT3ZlcmxheSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHR3ZWVuID0gdGhpcy5fZ2FtZS5hZGQudHdlZW4odGhpcy5fb3ZlcmxheSk7XG4gIHZhciB0aW1lTGVmdCA9IDUwMDsgLy8gaGFsZiBhIHNlY29uZCB0b3RhbFxuICB2YXIgZmxpY2tlclRpbWUgPSAxMDtcbiAgdmFyIG5GbGlja2VycyA9IHRoaXMuX2dhbWUucm5kLmludGVnZXJJblJhbmdlKDIsNCk7XG4gIHZhciBkZWZhdWx0VGludCA9IHRoaXMuX292ZXJsYXkudGludDtcbiAgdmFyIHRpbnRDb2xvciA9IDB4MzMzNTM1O1xuICB2YXIgZmlyc3RUd2VlbiA9IHR3ZWVuO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbkZsaWNrZXJzOyBpKyspIHtcbiAgICAvLyB1c2UgdXAgYWxsIHJlbWFpbmluZyB0aW1lIGlmIGl0IGlzIHRoZSBsYXN0IGZsaWNrZXJcbiAgICB2YXIgcmFuZFRpbWUgPSBpID09IG5GbGlja2VycyAtIDFcbiAgICAgID8gdGltZUxlZnRcbiAgICAgIDogdGhpcy5fZ2FtZS5ybmQuZnJhYygpICogdGltZUxlZnQ7XG5cbiAgICAvLyBmbGlja2VyIGluc3RhbnRseSBpZiBpdCdzIHRoZSBmaXJzdCBmbGlja2VyXG4gICAgdmFyIHNwbGl0VGltZSA9IGkgPT0gMCA/IDAgOiB0aGlzLl9nYW1lLnJuZC5mcmFjKCkgKiByYW5kVGltZTtcbiAgICB0d2Vlbi50byggeyB0aW50OiB0aW50Q29sb3IgfSwgZmxpY2tlclRpbWUsIFBoYXNlci5FYXNpbmcuTGluZWFyLkluLCBmYWxzZSwgc3BsaXRUaW1lKTtcblxuICAgIHZhciBuZXh0VHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzLl9vdmVybGF5KTtcbiAgICBuZXh0VHdlZW4udG8oIHsgdGludDogZGVmYXVsdFRpbnQgfSwgZmxpY2tlclRpbWUsIFBoYXNlci5FYXNpbmcuTGluZWFyLkluLCBmYWxzZSwgcmFuZFRpbWUgLSBzcGxpdFRpbWUpO1xuICAgIHR3ZWVuLmNoYWluKG5leHRUd2Vlbik7XG5cbiAgICB0d2VlbiA9IG5leHRUd2VlbjtcbiAgICB0aW1lTGVmdCAtPSByYW5kVGltZTtcbiAgfVxuICBmaXJzdFR3ZWVuLnN0YXJ0KCk7XG59O1xuXG5CYXR0bGVVaS5wcm90b3R5cGUudXBkYXRlQ3JlZEJhciA9IGZ1bmN0aW9uICh2YWx1ZSwgaXNEYW1hZ2UpIHtcbiAgLy8gZGFtYWdlIGluZGljYXRpb25cbiAgaWYgKGlzRGFtYWdlKSB7XG4gICAgdGhpcy5mbGlja2VyT3ZlcmxheSgpO1xuICB9XG4gIHRoaXMuY3JlZFRleHQuZGlzcGxheU9iamVjdC50ZXh0ID0gdmFsdWU7XG4gIHZhciBvcmlnaW5hbFRpbnQgPSB0aGlzLmNyZWRUZXh0LmRpc3BsYXlPYmplY3QudGludDtcbiAgdmFyIGZpcnN0VHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzLmNyZWRUZXh0LmRpc3BsYXlPYmplY3QpO1xuICBmaXJzdFR3ZWVuLnRvKHsgdGludDogMHg5NzBCMjYgfSwgMTAwLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5JbiwgZmFsc2UsIDApO1xuICB2YXIgc2Vjb25kVHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzLmNyZWRUZXh0LmRpc3BsYXlPYmplY3QpO1xuICBzZWNvbmRUd2Vlbi50byh7IHRpbnQ6IG9yaWdpbmFsVGludCB9LCA1MDAsIFBoYXNlci5FYXNpbmcuTGluZWFyLkluLCBmYWxzZSwgMCk7XG4gIGZpcnN0VHdlZW4uY2hhaW4oc2Vjb25kVHdlZW4pO1xuICBmaXJzdFR3ZWVuLnN0YXJ0KCk7XG59O1xuXG5CYXR0bGVVaS5wcm90b3R5cGUudXBkYXRlUGVyc3Vhc2lvbkJhciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5wZXJzdWFkZUJhci5zZXRQZXJjZW50KHRoaXMuX2dhbWUucGVyc3Vhc2lvbiAqIDI1KTtcbn07XG5cbkJhdHRsZVVpLnByb3RvdHlwZS5jYXJkc0lucHV0RW5hYmxlZCA9IGZ1bmN0aW9uIChpc0VuYWJsZWQpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBsYXllckRlY2tJY29ucy5sZW5ndGg7IGkrKykge1xuICAgIHRoaXMucGxheWVyRGVja0ljb25zW2ldLmlucHV0RW5hYmxlZCA9IGlzRW5hYmxlZDtcbiAgfVxufTtcblxuQmF0dGxlVWkucHJvdG90eXBlLmFkZFRvb2x0aXAgPSBmdW5jdGlvbiAoY2FyZElkeCwgeCwgeSkge1xuICB2YXIgcGxheWVyQ2FyZEljb24gPSB0aGlzLnBsYXllckRlY2tJY29uc1tjYXJkSWR4XTtcblxuICB2YXIgdG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdG9vbHRpcFdpZHRoID0gMjUwO1xuICAgIHZhciB0b29sdGlwSGVpZ2h0ID0gMjUwO1xuXG4gICAgdmFyIGJtZCA9IHRoaXMuX2dhbWUuYWRkLmJpdG1hcERhdGEodG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcbiAgICBibWQuY3R4LmJlZ2luUGF0aCgpO1xuICAgIGJtZC5jdHgucmVjdCgwLCAwLCB0b29sdGlwV2lkdGgsIHRvb2x0aXBIZWlnaHQpO1xuICAgIGJtZC5jdHguZmlsbFN0eWxlID0gJyM0MjRkNGYnO1xuICAgIGJtZC5jdHguZmlsbCgpO1xuXG4gICAgdGhpcy5fZ2FtZS5zbGlja1VJLmFkZCh0aGlzLnRvb2x0aXAgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB4LHksIHRoaXMuX2dhbWUubWFrZS5zcHJpdGUoMCwgMCwgYm1kKSkpO1xuICAgIHRoaXMudG9vbHRpcC5hbHBoYSA9IDAuODtcblxuICAgIHZhciBuYW1lVGV4dFN0eWxlID0geyBmb250OiAnMTRweCBHb3VkeSBCb29rbGV0dGVyIDE5MTEnLCBmaWxsOiAnIzQ4ZjJmZicsIHdvcmRXcmFwOiB0cnVlLCB3b3JkV3JhcFdpZHRoOiB0b29sdGlwV2lkdGgsIGZvbnRXZWlnaHQ6ICdib2xkJywgYm91bmRzQWxpZ25IOiAnY2VudGVyJyB9O1xuICAgIHZhciBuYW1lVGV4dCA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdCgwLDAsXG4gICAgICB0aGlzLl9nYW1lLm1ha2UudGV4dCgwLDAsIGl0ZW1zW3BsYXllckNhcmRJY29uLmlkXVsnbmFtZSddLnRvVXBwZXJDYXNlKCksIG5hbWVUZXh0U3R5bGUpKTtcbiAgICB0aGlzLnRvb2x0aXAuYWRkKG5hbWVUZXh0KTtcbiAgICAvLyBmb3IgYWxpZ25tZW50IHB1cnBvc2VzXG4gICAgdmFyIG5hbWVUZXh0SGVpZ2h0ID0gbmFtZVRleHQuZGlzcGxheU9iamVjdC5nZXRCb3VuZHMoKS5oZWlnaHQ7XG4gICAgbmFtZVRleHQuZGlzcGxheU9iamVjdC5zZXRUZXh0Qm91bmRzKDAsMCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcblxuICAgIHZhciBkZXNjVGV4dFN0eWxlID0geyBmb250OiAnMTRweCBPcGVuIFNhbnMnLCBmaWxsOiAnIzQ4ZjJmZicsIHdvcmRXcmFwOiB0cnVlLCB3b3JkV3JhcFdpZHRoOiB0b29sdGlwV2lkdGgsIGFsaWduOiAnbGVmdCcgfTtcbiAgICB2YXIgZGVzY1RleHQgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICAwLCBNYXRoLnJvdW5kKG5hbWVUZXh0SGVpZ2h0KSxcbiAgICAgIHRoaXMuX2dhbWUubWFrZS50ZXh0KDAsMCwgaXRlbXNbcGxheWVyQ2FyZEljb24uaWRdWydkZXNjJ10sIGRlc2NUZXh0U3R5bGUpKTtcbiAgICB0aGlzLnRvb2x0aXAuYWRkKGRlc2NUZXh0KTtcbiAgfTtcblxuICB2YXIgZGVsZXRlVG9vbHRpcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy50b29sdGlwKSB7XG4gICAgICB0aGlzLnRvb2x0aXAuY29udGFpbmVyLmRpc3BsYXlHcm91cC5yZW1vdmVBbGwoKTtcbiAgICB9XG4gICAgdGhpcy50b29sdGlwID0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIHBsYXllckNhcmRJY29uLmV2ZW50cy5vbklucHV0RG93bi5hZGQoZGVsZXRlVG9vbHRpcCwgcGxheWVyQ2FyZEljb24pO1xuXG4gIC8vIHRvb2x0aXAgZnVuY3Rpb25zXG4gIHBsYXllckNhcmRJY29uLmV2ZW50cy5vbklucHV0T3Zlci5hZGQodG9vbHRpcCwgcGxheWVyQ2FyZEljb24pO1xuICBwbGF5ZXJDYXJkSWNvbi5ldmVudHMub25JbnB1dE91dC5hZGQoZGVsZXRlVG9vbHRpcCwgcGxheWVyQ2FyZEljb24pO1xuXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbmZ1bmN0aW9uIENhcmQoZ2FtZSwgeCwgeSwgYXNzZXROYW1lKSB7XG4gIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCBhc3NldE5hbWUpO1xuICB0aGlzLl9nYW1lID0gZ2FtZTtcbiAgdGhpcy5hc3NldE5hbWUgPSBhc3NldE5hbWU7XG4gIHRoaXMua2V5ID0gYXNzZXROYW1lO1xuICB0aGlzLmRlc2NyaXB0aW9uID0gJ3Rlc3QnO1xufVxuXG5DYXJkLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xubW9kdWxlLmV4cG9ydHMgPSBDYXJkLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhcmQ7XG4iLCIvKlxuKiBDbGlja2FibGVcbiogPT09PVxuKlxuKiBBIHNhbXBsZSBwcmVmYWIgKGV4dGVuZGVkIGdhbWUgb2JqZWN0IGNsYXNzKSwgZGlzcGxheWluZyBhIGNsaWNrYWJsZSBvYmplY3QgaW4gYSByb29tLlxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVG9hc3QgPSByZXF1aXJlKCcuL1RvYXN0Jyk7XG52YXIgaXRlbXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL2l0ZW1zLmpzb24nKTtcblxuZnVuY3Rpb24gQ2xpY2thYmxlKGdhbWUsIHgsIHksIGlkLCBoZWlnaHQsIHdpZHRoKSB7XG4gIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCBpZCk7XG4gIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB0aGlzLndpZHRoID0gd2lkdGg7XG5cbiAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5uYW1lID0gaXRlbXNbdGhpcy5pZF1bJ25hbWUnXTtcbiAgdGhpcy5hbmNob3Iuc2V0KDAuNSk7XG4gIHRoaXMuYWxwaGEgPSAwLjU7XG4gIHRoaXMuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgdGhpcy5pbnB1dC51c2VIYW5kQ3Vyc29yID0gdHJ1ZTtcbiAgdGhpcy5ldmVudHMub25JbnB1dERvd24uYWRkKGNsaWNrLCB0aGlzKTtcbiAgdGhpcy5ldmVudHMub25JbnB1dE92ZXIuYWRkKG1vdXNlb3ZlciwgdGhpcyk7XG4gIHRoaXMuZXZlbnRzLm9uSW5wdXRPdXQuYWRkKG1vdXNlb3V0LCB0aGlzKTtcblxuICB0aGlzLmlucHV0LnBpeGVsUGVyZmVjdE92ZXIgPSB0cnVlOyAgIC8vIGNoZWNrcyBwaXhlbHMgc28gdGhhdCBjb2xsaXNpb24gb25seSBoYXBwZW5zIHdpdGggbm9uLXRyYW5zcGFyZW50IGFyZWFzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29tcHV0YXRpb25hbGx5IGV4cGVuc2l2ZSwgYnV0IG1heWJlIG5lY2Vzc2FyeSBmb3IgcmVhbGlzbSBwdXJwb3Nlcz9cbn1cblxuZnVuY3Rpb24gY2xpY2soKSB7XG4gIHRoaXMuX2dhbWUuc291bmQucGxheSgnaW52ZW50b3J5LWFkZCcpO1xuICB0aGlzLmRlc3Ryb3koKTtcbiAgdGhpcy5fZ2FtZS5hZGQuZXhpc3RpbmcobmV3IFRvYXN0KHRoaXMuX2dhbWUsICdZb3VcXCd2ZSBhY3F1aXJlZCAnICsgdGhpcy5uYW1lICsgJyEnLCA1KSk7XG4gIHRoaXMuX2dhbWUucGxheWVyLmludmVudG9yeS5wdXNoKHRoaXMuaWQpO1xuICB2YXIgaXRlbXMgPSB0aGlzLl9nYW1lLnJvb20uYXJlYS5pdGVtcztcbiAgdmFyIHJlbW92ZV9pdGVtID0gLTE7XG4gIC8vYmVjYXVzZSBpdCBpcyBjaGVja2luZyB0aGUgaWQgb2YgdGhlIGl0ZW0gYW5kIG5vdCB0aGUgYWN0dWFsIGl0ZW1cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpdGVtc1tpXS5pZCA9PT0gdGhpcy5pZCl7XG4gICAgICByZW1vdmVfaXRlbSA9IGk7XG4gICAgfVxuICB9XG4gIGlmIChyZW1vdmVfaXRlbSA+IC0xKSB7XG4gICAgaXRlbXMuc3BsaWNlKHJlbW92ZV9pdGVtLCAxKTtcbiAgfVxuICB0aGlzLl9nYW1lLmRpYWxvZ3VlV2luZG93LmRpc3BsYXkodHJ1ZSk7IC8vIHJlZnJlc2ggZGlhbG9ndWUgZGlzcGxheSwgZGlzcGxheSBpbnN0YW50bHlcbiAgdGhpcy5fZ2FtZS5tZW1vcnlCYW5rV2luZG93LmRpc3BsYXkoKTsgIC8vIHJlZnJlc2ggbWVtb3J5IGJhbmsgZGlzcGxheVxufVxuXG5mdW5jdGlvbiBtb3VzZW92ZXIoKSB7XG4gIHRoaXMuYWxwaGEgPSAxO1xuICB0aGlzLl9nYW1lLmFkZC5leGlzdGluZyh0aGlzLnRvYXN0ID0gbmV3IFRvYXN0KHRoaXMuX2dhbWUsIHRoaXMubmFtZSwgNSkpO1xufVxuXG5mdW5jdGlvbiBtb3VzZW91dCgpIHtcbiAgaWYgKHRoaXMudG9hc3QpIHtcbiAgICB0aGlzLnRvYXN0LnRvYXN0LmNvbnRhaW5lci5kaXNwbGF5R3JvdXAucmVtb3ZlQWxsKCk7XG4gICAgdGhpcy50b2FzdC5kZXN0cm95KCk7XG4gIH1cbn1cblxuQ2xpY2thYmxlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xubW9kdWxlLmV4cG9ydHMgPSBDbGlja2FibGUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xpY2thYmxlO1xuIiwiLypcbiAqIENvbnZlcnNhdGlvbk1hbmFnZXJcbiAqID09PT09PT09PT09PT09PT09PT1cbiAqXG4gKiBIYW5kbGVzIGxvYWRpbmcgSlNPTiBhc3NldHMgZm9yIGNvbnZlcnNhdGlvbiBhbmQgbWFuYWdpbmcgY29udmVyc2F0aW9uIHN0YXRlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnZlcnNhdGlvbk1hbmFnZXI7XG5cbnZhciBucGNzID0gcmVxdWlyZSgnLi4vLi4vc3RhdGljL2Fzc2V0cy9ucGNzLmpzb24nKTtcblxuZnVuY3Rpb24gQ29udmVyc2F0aW9uTWFuYWdlcihnYW1lLCBjdXN0b21BY3Rpb25zLyosIC4uLmFyZ3MqLykge1xuICAvLyBQUk9QRVJUSUVTOlxuICAvLyAtIGNvbnZlcnNhdGlvbiAtIGpzb24gY29udmVyc2F0aW9uXG5cbiAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gIHRoaXMuY3VzdG9tQWN0aW9ucyA9IGN1c3RvbUFjdGlvbnM7XG5cbiAgdGhpcy5jb252ZXJzYXRpb24gPSBudWxsO1xuICB0aGlzLmlkeCA9IDA7XG4gIHRoaXMuc2hvd24gPSBbXTtcbn1cbkNvbnZlcnNhdGlvbk1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ29udmVyc2F0aW9uTWFuYWdlcjtcblxuLyogQXNzdW1lcyBKU09OIGhhcyBhbHJlYWR5IGJlZW4gbG9hZGVkIGludG8gY2FjaGUhXG4gKiBVc2UgZ2FtZS5sb2FkLmpzb24gb3RoZXJ3aXNlXG4gKi9cbkNvbnZlcnNhdGlvbk1hbmFnZXIucHJvdG90eXBlLmxvYWRKU09OQ29udmVyc2F0aW9uID0gZnVuY3Rpb24gKGpzb25LZXkpIHtcbiAgdmFyIGpzb24gPSB0aGlzLl9nYW1lLmNhY2hlLmdldEpTT04oanNvbktleSk7XG5cbiAgdGhpcy5jb252ZXJzYXRpb24gPSBqc29uO1xuXG4gIGlmICh0aGlzLl9nYW1lLmFyZWFUcmFuc2l0aW9uV2luZG93ICE9PSBudWxsIFxuICAgICYmIHR5cGVvZiB0aGlzLl9nYW1lLmFyZWFUcmFuc2l0aW9uV2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHRoaXMuX2dhbWUuYXJlYVRyYW5zaXRpb25XaW5kb3cuZGlzYWJsZSgpO1xuICB9XG4gIC8vdGhlIHBsYXllciBvYmplY3Qgd2lsbCBpbml0aWFsaXplIHRoZSBzdGFydCBpbmRleCBvZiBhIGNvbnZlcnNhdGlvblxuICAvLyBhdCB0aGUgZW5kIG9mIGEgY29udmVyc2F0aW9uIHRoZSBpbmRleCB3aWxsIHJldHVybiB0byAwXG4gIC8vIHNvIHRoYXQgdGhlIG5leHQgZmlsZSB3aWxsIHN0YXJ0IGF0IHRoZSBiZWdpbmluZy5cblxufTtcblxuQ29udmVyc2F0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0Q3VycmVudFRleHQgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmNvbnZlcnNhdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHJldHVybiB0aGlzLmNvbnZlcnNhdGlvblt0aGlzLmlkeF1bJ3RleHQnXTtcbn07XG5cbkNvbnZlcnNhdGlvbk1hbmFnZXIucHJvdG90eXBlLmdldFJlc3BvbnNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKCF0aGlzLmNvbnZlcnNhdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBbJyddO1xuICB9XG4gIHZhciByZXNwb25zZXMgPSB0aGlzLmNvbnZlcnNhdGlvblt0aGlzLmlkeF1bJ3Jlc3BvbnNlcyddO1xuICB2YXIgcmV0ID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy9jaGVjayBzaG93T25jZSBvZiB0YXJnZXQgbm9kZVxuICAgIGlmICh0aGlzLnNob3duLmluZGV4T2YocmVzcG9uc2VzW2ldWyd0YXJnZXQnXSkgPiAtMSkgeyAgICAvLyB0aGlzIG5vZGUgaXMgbWFya2VkIFwic2hvdyBvbmNlXCIgYW5kIGhhcyBhbHJlYWR5IGJlZW4gc2hvd25cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAvL2NoZWNrIGNvbmRpdGlvbnMgb24gcmVzcG9uc2VcbiAgICBpZiAoJ2NvbmRpdGlvbnMnIGluIHJlc3BvbnNlc1tpXSkge1xuICAgICAgdmFyIGNvbmRpdGlvbnNOZWVkZWQgPSAwO1xuICAgICAgdmFyIGNvbmRpdGlvbnNNZXQgPSAwO1xuICAgICAgZm9yICh2YXIgY29uZGl0aW9uIGluIHJlc3BvbnNlc1tpXVsnY29uZGl0aW9ucyddKSB7XG4gICAgICAgIGlmICh0aGlzLmNoZWNrQ29uZGl0aW9uKHRoaXMuX2dhbWUsIGNvbmRpdGlvbiwgcmVzcG9uc2VzW2ldWydjb25kaXRpb25zJ11bY29uZGl0aW9uXSkpIHtcbiAgICAgICAgICBjb25kaXRpb25zTWV0Kys7XG4gICAgICAgIH1cbiAgICAgICAgY29uZGl0aW9uc05lZWRlZCsrO1xuICAgICAgfVxuICAgICAgaWYgKGNvbmRpdGlvbnNNZXQgPj0gY29uZGl0aW9uc05lZWRlZCkge1xuICAgICAgICByZXQucHVzaChyZXNwb25zZXNbaV0pOyAvL2lmIGFsbCBjb25kaXRpb25zIGFyZSBtZXQsIGRpc3BsYXkgcmVzcG9uc2VcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0LnB1c2gocmVzcG9uc2VzW2ldKTsgICAvL25vIGNvbmRpdGlvbnMgb24gdGhpcyByZXNwb25zZSwgZGlzcGxheSBpdFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG5Db252ZXJzYXRpb25NYW5hZ2VyLnByb3RvdHlwZS5jaGVja0NvbmRpdGlvbiA9IGZ1bmN0aW9uKGdhbWUsIGNvbmRpdGlvbiwgdmFsdWUpIHtcbiAgaWYgKGNvbmRpdGlvbi5zdGFydHNXaXRoKCd2YXInKSkge1xuICAgIHZhciB2YXJpYWJsZSA9IGNvbmRpdGlvbi5zdWJzdHJpbmcoMyk7XG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJyEnKSkge1xuICAgICAgaWYgKCEodmFyaWFibGUgaW4gZ2FtZS5wbGF5ZXIudmFyaWFibGVzKSB8fCBnYW1lLnBsYXllci52YXJpYWJsZXNbdmFyaWFibGVdICE9PSB2YWx1ZS5zdWJzdHJpbmcoMSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7ICAgIC8vcGxheWVyIGRvZXMgbm90IGhhdmUgdGhpcyB2YXJpYWJsZSBzZXQsIG9yIGhhcyBpdCBzZXQgdG8gYSBkaWZmZXJlbnQgdmFsdWVcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhcmlhYmxlIGluIGdhbWUucGxheWVyLnZhcmlhYmxlcyAmJiBnYW1lLnBsYXllci52YXJpYWJsZXNbdmFyaWFibGVdID09PSB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRydWU7ICAgICAgLy9wbGF5ZXIgaGFzIHRoaXMgdmFyaWFibGUgc2V0IHRvIHRoaXMgdmFsdWVcbiAgICB9XG4gIH0gZWxzZSBpZiAoY29uZGl0aW9uLnN0YXJ0c1dpdGgoJ2ludicpKSB7XG4gICAgdmFyIGl0ZW0gPSBjb25kaXRpb24uc3Vic3RyaW5nKDMpO1xuICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCchJykpIHtcbiAgICAgIGlmIChnYW1lLnBsYXllci5pbnZlbnRvcnkuaW5kZXhPZihpdGVtKSA9PT0gLTEpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7ICAgIC8vcGxheWVyIGRvZXMgbm90IGhhdmUgdGhpcyBpbnZlbnRvcnkgaXRlbVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2FtZS5wbGF5ZXIuaW52ZW50b3J5LmluZGV4T2YoaXRlbSkgPiAtMSkge1xuICAgICAgcmV0dXJuIHRydWU7ICAgICAgLy9wbGF5ZXIgaGFzIHRoaXMgaW52ZW50b3J5IGl0ZW1cbiAgICB9XG4gIH0gZWxzZSBpZiAoY29uZGl0aW9uLnN0YXJ0c1dpdGgoJ3NlZW4nKSkge1xuICAgIHZhciB2aXNpdGVkID0gdmFsdWUuc3BsaXQoJyAnKTtcbiAgICB2YXIgdmlzaXRlZEFsbCA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdGVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5zaG93bi5pbmRleE9mKHBhcnNlSW50KHZpc2l0ZWRbaV0pKSA9PT0gLTEpIHtcbiAgICAgICAgdmlzaXRlZEFsbCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmlzaXRlZEFsbDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5Db252ZXJzYXRpb25NYW5hZ2VyLnByb3RvdHlwZS5nZXRTcGVha2VyID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5jb252ZXJzYXRpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm4gWycnXTtcbiAgfVxuXG4gIHJldHVybiBucGNzW3RoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVsnc3BlYWtlciddXVsnbmFtZSddO1xufTtcblxuQ29udmVyc2F0aW9uTWFuYWdlci5wcm90b3R5cGUuZ2V0QXZhdGFyID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmNvbnZlcnNhdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybiBbJyddO1xuICB9XG5cbiAgcmV0dXJuIG5wY3NbdGhpcy5jb252ZXJzYXRpb25bdGhpcy5pZHhdWydzcGVha2VyJ11dWydhdmF0YXInXTtcbn07XG5cbkNvbnZlcnNhdGlvbk1hbmFnZXIucHJvdG90eXBlLnRha2VBY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmNvbnZlcnNhdGlvbiA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmICh0aGlzLmNvbnZlcnNhdGlvblt0aGlzLmlkeF1bJ3Nob3dPbmNlJ10gPT09IDEgJiYgIXRoaXMuc2hvd24uaW5jbHVkZXModGhpcy5pZHgpKSB7XG4gICAgLy9pZiBzYXZlIGF0IHRoaXMgcG9pbnQga2VlcHMgZ2V0dGluZyByZXNhdmVkLlxuICAgIHRoaXMuc2hvd24ucHVzaCh0aGlzLmlkeCk7XG4gIH1cblxuICBpZiAodGhpcy5jb252ZXJzYXRpb25bdGhpcy5pZHhdWydhY3Rpb25zJ10ubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZm9yICh2YXIgYWN0aW9uIGluIHRoaXMuY29udmVyc2F0aW9uW3RoaXMuaWR4XVsnYWN0aW9ucyddKSB7XG4gICAgdGhpcy50YWtlQWN0aW9uKHRoaXMuX2dhbWUsIGFjdGlvbiwgdGhpcy5jb252ZXJzYXRpb25bdGhpcy5pZHhdWydhY3Rpb25zJ11bYWN0aW9uXSk7XG4gIH1cbiAgcmV0dXJuO1xufTtcblxuQ29udmVyc2F0aW9uTWFuYWdlci5wcm90b3R5cGUudGFrZUFjdGlvbiA9IGZ1bmN0aW9uKGdhbWUsIGFjdGlvbiwgdmFsdWUpIHtcbiAgaWYgKGFjdGlvbi5zdGFydHNXaXRoKCd2YXInKSkge1xuICAgIHZhciB2YXJpYWJsZSA9IGFjdGlvbi5zdWJzdHJpbmcoMyk7XG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJyEnKSkge1xuICAgICAgZGVsZXRlIGdhbWUucGxheWVyLnZhcmlhYmxlc1t2YXJpYWJsZV07IC8vcmVtb3ZlIHZhcmlhYmxlIGZyb21cbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZS5wbGF5ZXIudmFyaWFibGVzW3ZhcmlhYmxlXSA9IHZhbHVlOyAgLy9zZXQgdmFyaWFibGUgb24gcGxheWVyXG4gICAgfVxuICB9IGVsc2UgaWYgKGFjdGlvbi5zdGFydHNXaXRoKCdpbnYnKSkge1xuICAgIHZhciBpdGVtID0gYWN0aW9uLnN1YnN0cmluZygzKTtcbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnIScpKSB7XG4gICAgICBpZiAoIShpdGVtIGluIGdhbWUucGxheWVyLmludmVudG9yeSkpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gZ2FtZS5wbGF5ZXIuaW52ZW50b3J5LmluZGV4T2YoaXRlbSk7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgZ2FtZS5wbGF5ZXIuaW52ZW50b3J5LnNwbGljZShpbmRleCwgMSk7IC8vcmVtb3ZlIGl0ZW0gZnJvbSBwbGF5ZXIgaW52ZW50b3J5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZ2FtZS5wbGF5ZXIuaW52ZW50b3J5LnB1c2goaXRlbSk7IC8vYWRkIGl0ZW0gdG8gcGxheWVyIGludmVudG9yeVxuICAgIH1cbiAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdjdXN0b20nKSB7XG4gICAgdGhpcy5jdXN0b21BY3Rpb25zLmN1c3RvbUFjdGlvbih2YWx1ZSk7XG4gIH1cbn07XG5cbkNvbnZlcnNhdGlvbk1hbmFnZXIucHJvdG90eXBlLmVuZENvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICBpZiAodGhpcy5jb252ZXJzYXRpb24gPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2dhbWUucm9vbS5ucGNzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG5wYyA9IHRoaXMuX2dhbWUucm9vbS5ucGNzW2ldO1xuICAgIG5wYy5zaG93KCk7XG4gIH1cbiAgICBcbiAgaWYgKCdvbkVuZCcgaW4gdGhpcy5jb252ZXJzYXRpb24pIHtcbiAgICB0aGlzLmN1c3RvbUFjdGlvbnMuY3VzdG9tQWN0aW9uKHRoaXMuY29udmVyc2F0aW9uWydvbkVuZCddKTtcbiAgfVxuXG4gIHRoaXMuc2hvd24gPSBbXTtcbiAgdGhpcy5pZHggPSAwO1xuICAvL3RoaW5rIHRoaXMgaXMgYSBjeWNsaWMgcmVmLiBUT0RPOiBmaXggXG4gIHRoaXMuX2dhbWUuZGlhbG9ndWVXaW5kb3cuY29udm9GaWxlID0gbnVsbDtcbiAgdGhpcy5fZ2FtZS5hcmVhVHJhbnNpdGlvbldpbmRvdy5lbmFibGUoKTtcbn07XG5cbkNvbnZlcnNhdGlvbk1hbmFnZXIucHJvdG90eXBlLmFkdmFuY2VUb1RhcmdldCA9IGZ1bmN0aW9uICh0YXJnZXRJZHgpIHtcbiAgdGhpcy5pZHggPSB0YXJnZXRJZHg7XG4gIHJldHVybiB0cnVlOyAgLy8gcmV0dXJucyB3aGV0aGVyIHNob3VsZCByZWZyZXNoIGRpc3BsYXkuXG59O1xuXG5Db252ZXJzYXRpb25NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRPRE86IFN0dWIuXG59O1xuIiwiLypcbiogRGlhbG9ndWVXaW5kb3dcbiogPT09PT09PT09PT09PT1cbipcbiogSGFuZGxlcyBkaXNwbGF5aW5nIGRpYWxvZ3VlIChjb252ZXJzYXRpb24gZGF0YSkgdG8gc2NyZWVuXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gRGlhbG9ndWVXaW5kb3c7XG5cbnZhciBTY3JvbGxiYXIgPSByZXF1aXJlKCcuL1Njcm9sbGJhcicpO1xudmFyIHRleHRzdHlsZXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL3RleHRzdHlsZXMuanNvbicpO1xuXG5mdW5jdGlvbiBEaWFsb2d1ZVdpbmRvdyhnYW1lLCBjb252b01hbmFnZXIvKiwgLi4uYXJncyovKSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUvKiwgLi4uYXJncyovKTtcblxuICAvLyBQUk9QRVJUSUVTXG4gIC8vIC0gZGlhbG9nUGFuZWxcbiAgLy8gLSBzcGVha2VyVGV4dFxuICAvLyAtIGRpYWxvZ1RleHRcbiAgLy8gLSBjb252b01hbmFnZXIgKHBhc3NlZCBpbiBDb252ZXJzYXRpb25NYW5hZ2VyKVxuICAvLyAtIGRpYWxvZ1dpZHRoXG4gIC8vIC0gZGlhbG9nSGVpZ2h0XG4gIC8vIC0gYnV0dG9uc1xuXG4gIHRoaXMuY29udm9NYW5hZ2VyID0gY29udm9NYW5hZ2VyO1xuICAvLyBtZXNzeSwgYnV0IHVzZWZ1bCBpZiB3ZSBuZWVkIGEgcmVmZXJlbmNlIHRvIHRoZSBnYW1lXG4gIHRoaXMuX2dhbWUgPSBnYW1lO1xuXG4gIC8qIFNJR05BTFMgKi9cbiAgLy8gcHJpdmF0ZVxuICB0aGlzLl9vbkRpYWxvZ1RleHRGaW5pc2hlZCA9IG5ldyBQaGFzZXIuU2lnbmFsKCk7IC8vIHdoZW4gdGhlIGNoYXItYnktY2hhciBkaXNwbGF5IGZpbmlzaGVzXG5cbiAgLy8gcHJpdmF0ZSBtZW1iZXJzIHNwZWNpZnlpbmcgbWFyZ2luIGFuZCBwYWRkaW5nXG4gIHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5YID0gOTY7XG4gIHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5ZID0gNjA7XG4gIHRoaXMuX2RpYWxvZ1BhZGRpbmcgPSAzMjtcblxuICAvLyBzcGVha2VyIGF2YXRhciBkaXNwbGF5XG4gIGdhbWUuc2xpY2tVSS5hZGQodGhpcy5hdmF0YXIgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgNDAwLCAxMDAsIGdhbWUubWFrZS5zcHJpdGUoMCwgMCwgJ2ludmlzaWJsZScpLFxuICAgIDQwMCwgNTAwKSk7XG5cbiAgdGhpcy5kaWFsb2dIZWlnaHQgPSBnYW1lLmhlaWdodCAqIDMgLyA4IC8qIDMvOCBoZWlnaHQgKi8gLSB0aGlzLl9kaWFsb2dQYWRkaW5nIC8gMjtcbiAgdGhpcy5kaWFsb2dXaWR0aCA9IGdhbWUud2lkdGggLSB0aGlzLl9kaWFsb2dQYWRkaW5nO1xuXG4gIC8vIGRpYWxvZyB0ZXh0IGRpbWVuc2lvbnMgKHByaXZhdGUpXG4gIHRoaXMuX2RpYWxvZ1RleHRIZWlnaHQgPSB0aGlzLmRpYWxvZ0hlaWdodCAtIHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5ZIC0gMTg7XG4gIHRoaXMuX2RpYWxvZ1RleHRXaWR0aCA9IHRoaXMuZGlhbG9nV2lkdGggLSAxODU7XG5cbiAgLy8gd2luZG93IGNvb3JkaW5hdGVzXG4gIHZhciBkaWFsb2dYID0gdGhpcy5fZGlhbG9nUGFkZGluZyAvIDI7XG4gIHZhciBkaWFsb2dZID0gZ2FtZS5oZWlnaHQgKiA1IC8gODsgIC8vIDUvOCBkb3duXG5cbiAgZ2FtZS5zbGlja1VJLmFkZChcbiAgICB0aGlzLmRpYWxvZ1BhbmVsID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KFxuICAgICAgZGlhbG9nWCwgZGlhbG9nWSwgZ2FtZS5tYWtlLnNwcml0ZSgwLDAsICdkaWFsb2d1ZS1wYW5lbCcpLFxuICAgICAgdGhpcy5kaWFsb2dXaWR0aCwgdGhpcy5kaWFsb2dIZWlnaHQpKTtcbiAgdGhpcy5kaWFsb2dQYW5lbC5kaXNwbGF5T2JqZWN0LndpZHRoID0gdGhpcy5kaWFsb2dXaWR0aDtcbiAgdGhpcy5kaWFsb2dQYW5lbC5kaXNwbGF5T2JqZWN0LmhlaWdodCA9IHRoaXMuZGlhbG9nSGVpZ2h0O1xuXG4gIC8vIGFjdHVhbCB3aW5kb3cgY29udGVudHNcbiAgdmFyIHNwZWFrZXJYID0gdGhpcy5fZGlhbG9nUGFkZGluZyArIDY0O1xuICB2YXIgc3BlYWtlclkgPSB0aGlzLl9kaWFsb2dQYWRkaW5nIC8gNDtcbiAgdGhpcy5kaWFsb2dQYW5lbC5hZGQoXG4gICAgdGhpcy5zcGVha2VyVGV4dCA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICAgIE1hdGgucm91bmQoc3BlYWtlclgpLCBzcGVha2VyWSxcbiAgICAgIGdhbWUubWFrZS50ZXh0KDAsIDAsICdTcGVha2VyJywgdGV4dHN0eWxlc1snc3BlYWtlciddKSkpO1xuXG4gIC8vIHVzaW5nIGEgbWFzayBmb3Igc2Nyb2xsaW5nIHB1cnBvc2VzXG4gIHRoaXMuX3Njcm9sbE1hc2sgPSBnYW1lLm1ha2UuZ3JhcGhpY3MoMCwgMCk7XG4gIHRoaXMuX3Njcm9sbE1hc2suYmVnaW5GaWxsKDB4ZmZmZmZmKTtcbiAgdGhpcy5fc2Nyb2xsTWFzay5kcmF3UmVjdCggdGhpcy5fZGlhbG9nVGV4dE9yaWdpblgsIHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5ZLCB0aGlzLl9kaWFsb2dUZXh0V2lkdGgsIHRoaXMuX2RpYWxvZ1RleHRIZWlnaHQgKTtcbiAgdGhpcy5fc2Nyb2xsTWFzay5lbmRGaWxsKCk7XG5cbiAgdmFyIGJvZHlTdHlsZSA9IHRleHRzdHlsZXNbJ2RpYWxvZ3VlQm9keSddO1xuICBib2R5U3R5bGUud29yZFdyYXBXaWR0aCA9IHRoaXMuX2RpYWxvZ1RleHRXaWR0aDtcbiAgdGhpcy5kaWFsb2dQYW5lbC5hZGQoXG4gICAgdGhpcy5kaWFsb2dUZXh0ID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5YLCB0aGlzLl9kaWFsb2dUZXh0T3JpZ2luWSwgXG4gICAgICBnYW1lLm1ha2UudGV4dCgwLCAwLCAncGxhY2Vob2xkZXIgdGV4dCcsIGJvZHlTdHlsZSkpKTtcbiAgdGhpcy5kaWFsb2dUZXh0LmRpc3BsYXlPYmplY3QubGluZVNwYWNpbmcgPSAwO1xuXG4gIHRoaXMuZGlhbG9nUGFuZWwuYWRkKG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdCgwLCAwLCB0aGlzLl9zY3JvbGxNYXNrKSk7XG4gIHRoaXMuZGlhbG9nVGV4dC5kaXNwbGF5T2JqZWN0Lm1hc2sgPSB0aGlzLl9zY3JvbGxNYXNrO1xuXG4gIHRoaXMuZGlhbG9nUGFuZWwuYWxwaGEgPSAwLjg7XG5cbiAgLy8gZm9yIHJlbW92aW5nIHBsYXllciBjaG9pY2UgYnV0dG9uc1xuICB0aGlzLmJ1dHRvbnMgPSBbXTtcbiAgdGhpcy5idXR0b25Ud2VlbnMgPSBbXTtcbiAgLy8gc2xpZGVyIGZvciBzY3JvbGxpbmcgb3ZlcmZsb3dcbiAgdGhpcy5zbGlkZXIgPSBudWxsO1xuICAvLyBzdG9yZXMgZWFjaCBidXR0b24gWSB2YWx1ZVxuICAvLyBhbHNvIGtlZXBzIHRyYWNrIG9mIGhvdyBsb3cgb3VyIGNvbnRlbnQgZ29lczsgbGFzdCBlbGVtZW50IGlzIGNvbnRlbnQgYm90dG9tXG4gIHRoaXMuX2J1dHRvbnNZID0gW107XG5cbiAgLy9mb3Iga2VlcGluZyB0cmFjayBvZiB3aGV0aGVyIHRoZSBhdmF0YXIgbmVlZHMgdG8gYmUgdXBkYXRlZCAocGVyZm9ybWFuY2UgaW50ZW5zaXZlKVxuICB0aGlzLmF2YXRhck5hbWUgPSAnaW52aXNpYmxlJztcblxuICAvLyB3aWxsIHRyYWNrIHRoZSBjb252ZXJzYXRpb24gZmlsZSwgc28gdGhhdCBzYXZlIGNoZWNrcG9pbnRzIHdpbGxcbiAgLy8gZ28gdG8gdGhlIGNvcnJlY3QgYXJlYSBpbiB0aGUgY29udmVyc2F0aW9uXG4gIHRoaXMuY29udm9GaWxlID0gbnVsbDtcblxuICAvLyBmb3IgcmVuZGVyaW5nIGxpbmVzIGNoYXJhY3RlciBieSBjaGFyYWN0ZXJcbiAgdGhpcy5jaGFyVGltZXIgPSBudWxsO1xufVxuXG5EaWFsb2d1ZVdpbmRvdy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5Hcm91cC5wcm90b3R5cGUpO1xuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gRGlhbG9ndWVXaW5kb3c7XG5cbkRpYWxvZ3VlV2luZG93LnByb3RvdHlwZS5iZWdpbiA9IGZ1bmN0aW9uKGpzb25LZXkpIHtcbiAgaWYgKGpzb25LZXkpIHtcbiAgICB0aGlzLmNvbnZvRmlsZSA9IGpzb25LZXk7XG4gICAgdGhpcy5jb252b01hbmFnZXIubG9hZEpTT05Db252ZXJzYXRpb24oanNvbktleSk7XG4gICAgdGhpcy5zaG93KCk7XG4gICAgdGhpcy5kaXNwbGF5KCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5oaWRlKCk7XG4gIH1cbn07XG5cbkRpYWxvZ3VlV2luZG93LnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKGRpc3BsYXlzSW5zdGFudCA9IGZhbHNlIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogYnkgZGVmYXVsdCwgbm90IHNldCB0byBkaXNwbGF5IHRleHQgaW5zdGFudGx5ICovKSB7XG4gIHRoaXMuY2xlYW5XaW5kb3coKTtcbiAgaWYgKHRoaXMuY29udm9GaWxlKSB7XG4gICAgdGhpcy50YWtlQWN0aW9ucygpO1xuICAgIHRoaXMuZGlzcGxheUF2YXRhcigpO1xuXG4gICAgLy8gT24gZmluaXNoaW5nIHRoZSBkaWFsb2cgdGV4dCBkaXNwbGF5LCBkaXNwbGF5IG91ciByZXNwb25zZXNcbiAgICAvLyBBZGRlZCBiZWZvcmUgb3VyIGFjdHVhbCBkaXNwbGF5IGNhbGwgaW4gY2FzZSB3ZSBkaXNwbGF5IGluc3RhbnRseVxuICAgIHRoaXMuX29uRGlhbG9nVGV4dEZpbmlzaGVkLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmRpc3BsYXlSZXNwb25zZXMoKTtcbiAgICAgIHRoaXMuX29uRGlhbG9nVGV4dEZpbmlzaGVkLnJlbW92ZUFsbCgpO1xuICAgIH0sIHRoaXMpO1xuICAgIHRoaXMuZGlzcGxheVRleHQoZGlzcGxheXNJbnN0YW50KTtcbiAgfVxufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLmNsZWFuV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICAvLyBzdG9wIGFsbCBidXR0b24gdHdlZW5zXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5idXR0b25Ud2VlbnMubGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLmJ1dHRvblR3ZWVuc1tpXS5zdG9wKCk7XG4gIH1cblxuICAvLyByZW1vdmUgYWxsIGJ1dHRvbnNcbiAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmJ1dHRvbnMubGVuZ3RoOyBqKyspIHtcbiAgICB2YXIgYnV0dG9uID0gdGhpcy5idXR0b25zW2pdO1xuICAgIGJ1dHRvbi5jb250YWluZXIuZGlzcGxheUdyb3VwLnJlbW92ZUFsbCh0cnVlKTtcbiAgICBidXR0b24uY29udGFpbmVyLmRpc3BsYXlHcm91cC5kZXN0cm95KCk7XG4gICAgYnV0dG9uLmNvbnRhaW5lci5jaGlsZHJlbiA9IFtdO1xuICAgIGJ1dHRvbi5jb250YWluZXIgPSB1bmRlZmluZWQ7XG4gICAgYnV0dG9uLnNwcml0ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICB0aGlzLmJ1dHRvbnMgPSBbXTtcbiAgdGhpcy5fYnV0dG9uc1kgPSBbXTtcblxuICAvLyByZW1vdmUgc2Nyb2xsZXIgYW5kIHJlc3RvcmUgZGlhbG9nIHRleHQgcG9zaXRpb25cbiAgaWYgKHRoaXMuc2xpZGVyICE9PSBudWxsKSB7XG4gICAgdGhpcy5zbGlkZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuc2xpZGVyID0gbnVsbDtcbiAgfVxuICB0aGlzLmRpYWxvZ1RleHQueSA9IHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5ZO1xuICB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC5pbnB1dEVuYWJsZWQgPSBmYWxzZTtcbiAgdGhpcy5kaWFsb2dUZXh0LmRpc3BsYXlPYmplY3QuZXZlbnRzLm9uSW5wdXRPdmVyLnJlbW92ZUFsbCgpO1xuICB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC5ldmVudHMub25JbnB1dE91dC5yZW1vdmVBbGwoKTtcbiAgdGhpcy5fZ2FtZS5pbnB1dC5tb3VzZS5tb3VzZVdoZWVsQ2FsbGJhY2sgPSBudWxsO1xufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLnRha2VBY3Rpb25zID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY29udm9NYW5hZ2VyLnRha2VBY3Rpb25zKHRoaXMuX2dhbWUpO1xufTtcblxuLy8gaWYgYXZhdGFyIG5lZWRzIHRvIGNoYW5nZSwgZmFkZSBvdXQgdGhlIGN1cnJlbnQgb25lIGFuZCBmYWRlIGluIHRoZSBuZXcgb25lXG5EaWFsb2d1ZVdpbmRvdy5wcm90b3R5cGUuZGlzcGxheUF2YXRhciA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3BlYWtlciA9IHRoaXMuY29udm9NYW5hZ2VyLmdldEF2YXRhcigpO1xuICB2YXIgZmFkZU91dCA9IDIwMDtcbiAgdmFyIGZhZGVJbiA9IDIwMDtcbiAgaWYgKHNwZWFrZXIgIT09IHRoaXMuYXZhdGFyTmFtZSkge1xuICAgIHZhciBmYWRlSW5Ud2VlbiA9IHRoaXMuX2dhbWUuYWRkLnR3ZWVuKHRoaXMuYXZhdGFyKTtcbiAgICBmYWRlSW5Ud2Vlbi50byh7YWxwaGE6IDB9LCBmYWRlT3V0LCBQaGFzZXIuRWFzaW5nLkxpbmVhci5Ob25lLCB0cnVlKTtcbiAgICBmYWRlSW5Ud2Vlbi5vbkNvbXBsZXRlLmFkZChmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuYXZhdGFyLmRpc3BsYXlPYmplY3QubG9hZFRleHR1cmUoc3BlYWtlcik7XG4gICAgICB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzLmF2YXRhcikudG8oe2FscGhhOiAxfSwgZmFkZUluLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5Ob25lLCB0cnVlKTtcbiAgICB9LCB0aGlzKTtcbiAgICB0aGlzLmF2YXRhck5hbWUgPSBzcGVha2VyO1xuICB9XG59O1xuXG5EaWFsb2d1ZVdpbmRvdy5wcm90b3R5cGUuZGlzcGxheVRleHQgPSBmdW5jdGlvbiAoZGlzcGxheXNJbnN0YW50KSB7XG4gIHRoaXMuc3BlYWtlclRleHQuZGlzcGxheU9iamVjdC50ZXh0ID0gdGhpcy5jb252b01hbmFnZXIuZ2V0U3BlYWtlcigpLnRvVXBwZXJDYXNlKCk7XG4gIHRoaXMuZGlhbG9nVGV4dC5kaXNwbGF5T2JqZWN0Lm1hc2sgPSB0aGlzLl9zY3JvbGxNYXNrO1xuXG4gIGlmIChkaXNwbGF5c0luc3RhbnQpIHtcbiAgICB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC50ZXh0ID0gdGhpcy5jb252b01hbmFnZXIuZ2V0Q3VycmVudFRleHQoKTtcbiAgICBpZiAodGhpcy5jaGFyVGltZXIgIT0gbnVsbCkge1xuICAgICAgdGhpcy5fZ2FtZS50aW1lLmV2ZW50cy5yZW1vdmUodGhpcy5jaGFyVGltZXIpOyAgLy8gc3RvcCBjaGFyYWN0ZXJzIGZyb20gcmVuZGVyaW5nIG9uZSBieSBvbmUsIGlmIHRoZXkgYXJlIGN1cnJlbnRseSByZW5kZXJpbmdcbiAgICB9XG4gICAgdGhpcy5fb25EaWFsb2dUZXh0RmluaXNoZWQuZGlzcGF0Y2goKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBjaGFyYWN0ZXItYnktY2hhcmFjdGVyIGRpc3BsYXlcbiAgdGhpcy5kaXNwbGF5Q3VycmVudExpbmUoKTtcbiAgXG59O1xuXG5EaWFsb2d1ZVdpbmRvdy5wcm90b3R5cGUuZGlzcGxheVJlc3BvbnNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gc3RhcnQgcmVuZGVyaW5nIGJ1dHRvbnMgYXQgdGhlIGJvdHRvbSBvZiBkaWFsb2d1ZVxuICB2YXIgcmVzcG9uc2VzID0gdGhpcy5jb252b01hbmFnZXIuZ2V0UmVzcG9uc2VzKHRoaXMuX2dhbWUpO1xuXG4gIHZhciB0ZXh0Qm90dG9tID0gdGhpcy5fZGlhbG9nVGV4dE9yaWdpblkgKyB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC5nZXRCb3VuZHMoKS5oZWlnaHQ7XG4gIHRoaXMubmV4dEJ1dHRvblkgPSB0ZXh0Qm90dG9tO1xuXG4gIGlmIChyZXNwb25zZXMubGVuZ3RoID09PSAwKSB7XG4gICAgLy8gbm8gcmVzcG9uc2VzIC0gd2FpdGluZyBvbiBwbGF5ZXIgdG8gZG8gc29tZXRoaW5nIHRvIHByb2dyZXNzXG4gICAgdmFyIHdhaXRCdXR0b24gPSB0aGlzLmFkZENob2ljZUJ1dHRvbih0aGlzLl9kaWFsb2dUZXh0T3JpZ2luWCwgdGhpcy5uZXh0QnV0dG9uWSxcbiAgICAgICdFTkQnLCBudWxsKTtcbiAgICB3YWl0QnV0dG9uLnZpc2libGUgPSBmYWxzZTtcbiAgICB0aGlzLmJ1dHRvbnMucHVzaCh3YWl0QnV0dG9uKTtcbiAgfVxuXG4gIHRoaXMuYnV0dG9uVHdlZW5zID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcmVzcG9uc2VEZWxheSA9IDI1MDtcbiAgICB2YXIgYnV0dG9uID0gdGhpcy5hZGRDaG9pY2VCdXR0b24oXG4gICAgICB0aGlzLl9kaWFsb2dUZXh0T3JpZ2luWCwgdGhpcy5uZXh0QnV0dG9uWSxcbiAgICAgIHJlc3BvbnNlc1tpXVsndGV4dCddLCByZXNwb25zZXNbaV1bJ3RhcmdldCddKTtcbiAgICBidXR0b24uYWxwaGEgPSAwO1xuICAgIHZhciB0d2VlbiA9IHRoaXMuX2dhbWUuYWRkLnR3ZWVuKGJ1dHRvbikudG8oe2FscGhhOiAxfSwgcmVzcG9uc2VEZWxheSwgUGhhc2VyLkVhc2luZy5MaW5lYXIuTm9uZSwgdHJ1ZSwgcmVzcG9uc2VEZWxheSAqIGkpO1xuICAgIGlmIChpID09PSByZXNwb25zZXMubGVuZ3RoIC0gMSkge1xuICAgICAgdHdlZW4ub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuYWRkT3ZlcmZsb3dTY3JvbGwoKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmJ1dHRvblR3ZWVucy5wdXNoKHR3ZWVuKTsgIC8vIGZvciBkZWxldGlvbiBsYXRlclxuICAgIHRoaXMuYnV0dG9ucy5wdXNoKGJ1dHRvbik7XG4gICAgdGhpcy5fYnV0dG9uc1kucHVzaChidXR0b24ueSk7XG4gICAgdGhpcy5uZXh0QnV0dG9uWSArPSBidXR0b24uc3ByaXRlLmhlaWdodDtcbiAgfVxuXG4gIC8vIGxhc3QgZWxlbWVudCBpcyBib3R0b20gb2YgY29udGVudFxuICB0aGlzLl9idXR0b25zWS5wdXNoKHRoaXMubmV4dEJ1dHRvblkpO1xufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLmFkZENob2ljZUJ1dHRvbiA9IGZ1bmN0aW9uICh4LCB5LCByZXNwb25zZVRleHRGaWVsZCwgcmVzcG9uc2VUYXJnZXQpIHtcbiAgLy8gZGlzcGxheSB0ZXh0XG4gIHZhciBidXR0b25TaWRlUGFkZGluZyA9IDMyO1xuICB2YXIgYnV0dG9uVGV4dFN0eWxlID0gdGV4dHN0eWxlc1snY2hvaWNlQnV0dG9uJ107XG4gIGJ1dHRvblRleHRTdHlsZS53b3JkV3JhcFdpZHRoID0gdGhpcy5fZGlhbG9nVGV4dFdpZHRoIC0gYnV0dG9uU2lkZVBhZGRpbmc7XG4gIHZhciByZXNwb25zZVRleHQgPSB0aGlzLl9nYW1lLm1ha2UudGV4dCgwLCAwLCByZXNwb25zZVRleHRGaWVsZCwgYnV0dG9uVGV4dFN0eWxlKTtcbiAgdmFyIGJ1dHRvblRleHQgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgTWF0aC5yb3VuZCh0aGlzLl9kaWFsb2dUZXh0V2lkdGggLyAyIC0gcmVzcG9uc2VUZXh0LndpZHRoIC8gMiksMCwgLyogY2VudGVyIHRleHQgKi9cbiAgICByZXNwb25zZVRleHQpO1xuXG4gIC8vIGFkZCB0byBzaXplZCBidXR0b25cbiAgdmFyIGNob2ljZUJ1dHRvbjtcbiAgdGhpcy5kaWFsb2dQYW5lbC5hZGQoY2hvaWNlQnV0dG9uID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KFxuICAgIHgsIHksXG4gICAgdGhpcy5fZ2FtZS5tYWtlLmJ1dHRvbigwLDAsICdkaWFsb2d1ZS1jaG9pY2UtYnV0dG9uJyksXG4gICAgdGhpcy5kaWFsb2dXaWR0aCwgcmVzcG9uc2VUZXh0LmhlaWdodCkpO1xuICBjaG9pY2VCdXR0b24uYWRkKGJ1dHRvblRleHQpO1xuICBjaG9pY2VCdXR0b24uc3ByaXRlLndpZHRoID0gdGhpcy5fZGlhbG9nVGV4dFdpZHRoO1xuICBjaG9pY2VCdXR0b24uc3ByaXRlLmhlaWdodCA9IHJlc3BvbnNlVGV4dC5oZWlnaHQ7XG5cbiAgLy8gZW5kIG9mIGNvbnZlcnNhdGlvbi4gYWN0aW9uIGRlbGV0ZXMgd2luZG93XG4gIGlmIChyZXNwb25zZVRhcmdldCA8IDApIHtcbiAgICBjaG9pY2VCdXR0b24uZXZlbnRzLm9uSW5wdXRVcC5hZGQoXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGlhbG9ndWVXaW5kb3cuaGlkZSgpO1xuICAgICAgICB0aGlzLmRpYWxvZ3VlV2luZG93LmNvbnZvTWFuYWdlci5lbmRDb252ZXJzYXRpb24oKTsgIC8vIHRha2UgYW55IGFjdGlvbnMgdGhhdCB0cmlnZ2VyIHdoZW4gdGhpcyBjb252ZXJzYXRpb24gZW5kc1xuICAgICAgfSwge2RpYWxvZ3VlV2luZG93OiB0aGlzfSk7XG4gIH1cblxuICBjaG9pY2VCdXR0b24uZXZlbnRzLm9uSW5wdXRVcC5hZGQoXG4gICAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNob3VsZFJlZnJlc2ggPSB0aGlzLmRpYWxvZ3VlV2luZG93LmNvbnZvTWFuYWdlci5hZHZhbmNlVG9UYXJnZXQocmVzcG9uc2VUYXJnZXQpO1xuICAgICAgaWYgKHNob3VsZFJlZnJlc2gpXG4gICAgICAgIHRoaXMuZGlhbG9ndWVXaW5kb3cuZGlzcGxheSgpO1xuICAgIH0sIHtkaWFsb2d1ZVdpbmRvdzogdGhpcywgcmVzcG9uc2VUYXJnZXQ6IHJlc3BvbnNlVGFyZ2V0fSk7XG4gIC8vIGFkZCBtYXNrXG4gIGNob2ljZUJ1dHRvbi5zcHJpdGUubWFzayA9IHRoaXMuX3Njcm9sbE1hc2s7XG4gIGJ1dHRvblRleHQuZGlzcGxheU9iamVjdC5tYXNrID0gdGhpcy5fc2Nyb2xsTWFzaztcblxuICByZXR1cm4gY2hvaWNlQnV0dG9uO1xufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLmFkZE92ZXJmbG93U2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAvLyBjYW4gd2UgZml0IGV2ZXJ5dGhpbmcgaW4gdGhlIGN1cnJlbnQgd2luZG93P1xuICB2YXIgaGVpZ2h0RGlmZiA9IHRoaXMuX2J1dHRvbnNZW3RoaXMuX2J1dHRvbnNZLmxlbmd0aCAtIDFdXG4gICAgLSAodGhpcy5fZGlhbG9nVGV4dE9yaWdpblkgKyB0aGlzLl9kaWFsb2dUZXh0SGVpZ2h0KTtcbiAgLy8gYWRkIGEgc2xpZGVyIG90aGVyd2lzZVxuICBpZiAoaGVpZ2h0RGlmZiA+IDApIHtcblxuICAgIHZhciBzY3JvbGxsaW5lV2lkdGggPSAxLjU7XG4gICAgdGhpcy5zbGlkZXIgPSBuZXcgU2Nyb2xsYmFyKFxuICAgICAgdGhpcy5fZ2FtZSxcbiAgICAgIHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5YICsgdGhpcy5fZGlhbG9nVGV4dFdpZHRoICsgdGhpcy5fZGlhbG9nUGFkZGluZyAtIHNjcm9sbGxpbmVXaWR0aCxcbiAgICAgIHRoaXMuX2RpYWxvZ1RleHRPcmlnaW5ZIC0gc2Nyb2xsbGluZVdpZHRoLFxuICAgICAgdGhpcy5kaWFsb2dQYW5lbCwgLy8gcGFyZW50XG4gICAgICB7XG4gICAgICAgICd4JzogWzAsIHRoaXMuX2RpYWxvZ1BhZGRpbmcsIDBdLFxuICAgICAgICAneSc6IFswLCB0aGlzLl9kaWFsb2dUZXh0SGVpZ2h0IC8gMiwgdGhpcy5fZGlhbG9nVGV4dEhlaWdodF1cbiAgICAgIH0sXG4gICAgICBoZWlnaHREaWZmLCBzY3JvbGxsaW5lV2lkdGgpO1xuXG4gICAgdmFyIHNjcm9sbENhbGxiYWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAvLyBtYXBwaW5nIGhlaWdodCBkaWZmZXJlbmNlcyB0byBzY3JvbGwgdmFsdWVzXG4gICAgICB2YXIgc2Nyb2xsVmFsdWUgPSBoZWlnaHREaWZmKnZhbHVlO1xuICAgICAgdGhpcy5kaWFsb2dUZXh0LnkgPSB0aGlzLl9kaWFsb2dUZXh0T3JpZ2luWSAtIHNjcm9sbFZhbHVlO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJ1dHRvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gc2xpZGUgYWxsIGJ1dHRvbnMgdXBcbiAgICAgICAgdGhpcy5idXR0b25zW2ldLnkgPSB0aGlzLmRpYWxvZ1BhbmVsLnkgKyB0aGlzLl9idXR0b25zWVtpXSAtIHNjcm9sbFZhbHVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnNsaWRlci5vbkRyYWcuYWRkKHNjcm9sbENhbGxiYWNrLCB0aGlzKTtcbiAgICB0aGlzLnNsaWRlci5vblNldFZhbHVlLmFkZChzY3JvbGxDYWxsYmFjaywgdGhpcyk7XG5cbiAgICAvLyBNb3VzZSB3aGVlbCBldmVudHNcbiAgICB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuZGlhbG9nVGV4dC5kaXNwbGF5T2JqZWN0LmV2ZW50cy5vbklucHV0T3Zlci5hZGQoXG4gICAgICBmdW5jdGlvbiAoKSB7IHRoaXMuX2RpYWxvZ092ZXIgPSB0cnVlOyB9LCB0aGlzKTtcbiAgICB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC5ldmVudHMub25JbnB1dE91dC5hZGQoXG4gICAgICBmdW5jdGlvbiAoKSB7IHRoaXMuX2RpYWxvZ092ZXIgPSBmYWxzZTsgfSwgdGhpcyk7XG4gICAgdGhpcy5fZ2FtZS5pbnB1dC5tb3VzZS5tb3VzZVdoZWVsQ2FsbGJhY2sgPSAoZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoIXRoaXMuX2RpYWxvZ092ZXIpXG4gICAgICAgIHJldHVybjtcbiAgICAgIHRoaXMuc2xpZGVyLnZhbHVlICs9ICgxL2hlaWdodERpZmYpICogZXZlbnQuZGVsdGFZO1xuICAgIH0pLmJpbmQodGhpcyk7XG4gIH1cbn07XG5cbkRpYWxvZ3VlV2luZG93LnByb3RvdHlwZS5zaG93QXZhdGFyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBmYWRlSW5Ud2VlbiA9IHRoaXMuX2dhbWUuYWRkLnR3ZWVuKHRoaXMuYXZhdGFyKTtcbiAgdmFyIGZhZGVJbiA9IDIwMDtcbiAgZmFkZUluVHdlZW4udG8oe2FscGhhOiAxfSwgZmFkZUluLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5Ob25lLCB0cnVlKTtcbn07XG5cbkRpYWxvZ3VlV2luZG93LnByb3RvdHlwZS5oaWRlQXZhdGFyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBmYWRlT3V0VHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzLmF2YXRhcik7XG4gIHZhciBmYWRlT3V0ID0gMjAwO1xuICBmYWRlT3V0VHdlZW4udG8oe2FscGhhOiAwfSwgZmFkZU91dCwgUGhhc2VyLkVhc2luZy5MaW5lYXIuTm9uZSwgdHJ1ZSk7XG59O1xuXG5EaWFsb2d1ZVdpbmRvdy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRpYWxvZ1BhbmVsLnZpc2libGUgPSB0cnVlO1xuICB0aGlzLnNob3dBdmF0YXIoKTtcbn07XG5cbkRpYWxvZ3VlV2luZG93LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNsZWFuV2luZG93KCk7XG4gIHRoaXMuZGlhbG9nUGFuZWwudmlzaWJsZSA9IGZhbHNlO1xuICB0aGlzLmhpZGVBdmF0YXIoKTsgLy9oaWRlIGF2YXRhclxufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLmRpc3BsYXlDdXJyZW50TGluZSA9IGZ1bmN0aW9uICgpIHtcblxuICB2YXIgbGluZSA9IHRoaXMuY29udm9NYW5hZ2VyLmdldEN1cnJlbnRUZXh0KCk7XG4gIHRoaXMuZGlhbG9nVGV4dC5kaXNwbGF5T2JqZWN0LnRleHQgPSAnJztcblxuICAvLyAgU3BsaXQgdGhlIGN1cnJlbnQgbGluZSBvbiBjaGFyYWN0ZXJzLCBzbyBvbmUgY2hhciBwZXIgYXJyYXkgZWxlbWVudFxuICB2YXIgc3BsaXQgPSBsaW5lLnNwbGl0KCcnKTtcblxuICAvLyAgUmVzZXQgdGhlIHdvcmQgaW5kZXggdG8gemVybyAodGhlIGZpcnN0IHdvcmQgaW4gdGhlIGxpbmUpXG4gIHRoaXMuX2NJbmRleCA9IDA7XG4gIC8vIFRPRE86IG1ha2UgdGhpcyBhIHNlbGVjdGFibGUgb3B0aW9uXG4gIC8vdmFyIGNoYXJEZWxheSA9IDM7XG5cbiAgLy8gQWRkIGFuIG9wdGlvbiB0byBza2lwIHRoZSB0ZXh0IG9uIGNsaWNraW5nIGRvd24uXG4gIHRoaXMuZGlhbG9nUGFuZWwuZGlzcGxheU9iamVjdC5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICB0aGlzLmRpYWxvZ1BhbmVsLmV2ZW50cy5vbklucHV0RG93bi5hZGQodGhpcy5za2lwVGV4dCwgdGhpcyk7XG5cbiAgdmFyIG5leHRDaGFyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkZWxheSA9IDM7XG4gICAgdGhpcy5kaWFsb2dUZXh0LmRpc3BsYXlPYmplY3QudGV4dCA9XG4gICAgICB0aGlzLmRpYWxvZ1RleHQuZGlzcGxheU9iamVjdC50ZXh0LmNvbmNhdChzcGxpdFt0aGlzLl9jSW5kZXhdKTtcbiAgICBpZiAoc3BsaXRbdGhpcy5fY0luZGV4XSA9PT0gJywnKSB7XG4gICAgICBkZWxheSA9IDIwMDsgICAgLy8gYnJpZWYgcGF1c2Ugb24gY29tbWFzXG4gICAgfSBlbHNlIGlmIChbJy4nLCAnPycsICchJ10uaW5kZXhPZihzcGxpdFt0aGlzLl9jSW5kZXhdKSA+IC0xKSB7XG4gICAgICBkZWxheSA9IDMwMDsgICAgLy8gbG9uZ2VyIHBhdXNlIGFmdGVyIGVhY2ggc2VudGVuY2VcbiAgICB9XG4gICAgdGhpcy5fY0luZGV4Kys7XG4gICAgaWYgKHRoaXMuX2NJbmRleCA9PSBzcGxpdC5sZW5ndGgpIHtcbiAgICAgIC8vIFRlbGwgdGhlIHdpbmRvdyB3aGVuIHdlJ3JlIGRvbmVcbiAgICAgIHRoaXMuX29uRGlhbG9nVGV4dEZpbmlzaGVkLmRpc3BhdGNoKCk7XG4gICAgICB0aGlzLmNoYXJUaW1lciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFkZCB0aGUgbmV4dCBldmVudCBpbiB0aGUgY2hhaW5cbiAgICAgIHRoaXMuY2hhclRpbWVyID0gdGhpcy5fZ2FtZS50aW1lLmV2ZW50cy5hZGQoZGVsYXksIG5leHRDaGFyLCB0aGlzKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gIENhbGwgdGhlICduZXh0Q2hhcicgZnVuY3Rpb24gYW5kIGNoYWluIHVudGlsIGl0IHJlYWNoZXMgdGhlIGVuZCBvZiB0aGUgbGluZVxuICB0aGlzLmNoYXJUaW1lciA9IHRoaXMuX2dhbWUudGltZS5ldmVudHMuYWRkKDAsIG5leHRDaGFyLCB0aGlzKTtcblxufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLnNraXBUZXh0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9nYW1lLnRpbWUucmVtb3ZlQWxsKCk7XG4gIHRoaXMuZGlzcGxheVRleHQodHJ1ZSk7XG4gIHRoaXMuZGlhbG9nUGFuZWwuZXZlbnRzLm9uSW5wdXREb3duLnJlbW92ZUFsbCgpO1xufTtcblxuRGlhbG9ndWVXaW5kb3cucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gVE9ETzogU3R1Yi5cbn07XG4iLCIvKipcbkNvcHlyaWdodCAoYykgMjAxNSBCZWxhaGNlbiBNYXJ3YW5lIChiLm1hcndhbmVAZ21haWwuY29tKVxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG5vZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXG5jb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXNcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cblRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxuU09GVFdBUkUuXG4qL1xuXG52YXIgSGVhbHRoQmFyID0gZnVuY3Rpb24oZ2FtZSwgcHJvdmlkZWRDb25maWcpIHtcbiAgdGhpcy5nYW1lID0gZ2FtZTtcblxuICB0aGlzLnNldHVwQ29uZmlndXJhdGlvbihwcm92aWRlZENvbmZpZyk7XG4gIHRoaXMuc2V0UG9zaXRpb24odGhpcy5jb25maWcueCwgdGhpcy5jb25maWcueSk7XG4gIHRoaXMuZHJhd0JhY2tncm91bmQoKTtcbiAgdGhpcy5kcmF3SGVhbHRoQmFyKCk7XG4gIHRoaXMuc2V0Rml4ZWRUb0NhbWVyYSh0aGlzLmNvbmZpZy5pc0ZpeGVkVG9DYW1lcmEpO1xufTtcbkhlYWx0aEJhci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBIZWFsdGhCYXI7XG5cbkhlYWx0aEJhci5wcm90b3R5cGUuc2V0dXBDb25maWd1cmF0aW9uID0gZnVuY3Rpb24gKHByb3ZpZGVkQ29uZmlnKSB7XG4gIHRoaXMuY29uZmlnID0gdGhpcy5tZXJnZVdpdGhEZWZhdWx0Q29uZmlndXJhdGlvbihwcm92aWRlZENvbmZpZyk7XG4gIHRoaXMuZmxpcHBlZCA9IHRoaXMuY29uZmlnLmZsaXBwZWQ7XG59O1xuXG5IZWFsdGhCYXIucHJvdG90eXBlLm1lcmdlV2l0aERlZmF1bHRDb25maWd1cmF0aW9uID0gZnVuY3Rpb24obmV3Q29uZmlnKSB7XG4gIHZhciBkZWZhdWx0Q29uZmlnPSB7XG4gICAgd2lkdGg6IDI1MCxcbiAgICBoZWlnaHQ6IDQwLFxuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICBiZzoge1xuICAgICAgY29sb3I6ICcjODA4MDgwJ1xuICAgIH0sXG4gICAgYmFyOiB7XG4gICAgICBjb2xvcjogJyM2NTE4MjgnXG4gICAgfSxcbiAgICBhbmltYXRpb25EdXJhdGlvbjogMjAwLFxuICAgIGZsaXBwZWQ6IGZhbHNlLFxuICAgIGlzRml4ZWRUb0NhbWVyYTogZmFsc2VcbiAgfTtcbiAgICBcbiAgaWYobmV3Q29uZmlnLmZsaXBwZWQpIHtcbiAgICBkZWZhdWx0Q29uZmlnLmJnLmNvbG9yID0gJyM2NTE4MjgnO1xuICAgIGRlZmF1bHRDb25maWcuYmFyLmNvbG9yID0gJyM4MDgwODAnO1xuICB9XG4gICAgXG4gIHJldHVybiBtZXJnZU9iamVjdHMoZGVmYXVsdENvbmZpZywgbmV3Q29uZmlnKTtcbn07XG5cbmZ1bmN0aW9uIG1lcmdlT2JqZWN0cyh0YXJnZXRPYmosIG5ld09iaikge1xuICBmb3IgKHZhciBwIGluIG5ld09iaikge1xuICAgIHRyeSB7XG4gICAgICB0YXJnZXRPYmpbcF0gPSBuZXdPYmpbcF0uY29uc3RydWN0b3I9PU9iamVjdCA/IG1lcmdlT2JqZWN0cyh0YXJnZXRPYmpbcF0sIG5ld09ialtwXSkgOiBuZXdPYmpbcF07XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICB0YXJnZXRPYmpbcF0gPSBuZXdPYmpbcF07XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXRPYmo7XG59XG5cbkhlYWx0aEJhci5wcm90b3R5cGUuZHJhd0JhY2tncm91bmQgPSBmdW5jdGlvbigpIHtcblxuICB2YXIgYm1kID0gdGhpcy5nYW1lLmFkZC5iaXRtYXBEYXRhKHRoaXMuY29uZmlnLndpZHRoLCB0aGlzLmNvbmZpZy5oZWlnaHQpO1xuICBibWQuY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29uZmlnLmJnLmNvbG9yO1xuICBibWQuY3R4LmJlZ2luUGF0aCgpO1xuICBibWQuY3R4LnJlY3QoMCwgMCwgdGhpcy5jb25maWcud2lkdGgsIHRoaXMuY29uZmlnLmhlaWdodCk7XG4gIGJtZC5jdHguZmlsbCgpO1xuXG4gIHRoaXMuYmdTcHJpdGUgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLngsIHRoaXMueSwgYm1kKTtcbiAgdGhpcy5iZ1Nwcml0ZS5hbmNob3Iuc2V0KDAuNSk7XG5cbiAgaWYodGhpcy5mbGlwcGVkKXtcbiAgICB0aGlzLmJnU3ByaXRlLnNjYWxlLnggPSAtMTtcbiAgfVxufTtcblxuSGVhbHRoQmFyLnByb3RvdHlwZS5kcmF3SGVhbHRoQmFyID0gZnVuY3Rpb24oKSB7XG4gIHZhciBibWQgPSB0aGlzLmdhbWUuYWRkLmJpdG1hcERhdGEodGhpcy5jb25maWcud2lkdGgsIHRoaXMuY29uZmlnLmhlaWdodCk7XG4gIGJtZC5jdHguZmlsbFN0eWxlID0gdGhpcy5jb25maWcuYmFyLmNvbG9yO1xuICBibWQuY3R4LmJlZ2luUGF0aCgpO1xuICBibWQuY3R4LnJlY3QoMCwgMCwgdGhpcy5jb25maWcud2lkdGgsIHRoaXMuY29uZmlnLmhlaWdodCk7XG4gIGJtZC5jdHguZmlsbCgpO1xuXG4gIHRoaXMuYmFyU3ByaXRlID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy54IC0gdGhpcy5iZ1Nwcml0ZS53aWR0aC8yLCB0aGlzLnksIGJtZCk7XG4gIHRoaXMuYmFyU3ByaXRlLmFuY2hvci55ID0gMC41O1xuXG4gIGlmKHRoaXMuZmxpcHBlZCl7XG4gICAgdGhpcy5iYXJTcHJpdGUuc2NhbGUueCA9IC0xO1xuICB9XG59O1xuXG5IZWFsdGhCYXIucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgdGhpcy54ID0geDtcbiAgdGhpcy55ID0geTtcblxuICBpZih0aGlzLmJnU3ByaXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5iYXJTcHJpdGUgIT09IHVuZGVmaW5lZCl7XG4gICAgdGhpcy5iZ1Nwcml0ZS5wb3NpdGlvbi54ID0geDtcbiAgICB0aGlzLmJnU3ByaXRlLnBvc2l0aW9uLnkgPSB5O1xuXG4gICAgdGhpcy5iYXJTcHJpdGUucG9zaXRpb24ueCA9IHggLSB0aGlzLmNvbmZpZy53aWR0aC8yO1xuICAgIHRoaXMuYmFyU3ByaXRlLnBvc2l0aW9uLnkgPSB5O1xuICB9XG59O1xuXG5cbkhlYWx0aEJhci5wcm90b3R5cGUuc2V0UGVyY2VudCA9IGZ1bmN0aW9uKG5ld1ZhbHVlKXtcbiAgaWYgKG5ld1ZhbHVlIDwgMCkgbmV3VmFsdWUgPSAwO1xuICBpZiAobmV3VmFsdWUgPiAxMDApIG5ld1ZhbHVlID0gMTAwO1xuXG4gIHZhciBuZXdXaWR0aCA9IChuZXdWYWx1ZSAqIHRoaXMuY29uZmlnLndpZHRoKSAvIDEwMDtcblxuICB0aGlzLnNldFdpZHRoKG5ld1dpZHRoKTtcbn07XG5cbkhlYWx0aEJhci5wcm90b3R5cGUuc2V0V2lkdGggPSBmdW5jdGlvbihuZXdXaWR0aCl7XG4gIGlmICh0aGlzLmZsaXBwZWQpIHtcbiAgICBuZXdXaWR0aCA9IC0xICogbmV3V2lkdGg7XG4gIH1cbiAgdGhpcy5nYW1lLmFkZC50d2Vlbih0aGlzLmJhclNwcml0ZSkudG8oIHsgd2lkdGg6IG5ld1dpZHRoIH0sIHRoaXMuY29uZmlnLmFuaW1hdGlvbkR1cmF0aW9uLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5Ob25lLCB0cnVlKTtcbn07XG5cbkhlYWx0aEJhci5wcm90b3R5cGUuc2V0Rml4ZWRUb0NhbWVyYSA9IGZ1bmN0aW9uKGZpeGVkVG9DYW1lcmEpIHtcbiAgdGhpcy5iZ1Nwcml0ZS5maXhlZFRvQ2FtZXJhID0gZml4ZWRUb0NhbWVyYTtcbiAgdGhpcy5iYXJTcHJpdGUuZml4ZWRUb0NhbWVyYSA9IGZpeGVkVG9DYW1lcmE7XG59O1xuXG5IZWFsdGhCYXIucHJvdG90eXBlLmtpbGwgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5iZ1Nwcml0ZS5raWxsKCk7XG4gIHRoaXMuYmFyU3ByaXRlLmtpbGwoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSGVhbHRoQmFyO1xuIiwiLypcbiAqIEljb25cbiAqID09PT1cbiAqXG4gKiBJY29uIGJhc2UgY2xhc3MgKG1hc2tlZCBzcHJpdGUgZ3JvdXApXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEljb247XG5cbmZ1bmN0aW9uIEljb24oZ2FtZSwgeCwgeSwgYXNzZXQsIG1hc2ssIGJvcmRlciwgd2lkdGggPSAxMDAuMC8qLCBUT0RPOiBoZWlnaHQgPSAxMDAuMCAuLi5hcmdzKi8pIHtcbiAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksIGFzc2V0LyosIC4uLmFyZ3MqLyk7XG5cbiAgLy8gUFJPUEVSVElFU1xuICAvLyAtIG1hc2tTcHJpdGVcbiAgdGhpcy5tYXNrU3ByaXRlO1xuICAvLyAtIGJvcmRlclNwcml0ZVxuICB0aGlzLmJvcmRlclNwcml0ZTtcbiAgLy8gLSBhc3NldCBrZXlcbiAgdGhpcy5pZCA9IGFzc2V0O1xuXG4gIHRoaXMuX2dhbWUgPSBnYW1lO1xuICAvLyBleHBhbmRzIGJvcmRlcnMgb2YgbWFzayBzbGlnaHRseVxuICB2YXIgc2NhbGVSZWxheCA9IDEuMDU7XG5cbiAgaWYgKHR5cGVvZiBtYXNrICE9PSAndW5kZWZpbmVkJyAmJiBtYXNrICE9PSBudWxsKSB7XG4gICAgdGhpcy5tYXNrU3ByaXRlID0gZ2FtZS5tYWtlLnNwcml0ZSh4LHksIG1hc2spO1xuXG4gICAgdGhpcy5tYXNrU3ByaXRlLnNjYWxlLnNldFRvKHRoaXMud2lkdGgqc2NhbGVSZWxheCAvIHRoaXMubWFza1Nwcml0ZS53aWR0aCk7XG5cbiAgICB2YXIgbWFza2VkQm1kID0gZ2FtZS5tYWtlLmJpdG1hcERhdGEodGhpcy5tYXNrU3ByaXRlLndpZHRoLCB0aGlzLm1hc2tTcHJpdGUuaGVpZ2h0KTtcbiAgICBtYXNrZWRCbWQuYWxwaGFNYXNrKHRoaXMsIHRoaXMubWFza1Nwcml0ZSk7XG4gICAgLy8gcmVwbGFjZSBtYWluIHNwcml0ZSB3aXRoIGJpdG1hcCBkYXRhIG1hc2tcbiAgICB0aGlzLmxvYWRUZXh0dXJlKG1hc2tlZEJtZCk7XG4gIH1cblxuICB0aGlzLnNjYWxlLnNldFRvKHdpZHRoIC8gdGhpcy53aWR0aCk7XG4gIHZhciBwYXJlbnRTY2FsZSA9IHRoaXMuc2NhbGUueDtcblxuICBpZiAodHlwZW9mIGJvcmRlciAhPT0gJ3VuZGVmaW5lZCcgJiYgYm9yZGVyICE9PSBudWxsKSB7XG4gICAgdGhpcy5ib3JkZXJTcHJpdGUgPSBnYW1lLm1ha2Uuc3ByaXRlKDAsMCwgYm9yZGVyKTtcbiAgICB0aGlzLmFkZENoaWxkKHRoaXMuYm9yZGVyU3ByaXRlKTtcbiAgICB0aGlzLmJvcmRlclNwcml0ZS5zY2FsZS5zZXRUbygod2lkdGggLyB0aGlzLmJvcmRlclNwcml0ZS53aWR0aCkgLyBwYXJlbnRTY2FsZSk7XG4gIH1cblxufVxuXG5JY29uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xuSWNvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBJY29uO1xuXG5JY29uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB0aGlzLmdldENoaWxkQXQoaSkudXBkYXRlKCk7XG4gIH1cbn07XG4iLCIvKlxuICogTWVtb3J5QmFua1dpbmRvd1xuICogPT09PT09PT09PT09PT09XG4gKlxuICogVUkgd2luZG93IGZvciB0aGUgbWVtb3J5IGJhbmtcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpdGVtcyA9IHJlcXVpcmUoJy4uLy4uL3N0YXRpYy9hc3NldHMvaXRlbXMuanNvbicpO1xudmFyIEljb24gPSByZXF1aXJlKCcuL0ljb24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZW1vcnlCYW5rV2luZG93O1xuXG5mdW5jdGlvbiBtZW1vcnlCYW5rQnV0dG9uVG9nZ2xlKCkge1xuICAvLyB1bnJlc3BvbnNpdmUgd2hpbGUgYW5pbWF0aW5nXG4gIGlmICh0aGlzLl9pc1R3ZWVuaW5nKVxuICAgIHJldHVybjtcblxuICB0aGlzLl9pc1R3ZWVuaW5nID0gdHJ1ZTtcbiAgdmFyIHRpbWVUb1R3ZWVuID0gNTAwOyAgLy8gbWlsbGlzZWNvbmRzXG5cbiAgLy8gaGlkZSBwYW5lbFxuICBpZiAodGhpcy5wYW5lbC52aXNpYmxlKSB7XG4gICAgdGhpcy5fZ2FtZS5zb3VuZC5wbGF5KCdzd2lzaC1jbG9zZScpO1xuICAgIHRoaXMuX2dhbWUuYWRkLnR3ZWVuKHRoaXMucGFuZWwpLnRvKFxuICAgICAgICB7eDogdGhpcy5fYmFzZVggKyB0aGlzLnBhbmVsV2lkdGggKyB0aGlzLl9tZW1vcnlQYWRkaW5nfSwgdGltZVRvVHdlZW4sIFBoYXNlci5FYXNpbmcuRXhwb25lbnRpYWwuT3V0LCB0cnVlXG4gICAgICApLm9uQ29tcGxldGUuYWRkKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGhpcy5wYW5lbC52aXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5faXNUd2VlbmluZyA9IGZhbHNlO1xuICAgICAgICB9LCB0aGlzXG4gICAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNob3cgcGFuZWxcblxuICAvLyBpZiBhcmVhIHRyYW5zaXRpb24gd2luZG93IGlzIG9wZW4sIGNsb3NlIGl0XG4gIGlmICh0aGlzLl9nYW1lLmFyZWFUcmFuc2l0aW9uV2luZG93LnBhbmVsLnZpc2libGUpIHtcbiAgICB0aGlzLl9nYW1lLmFyZWFUcmFuc2l0aW9uV2luZG93LnBhbmVsLnZpc2libGUgPSBmYWxzZTtcbiAgfVxuICB0aGlzLnBhbmVsLnZpc2libGUgPSB0cnVlO1xuICB0aGlzLmRpc3BsYXkoKTtcblxuICB0aGlzLnBhbmVsLnggPSB0aGlzLl9iYXNlWCArIHRoaXMucGFuZWxXaWR0aCArIHRoaXMuX21lbW9yeVBhZGRpbmc7XG4gIHRoaXMuX2dhbWUuc291bmQucGxheSgnc3dpc2gtb3BlbicpO1xuICB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzLnBhbmVsKS50byhcbiAgICAgIHt4OiB0aGlzLl9iYXNlWH0sIHRpbWVUb1R3ZWVuLCBQaGFzZXIuRWFzaW5nLkV4cG9uZW50aWFsLk91dCwgdHJ1ZVxuICAgICkub25Db21wbGV0ZS5hZGQoZnVuY3Rpb24gKCkgeyB0aGlzLl9pc1R3ZWVuaW5nID0gZmFsc2U7IH0sIHRoaXMpO1xufVxuXG5mdW5jdGlvbiBNZW1vcnlCYW5rV2luZG93KGdhbWUvKiwgLi4uYXJncyovKSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUvKiwgLi4uYXJncyovKTtcblxuICB0aGlzLl9nYW1lID0gZ2FtZTtcblxuICAvLyBwcml2YXRlIG1lbWJlcnMgc3BlY2lmeWluZyBtYXJnaW4gYW5kIHBhZGRpbmdcbiAgdGhpcy5fbWVtb3J5VGV4dE9yaWdpblggPSAxMDA7XG4gIHRoaXMuX21lbW9yeVRleHRPcmlnaW5ZID0gMTU1O1xuICB0aGlzLl9tZW1vcnlQYWRkaW5nID0gMzI7XG4gIHRoaXMuX2l0ZW1PcmlnaW5YID0gODA7XG4gIHRoaXMuX2l0ZW1PcmlnaW5ZID0gMjU7XG4gIHRoaXMuX2Jhc2VYID0gdGhpcy5fbWVtb3J5UGFkZGluZyAvIDI7XG4gIHRoaXMuX2Jhc2VZID0gdGhpcy5fbWVtb3J5UGFkZGluZyAqIDI7XG5cbiAgLy8gbWVtb3J5IGJhbmsgd2luZG93IGRpbWVuc2lvbnNcbiAgdGhpcy5wYW5lbEhlaWdodCA9IGdhbWUuaGVpZ2h0ICogMS8yIC0gdGhpcy5fbWVtb3J5UGFkZGluZyAvIDI7XG4gIHRoaXMucGFuZWxXaWR0aCA9IGdhbWUud2lkdGggLSB0aGlzLl9tZW1vcnlQYWRkaW5nO1xuICB0aGlzLl9yb3dDYXBhY2l0eSA9IDU7ICAvLyBpdGVtcyBwZXIgcm93XG4gIHRoaXMuX2l0ZW1TdGFydCA9IDA7ICAvLyBkZXRlcm1pbmVzIHdoaWNoIHJvdyB0byBzaG93XG5cbiAgLy8gd2luZG93LWRlcGVuZGVudCBwcml2YXRlIG1lbWJlciBkaW1lbnNpb25zXG4gIHRoaXMuX21lbW9yeVRleHRXaWR0aCA9IHRoaXMucGFuZWxXaWR0aCAtIDE4NTtcbiAgdGhpcy5faXRlbVBhZGRpbmcgPSB0aGlzLnBhbmVsV2lkdGggLyA1MDtcbiAgdGhpcy5fbmV4dE9yaWdpblggPSB0aGlzLnBhbmVsV2lkdGggLSA1NTtcbiAgdGhpcy5fbmV4dE9yaWdpblkgPSAwO1xuICB0aGlzLl9wcmV2T3JpZ2luWCA9IC0xODtcbiAgdGhpcy5fcHJldk9yaWdpblkgPSAwO1xuXG4gIC8qKlxuICAgKiBQYW5lbFxuICAgKi9cblxuICBnYW1lLnNsaWNrVUkuYWRkKFxuICAgIHRoaXMucGFuZWwgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9iYXNlWCwgdGhpcy5fYmFzZVksIGdhbWUubWFrZS5zcHJpdGUoMCwwLCAnbWVtb3J5LWJhbmsnKSxcbiAgICAgIHRoaXMucGFuZWxXaWR0aCwgdGhpcy5wYW5lbEhlaWdodCkpO1xuICB0aGlzLnBhbmVsLmRpc3BsYXlPYmplY3Qud2lkdGggPSB0aGlzLnBhbmVsV2lkdGg7XG4gIHRoaXMucGFuZWwuZGlzcGxheU9iamVjdC5oZWlnaHQgPSB0aGlzLnBhbmVsSGVpZ2h0O1xuXG4gIC8vIGJ5IGRlZmF1bHQsIG5vdCBkaXNwbGF5ZWRcbiAgdGhpcy5wYW5lbC52aXNpYmxlID0gZmFsc2U7XG4gIHRoaXMucGFuZWwuYWxwaGEgPSAwLjg7XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBidXR0b25cbiAgICovXG4gIC8vIHVudGlsIHlvdSBjbGljayBvbiB0aGUgdG9nZ2xlIGJ1dHRvblxuICBnYW1lLnNsaWNrVUkuYWRkKFxuICAgIHRoaXMudG9nZ2xlQnV0dG9uID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KFxuICAgICAgMCx0aGlzLl9tZW1vcnlQYWRkaW5nLCBnYW1lLm1ha2UuYnV0dG9uKDAsMCwgJ21lbW9yeS1iYW5rLWJ1dHRvbicpKSk7XG4gIC8vIHNldCBzY2FsZSBzdWNoIHRoYXQgd2lkdGggPSAxLzggcGFuZWwgd2lkdGhcbiAgdGhpcy50b2dnbGVCdXR0b24uZGlzcGxheU9iamVjdC5zY2FsZS5zZXRUbyhcbiAgICAodGhpcy5wYW5lbFdpZHRoIC8gOCkgLyB0aGlzLnRvZ2dsZUJ1dHRvbi5kaXNwbGF5T2JqZWN0LndpZHRoKTtcbiAgdGhpcy50b2dnbGVCdXR0b24ueCA9IGdhbWUud2lkdGggLSB0aGlzLl9tZW1vcnlQYWRkaW5nIC0gdGhpcy50b2dnbGVCdXR0b24uZGlzcGxheU9iamVjdC53aWR0aDtcbiAgLy8gc2hvdyBwYW5lbCBjYWxsYmFja1xuICB0aGlzLnRvZ2dsZUJ1dHRvbi5ldmVudHMub25JbnB1dERvd24uYWRkKG1lbW9yeUJhbmtCdXR0b25Ub2dnbGUsIHRoaXMpO1xuICB0aGlzLnRvZ2dsZUJ1dHRvbi5hbHBoYSA9IDAuOTtcblxuICAvKipcbiAgICogVGV4dCAtIG5hbWUgYW5kIGRlc2NyaXB0aW9uXG4gICAqL1xuICB2YXIgbmFtZVRleHRTdHlsZSA9IHsgZm9udDogJzE0cHggR291ZHkgQm9va2xldHRlciAxOTExJywgZmlsbDogJyM0OGYyZmYnLCB3b3JkV3JhcDogdHJ1ZSwgd29yZFdyYXBXaWR0aDogdGhpcy5fbWVtb3J5VGV4dFdpZHRoLCBmb250V2VpZ2h0OiAnYm9sZCcsIGJvdW5kc0FsaWduSDogJ2NlbnRlcicgfTtcbiAgdGhpcy5wYW5lbC5hZGQoXG4gICAgdGhpcy5uYW1lVGV4dCA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICAgIHRoaXMuX21lbW9yeVRleHRPcmlnaW5YLFxuICAgICAgdGhpcy5fbWVtb3J5VGV4dE9yaWdpblksXG4gICAgICBnYW1lLm1ha2UudGV4dCgwLDAsICcnLCBuYW1lVGV4dFN0eWxlKSwgdGhpcy5fbWVtb3J5VGV4dFdpZHRoKSk7XG4gIC8vIGZvciBhbGlnbm1lbnQgcHVycG9zZXNcbiAgdmFyIG5hbWVUZXh0SGVpZ2h0ID0gdGhpcy5uYW1lVGV4dC5kaXNwbGF5T2JqZWN0LmdldEJvdW5kcygpLmhlaWdodDtcbiAgdGhpcy5uYW1lVGV4dC5kaXNwbGF5T2JqZWN0LnNldFRleHRCb3VuZHMoMCwwLCB0aGlzLl9tZW1vcnlUZXh0V2lkdGgsIG5hbWVUZXh0SGVpZ2h0KTtcblxuICB2YXIgZGVzY1RleHRTdHlsZSA9IHsgZm9udDogJzE0cHggT3BlbiBTYW5zJywgZmlsbDogJyM0OGYyZmYnLCB3b3JkV3JhcDogdHJ1ZSwgd29yZFdyYXBXaWR0aDogdGhpcy5fbWVtb3J5VGV4dFdpZHRoLCBhbGlnbjogJ2xlZnQnIH07XG4gIHRoaXMucGFuZWwuYWRkKFxuICAgIHRoaXMuZGVzY1RleHQgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9tZW1vcnlUZXh0T3JpZ2luWCxcbiAgICAgIHRoaXMuX21lbW9yeVRleHRPcmlnaW5ZICsgbmFtZVRleHRIZWlnaHQsXG4gICAgICBnYW1lLm1ha2UudGV4dCgwLDAsICcnLCBkZXNjVGV4dFN0eWxlKSwgdGhpcy5fbWVtb3J5VGV4dFdpZHRoKSk7XG5cbiAgLyoqXG4gICAqIEJvb2trZWVwaW5nXG4gICAqL1xuICAvLyBhcmUgd2UgY3VycmVudGx5IGFuaW1hdGluZz9cbiAgdGhpcy5faXNUd2VlbmluZyA9IGZhbHNlO1xuICB0aGlzLl9pdGVtRGlzcGxheU9iamVjdHMgPSBbXTsgLy8gZm9yIGRlbGV0aW9uIHB1cnBvc2VzXG4gIHRoaXMuX25hdkJ1dHRvbnMgPSBbXTtcbn1cblxuTWVtb3J5QmFua1dpbmRvdy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5Hcm91cC5wcm90b3R5cGUpO1xuTWVtb3J5QmFua1dpbmRvdy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNZW1vcnlCYW5rV2luZG93O1xuXG5NZW1vcnlCYW5rV2luZG93LnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmNsZWFuV2luZG93KCk7XG4gIHRoaXMuZGlzcGxheUl0ZW1zKCk7XG4gIHRoaXMuc2hvd05hdkJ1dHRvbnMoKTtcbn07XG5cbk1lbW9yeUJhbmtXaW5kb3cucHJvdG90eXBlLmNsZWFuV2luZG93ID0gZnVuY3Rpb24gKCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2l0ZW1EaXNwbGF5T2JqZWN0cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gdGhpcy5faXRlbURpc3BsYXlPYmplY3RzW2ldO1xuICAgIGl0ZW0uY29udGFpbmVyLmRpc3BsYXlHcm91cC5yZW1vdmVBbGwodHJ1ZSk7XG4gICAgaXRlbS5jb250YWluZXIuZGlzcGxheUdyb3VwLmRlc3Ryb3koKTtcbiAgfVxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5fbmF2QnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBuYXZCdXR0b24gPSB0aGlzLl9uYXZCdXR0b25zW2ldO1xuICAgIG5hdkJ1dHRvbi5jb250YWluZXIuZGlzcGxheUdyb3VwLnJlbW92ZUFsbCh0cnVlKTtcbiAgICBuYXZCdXR0b24uY29udGFpbmVyLmRpc3BsYXlHcm91cC5kZXN0cm95KCk7XG4gIH1cbiAgdGhpcy5faXRlbURpc3BsYXlPYmplY3RzID0gW107XG4gIHRoaXMuX25hdkJ1dHRvbnMgPSBbXTtcbn07XG5cbk1lbW9yeUJhbmtXaW5kb3cucHJvdG90eXBlLmRpc3BsYXlJdGVtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGludmVudG9yeSA9IHRoaXMuX2dhbWUucGxheWVyLmludmVudG9yeTtcblxuICB2YXIgaXRlbUVuZCA9IHRoaXMuX2l0ZW1TdGFydCArIHRoaXMuX3Jvd0NhcGFjaXR5IDwgaW52ZW50b3J5Lmxlbmd0aFxuICAgID8gdGhpcy5faXRlbVN0YXJ0ICsgdGhpcy5fcm93Q2FwYWNpdHlcbiAgICA6IGludmVudG9yeS5sZW5ndGg7XG5cbiAgLy8gQXNzdW1lcyBJbnZlbnRvcnlJdGVtIG9iamVjdHMgaW4gaW52ZW50b3J5LlxuICBmb3IgKHZhciBpID0gdGhpcy5faXRlbVN0YXJ0OyBpIDwgaXRlbUVuZDsgaSsrKSB7XG4gICAgdmFyIGl0ZW1JZCA9IGludmVudG9yeVtpXTtcblxuICAgIC8vIHNjYWxlZCB3aWR0aCA9IDEvNyBwYW5lbCB3aWR0aDtcbiAgICB2YXIgZGVzaXJlZFdpZHRoID0gKHRoaXMucGFuZWxXaWR0aCAvIDcpO1xuICAgIHZhciBpdGVtSWNvbiA9IG5ldyBJY29uKHRoaXMuX2dhbWUsIDAsMCxcbiAgICAgIGl0ZW1JZCwgJ21lbW9yeS1iYW5rLWljb24tbWFzaycsICdtZW1vcnktYmFuay1pY29uJyAvKiBib3JkZXIgKi8sIGRlc2lyZWRXaWR0aCk7XG5cbiAgICB2YXIgc2xpY2tJdGVtO1xuICAgIHRoaXMucGFuZWwuYWRkKHNsaWNrSXRlbSA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICAgIHRoaXMuX2l0ZW1PcmlnaW5YICsgKGkgLSB0aGlzLl9pdGVtU3RhcnQpKih0aGlzLl9pdGVtUGFkZGluZyArIGRlc2lyZWRXaWR0aCksIHRoaXMuX2l0ZW1PcmlnaW5ZLFxuICAgICAgaXRlbUljb24pKTtcblxuICAgIGl0ZW1JY29uLmlucHV0RW5hYmxlZCA9IHRydWU7XG4gICAgaXRlbUljb24uaW5wdXQudXNlSGFuZEN1cnNvciA9IHRydWU7XG4gICAgaXRlbUljb24uZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm5hbWVUZXh0LmRpc3BsYXlPYmplY3QudGV4dCA9IGl0ZW1zW3RoaXMuaXRlbUlkXVsnbmFtZSddLnRvVXBwZXJDYXNlKCk7XG4gICAgICB0aGlzLmRlc2NUZXh0LmRpc3BsYXlPYmplY3QudGV4dCA9IGl0ZW1zW3RoaXMuaXRlbUlkXVsnZGVzYyddO1xuICAgIH0sIHtuYW1lVGV4dDogdGhpcy5uYW1lVGV4dCwgZGVzY1RleHQ6IHRoaXMuZGVzY1RleHQsIGl0ZW1JZDogaXRlbUlkfSk7XG5cbiAgICB0aGlzLl9pdGVtRGlzcGxheU9iamVjdHMucHVzaChzbGlja0l0ZW0pO1xuICB9XG59O1xuXG5NZW1vcnlCYW5rV2luZG93LnByb3RvdHlwZS5zaG93TmF2QnV0dG9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gbmV4dCBidXR0b25zXG4gIGlmICh0aGlzLl9pdGVtU3RhcnQgKyB0aGlzLl9yb3dDYXBhY2l0eSA8IHRoaXMuX2dhbWUucGxheWVyLmludmVudG9yeS5sZW5ndGgpIHtcbiAgICB2YXIgbmV4dEJ1dHRvbiA9IHRoaXMuX2dhbWUubWFrZS5idXR0b24oMCwwLCdtZW1vcnktYmFuay1uZXh0Jyk7XG4gICAgdmFyIHNsaWNrTmV4dDtcbiAgICB0aGlzLnBhbmVsLmFkZChzbGlja05leHQgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9uZXh0T3JpZ2luWCwgdGhpcy5fbmV4dE9yaWdpblksIG5leHRCdXR0b24pKTtcbiAgICAvLyBzY2FsZWQgYnkgaGVpZ2h0LCBlcXVhbCB0byBwYW5lbCBoZWlnaHRcbiAgICBuZXh0QnV0dG9uLnNjYWxlLnNldFRvKHRoaXMucGFuZWxIZWlnaHQgLyBuZXh0QnV0dG9uLmhlaWdodCk7XG4gICAgdGhpcy5fbmF2QnV0dG9ucy5wdXNoKHNsaWNrTmV4dCk7XG5cbiAgICBuZXh0QnV0dG9uLmV2ZW50cy5vbklucHV0VXAuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc3dpdGNoUm93KHRydWUpO1xuICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfSwgdGhpcyk7XG5cbiAgfVxuXG4gIC8vIHByZXYgYnV0dG9uc1xuICBpZiAodGhpcy5faXRlbVN0YXJ0ID4gMCkge1xuICAgIHZhciBwcmV2QnV0dG9uID0gdGhpcy5fZ2FtZS5tYWtlLmJ1dHRvbigwLDAsJ21lbW9yeS1iYW5rLW5leHQnKTtcbiAgICAvLyByb3RhdGUgc3ByaXRlXG4gICAgcHJldkJ1dHRvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICAgIHByZXZCdXR0b24uc2NhbGUueSAqPSAtMTtcbiAgICBwcmV2QnV0dG9uLmFuY2hvci5zZXRUbygxLDEpO1xuXG4gICAgdmFyIHNsaWNrUHJldjtcbiAgICB0aGlzLnBhbmVsLmFkZChzbGlja1ByZXYgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgICB0aGlzLl9wcmV2T3JpZ2luWCwgdGhpcy5fcHJldk9yaWdpblksXG4gICAgICBwcmV2QnV0dG9uKSk7XG4gICAgdGhpcy5fbmF2QnV0dG9ucy5wdXNoKHNsaWNrUHJldik7XG5cbiAgICBwcmV2QnV0dG9uLnNjYWxlLnNldFRvKHRoaXMucGFuZWxIZWlnaHQgLyBwcmV2QnV0dG9uLmhlaWdodCk7XG5cbiAgICBwcmV2QnV0dG9uLmV2ZW50cy5vbklucHV0VXAuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc3dpdGNoUm93KGZhbHNlKTtcbiAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgIH0sIHRoaXMpO1xuXG4gIH1cbn07XG5cbk1lbW9yeUJhbmtXaW5kb3cucHJvdG90eXBlLnN3aXRjaFJvdyA9IGZ1bmN0aW9uICh3YW50c05leHRSb3cpIHtcbiAgdmFyIGludmVudG9yeSA9IHRoaXMuX2dhbWUucGxheWVyLmludmVudG9yeTtcbiAgaWYgKHdhbnRzTmV4dFJvdyAmJiB0aGlzLl9pdGVtU3RhcnQgKyB0aGlzLl9yb3dDYXBhY2l0eSA8IGludmVudG9yeS5sZW5ndGgpIHtcbiAgICB0aGlzLl9pdGVtU3RhcnQgKz0gdGhpcy5fcm93Q2FwYWNpdHk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghd2FudHNOZXh0Um93ICYmIHRoaXMuX2l0ZW1TdGFydCAtIHRoaXMuX3Jvd0NhcGFjaXR5ID49IDApIHtcbiAgICB0aGlzLl9pdGVtU3RhcnQgLT0gdGhpcy5fcm93Q2FwYWNpdHk7XG4gICAgcmV0dXJuO1xuICB9XG59O1xuXG5NZW1vcnlCYW5rV2luZG93LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFRPRE86IFN0dWIuXG59O1xuIiwiLypcbiAqIE5QQ1xuICogPT09PVxuICpcbiAqIEEgc2FtcGxlIHByZWZhYiAoZXh0ZW5kZWQgZ2FtZSBvYmplY3QgY2xhc3MpLCBkaXNwbGF5aW5nIGFuIE5QQyBpbiBhIHJvb20uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgbnBjcyA9IHJlcXVpcmUoJy4uLy4uL3N0YXRpYy9hc3NldHMvbnBjcy5qc29uJyk7XG52YXIgVG9hc3QgPSByZXF1aXJlKCcuL1RvYXN0Jyk7XG5cbmZ1bmN0aW9uIE5QQyhnYW1lLCB4LCB5LCBpZCwgaGVpZ2h0LCB3aWR0aCkge1xuICB0aGlzLmlkID0gaWQ7XG4gIHRoaXMuaW1nID0gbnBjc1tpZF1bJ2ltYWdlJ107XG4gIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCB0aGlzLmltZyk7XG4gIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB0aGlzLndpZHRoID0gd2lkdGg7XG4gIHRoaXMubmFtZSA9IG5wY3NbaWRdWyduYW1lJ107XG5cbiAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gIHRoaXMuY29udiA9IG5wY3NbaWRdWydjb252J107XG4gIHRoaXMuYW5jaG9yLnNldCgwLjUpO1xuICB0aGlzLmlucHV0RW5hYmxlZCA9IHRydWU7XG4gIHRoaXMuaW5wdXQudXNlSGFuZEN1cnNvciA9IHRydWU7XG4gIHRoaXMuZXZlbnRzLm9uSW5wdXREb3duLmFkZChjbGljaywgdGhpcyk7XG4gIHRoaXMuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChtb3VzZW92ZXIsIHRoaXMpO1xuICB0aGlzLmV2ZW50cy5vbklucHV0T3V0LmFkZChtb3VzZW91dCwgdGhpcyk7XG5cbiAgdGhpcy5pbnB1dC5waXhlbFBlcmZlY3RPdmVyID0gdHJ1ZTsgICAvLyBjaGVja3MgcGl4ZWxzIHNvIHRoYXQgY29sbGlzaW9uIG9ubHkgaGFwcGVucyB3aXRoIG5vbi10cmFuc3BhcmVudCBhcmVhc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbXB1dGF0aW9uYWxseSBleHBlbnNpdmUsIGJ1dCBtYXliZSBuZWNlc3NhcnkgZm9yIHJlYWxpc20gcHVycG9zZXM/XG59XG5cbk5QQy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcbm1vZHVsZS5leHBvcnRzID0gTlBDLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE5QQztcblxuZnVuY3Rpb24gY2xpY2soKSB7XG4gIHRoaXMuaGlkZSgpO1xuICB0aGlzLl9nYW1lLmRpYWxvZ3VlV2luZG93LmJlZ2luKHRoaXMuY29udik7XG59XG5cbmZ1bmN0aW9uIG1vdXNlb3ZlcigpIHtcbiAgdGhpcy5fZ2FtZS5hZGQuZXhpc3RpbmcodGhpcy50b2FzdCA9IG5ldyBUb2FzdCh0aGlzLl9nYW1lLCB0aGlzLm5hbWUsIDUpKTtcbn1cblxuZnVuY3Rpb24gbW91c2VvdXQoKSB7XG4gIGlmICh0aGlzLnRvYXN0KSB7XG4gICAgdGhpcy50b2FzdC50b2FzdC5jb250YWluZXIuZGlzcGxheUdyb3VwLnJlbW92ZUFsbCgpO1xuICAgIHRoaXMudG9hc3QuZGVzdHJveSgpO1xuICB9XG59XG5cbk5QQy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZmFkZUluVHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzKTtcbiAgdmFyIGZhZGVJbiA9IDIwMDtcbiAgZmFkZUluVHdlZW4udG8oe2FscGhhOiAxfSwgZmFkZUluLCBQaGFzZXIuRWFzaW5nLkxpbmVhci5Ob25lLCB0cnVlKTtcbiAgdGhpcy5pbnB1dEVuYWJsZWQgPSB0cnVlO1xufTtcblxuTlBDLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBmYWRlT3V0VHdlZW4gPSB0aGlzLl9nYW1lLmFkZC50d2Vlbih0aGlzKTtcbiAgdmFyIGZhZGVPdXQgPSAyMDA7XG4gIGZhZGVPdXRUd2Vlbi50byh7YWxwaGE6IDB9LCBmYWRlT3V0LCBQaGFzZXIuRWFzaW5nLkxpbmVhci5Ob25lLCB0cnVlKTtcbiAgdGhpcy5pbnB1dEVuYWJsZWQgPSBmYWxzZTtcbn07XG4iLCIvKlxuICogUGxhY2VhYmxlXG4gKiA9PT09XG4gKlxuICogQSBzYW1wbGUgcHJlZmFiIChleHRlbmRlZCBnYW1lIG9iamVjdCBjbGFzcyksIGRpc3BsYXlpbmcgYW4gb2JqZWN0IGluIGEgcm9vbVxuICogKHVzdWFsbHkgbGFyZ2VyIHRoYW4gYSBjbGlja2FibGUpIHRoYXQgY2FuIGJlIGNsaWNrZWQgb24gdG8gZGlzcGxheSBhIG1lc3NhZ2UsXG4gKiBidXQgbm90IGFkZGVkIHRvIHRoZSBwbGF5ZXIncyBpbnZlbnRvcnkuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVG9hc3QgPSByZXF1aXJlKCcuL1RvYXN0Jyk7XG52YXIgaXRlbXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL2l0ZW1zLmpzb24nKTtcblxuZnVuY3Rpb24gUGxhY2VhYmxlKGdhbWUsIHgsIHksIGlkLCBoZWlnaHQsIHdpZHRoKSB7XG4gIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCBpZCk7XG4gIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICB0aGlzLndpZHRoID0gd2lkdGg7XG5cbiAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5uYW1lID0gaXRlbXNbaWRdWyduYW1lJ107XG4gIHRoaXMubWVzc2FnZSA9IGl0ZW1zW2lkXVsnbWVzc2FnZSddO1xuICB0aGlzLmFuY2hvci5zZXQoMC41KTtcbiAgdGhpcy5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICB0aGlzLmlucHV0LnVzZUhhbmRDdXJzb3IgPSB0cnVlO1xuICB0aGlzLmV2ZW50cy5vbklucHV0RG93bi5hZGQoY2xpY2ssIHRoaXMpO1xuICB0aGlzLmV2ZW50cy5vbklucHV0T3Zlci5hZGQobW91c2VvdmVyLCB0aGlzKTtcbiAgdGhpcy5ldmVudHMub25JbnB1dE91dC5hZGQobW91c2VvdXQsIHRoaXMpO1xuXG4gIHRoaXMuaW5wdXQucGl4ZWxQZXJmZWN0T3ZlciA9IHRydWU7ICAgLy8gY2hlY2tzIHBpeGVscyBzbyB0aGF0IGNvbGxpc2lvbiBvbmx5IGhhcHBlbnMgd2l0aCBub24tdHJhbnNwYXJlbnQgYXJlYXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21wdXRhdGlvbmFsbHkgZXhwZW5zaXZlLCBidXQgbWF5YmUgbmVjZXNzYXJ5IGZvciByZWFsaXNtIHB1cnBvc2VzP1xufVxuXG5mdW5jdGlvbiBjbGljaygpIHtcbiAgdGhpcy5fZ2FtZS5hZGQuZXhpc3RpbmcobmV3IFRvYXN0KHRoaXMuX2dhbWUsIHRoaXMubWVzc2FnZSwgNSkpO1xufVxuXG5mdW5jdGlvbiBtb3VzZW92ZXIoKSB7XG4gIHRoaXMuX2dhbWUuYWRkLmV4aXN0aW5nKHRoaXMudG9hc3QgPSBuZXcgVG9hc3QodGhpcy5fZ2FtZSwgdGhpcy5uYW1lLCA1KSk7XG59XG5cbmZ1bmN0aW9uIG1vdXNlb3V0KCkge1xuICBpZiAodGhpcy50b2FzdCkge1xuICAgIHRoaXMudG9hc3QudG9hc3QuY29udGFpbmVyLmRpc3BsYXlHcm91cC5yZW1vdmVBbGwoKTtcbiAgICB0aGlzLnRvYXN0LmRlc3Ryb3koKTtcbiAgfVxufVxuXG5QbGFjZWFibGUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5tb2R1bGUuZXhwb3J0cyA9IFBsYWNlYWJsZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQbGFjZWFibGU7IiwiLypcbiogUGxheWVyXG4qID09PT1cbipcbiogVGhlIHBsYXllciBvYmplY3QgY2xhc3MuXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIFBsYXllcihnYW1lKSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUpO1xuICB0aGlzLmludmVudG9yeSA9IFtdO1xuICB0aGlzLm1lbW9yeUJhbmsgPSBbXTtcbiAgdGhpcy5zZWVuQXJlYXMgPSBbXTsgLy9hcmVhcyBzZWVuIHRvIHRyYWNrIHdoYXQgY2FuIGdvIGluIGFyZWEgdHJhbnNpdGlvbiB3aW5kb3dcbiAgdGhpcy52YXJpYWJsZXMgPSB7fTtcbiAgdGhpcy5jdXJyZW50Um9vbSA9IG51bGw7XG4gIHRoaXMuY29udm9JZHggPSAwO1xuICB0aGlzLnNob3duQ29udm8gPSBbXTtcbiAgdGhpcy5jb252b0ZpbGUgPSBudWxsO1xuXG59XG5cblBsYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5Hcm91cC5wcm90b3R5cGUpO1xubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGxheWVyO1xuXG5QbGF5ZXIucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uKGdhbWUpe1xuICB2YXIgZmllbGRzID0gW1xuICAgICdpbnZlbnRvcnknLFxuICAgICdtZW1vcnlCYW5rJyxcbiAgICAnc2VlbkFyZWFzJyxcbiAgICAndmFyaWFibGVzJ1xuICBdO1xuXG4gIHZhciBvYmogPSB7fTtcblxuICBmb3IgKGxldCBpIGluIGZpZWxkcyl7XG4gICAgbGV0IGZpZWxkID0gZmllbGRzW2ldO1xuICAgIG9ialtmaWVsZF0gPSB0aGlzW2ZpZWxkXTtcbiAgfVxuICAvL3NpbmNlIHRoZSByb29tIGluZm8gY29udGFpbnMgYWxsIHRoZSBvYmplY3RzIGluIHJvb20sIGNhbiBJIHBvcCBvZmYgdGhlcmU/XG4gIG9ialsnY3VycmVudFJvb20nXSA9IGdhbWUucm9vbS5hcmVhO1xuICBvYmpbJ2NvbnZvSWR4J10gPSBnYW1lLmRpYWxvZ3VlV2luZG93LmNvbnZvTWFuYWdlci5pZHg7XG4gIG9ialsnc2hvd25Db252byddID0gZ2FtZS5kaWFsb2d1ZVdpbmRvdy5jb252b01hbmFnZXIuc2hvd247XG4gIC8vc2luY2UgdGhlIGNvbnZvRmlsZSBpcyBub3Qgc3RvcmVkIGluIHRoZSBnYW1lLCB3ZSB3aWxsIGp1c3Qgc3RvcmUgaXQgd2l0aCB0aGVcbiAgLy9wbGF5ZXIgd2hlbmV2ZXIgYSBuZXcgZmlsZSBpcyBzdGFydGVkLlxuICAvL29yIHdlIGNvdWxkIHN0b3JlIHRoYXQgYWxzbyBpbiB0aGUgRGlhbG9ndWUgbWFuYWdlcj8/XG4gIG9ialsnY29udm9GaWxlJ10gPSBnYW1lLmRpYWxvZ3VlV2luZG93LmNvbnZvRmlsZTtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iaik7XG59O1xuXG5QbGF5ZXIudW5zZXJpYWxpemUgPSBmdW5jdGlvbihwbGF5ZXJTdGF0ZSwgZ2FtZSl7XG5cbiAgaWYgKHR5cGVvZiBwbGF5ZXJTdGF0ZSA9PT0gJ3N0cmluZycpe1xuICAgIHBsYXllclN0YXRlID0gSlNPTi5wYXJzZShwbGF5ZXJTdGF0ZSwgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIHJldHVybiB2YWx1ZTsgICAgIC8vIHJldHVybiB0aGUgdW5jaGFuZ2VkIHByb3BlcnR5IHZhbHVlLlxuICAgIH0pO1xuICB9XG5cbiAgZ2FtZS5wbGF5ZXIgPSBnYW1lLmFkZC5leGlzdGluZyhuZXcgUGxheWVyKGdhbWUpKTtcblxuICBmb3IgKGxldCBmaWVsZCBpbiBwbGF5ZXJTdGF0ZSl7XG4gICAgZ2FtZS5wbGF5ZXJbZmllbGRdID0gcGxheWVyU3RhdGVbZmllbGRdO1xuICB9XG5cbn07XG4iLCIvKlxuICogUm9vbVxuICogPT09PVxuICpcbiAqIEEgc2FtcGxlIHByZWZhYiAoZXh0ZW5kZWQgZ2FtZSBvYmplY3QgY2xhc3MpLCBkaXNwbGF5aW5nIGEgcm9vbSBiYWNrZ3JvdW5kLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENsaWNrYWJsZSA9IHJlcXVpcmUoJy4uL29iamVjdHMvQ2xpY2thYmxlJyk7XG52YXIgUGxhY2VhYmxlID0gcmVxdWlyZSgnLi4vb2JqZWN0cy9QbGFjZWFibGUnKTtcbnZhciBOUEMgPSByZXF1aXJlKCcuLi9vYmplY3RzL05QQycpO1xudmFyIGFyZWFzID0gcmVxdWlyZSgnLi4vLi4vc3RhdGljL2Fzc2V0cy9hcmVhcy5qc29uJyk7XG5cbmZ1bmN0aW9uIFJvb20oZ2FtZSwgcm9vbSkge1xuICB0aGlzLl9nYW1lID0gZ2FtZTtcbiAgdGhpcy5uYW1lID0gcm9vbTtcblxuICB0aGlzLmFyZWEgPSBhcmVhc1tyb29tXTtcbiAgdGhpcy5pdGVtcyA9IFtdO1xuICB0aGlzLnBsYWNlYWJsZXMgPSBbXTtcbiAgdGhpcy5ucGNzID0gW107Ly9ob3cgZG9lcyB0aGlzIGludGVyYWN0IHdpdGggdGhlIGNvbnZlcnNhdGlvbiBtYW5hZ2VyP1xuICAvL3RoaXMgaXMgY2F1c2luZyB0aGUgZ2xpdGNoIHdoZXJlIHRoZSByb29tIGJsaW5rcyBvbiBsb2FkXG4gIC8vdGhvdWdoIGV2ZW4gYSBuZXcgZ2FtZSBibGlua3NcbiAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIGdhbWUud29ybGQuY2VudGVyWCwgZ2FtZS53b3JsZC5jZW50ZXJZLCB0aGlzLmFyZWFbJ2JnJ10pO1xuICB0aGlzLmFuY2hvci5zZXQoMC41KTtcblxufVxuXG5Sb29tLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xubW9kdWxlLmV4cG9ydHMgPSBSb29tLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJvb207XG5cblJvb20ucHJvdG90eXBlLmFkZEl0ZW1zID0gZnVuY3Rpb24oKSB7XG4gIC8vd291bGQgcHJlZmVyIHRoaXMgaW4gbG9hZCBhcmVhcyBUT0RPIHJlc3RydWN0dXJlXG4gIGlmICh0eXBlb2YgdGhpcy5fZ2FtZS5tdXNpYyAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5fZ2FtZS5tdXNpYyAhPT0gbnVsbClcbiAgICB0aGlzLl9nYW1lLm11c2ljLmZhZGVPdXQoMTAwMCk7IC8vIGZhZGUgb3V0IHByZXZpb3VzIG11c2ljXG4gIHRoaXMuX2dhbWUubXVzaWMgPSB0aGlzLl9nYW1lLnNvdW5kLnBsYXkodGhpcy5hcmVhLm11c2ljKTtcbiAgdGhpcy5fZ2FtZS5tdXNpYy5sb29wRnVsbCgxKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXJlYVsnaXRlbXMnXS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gdGhpcy5hcmVhWydpdGVtcyddW2ldO1xuICAgIHRoaXMuX2dhbWUuYWRkLmV4aXN0aW5nKGl0ZW0gPSBuZXcgQ2xpY2thYmxlKHRoaXMuX2dhbWUsIGl0ZW1bJ3gnXSwgaXRlbVsneSddLCBpdGVtWydpZCddLCBpdGVtWydoZWlnaHQnXSwgaXRlbVsnd2lkdGgnXSkpO1xuICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgfVxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5hcmVhWydwbGFjZWFibGVzJ10ubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGxhY2VhYmxlID0gdGhpcy5hcmVhWydwbGFjZWFibGVzJ11baV07XG4gICAgdGhpcy5fZ2FtZS5hZGQuZXhpc3RpbmcocGxhY2VhYmxlID0gbmV3IFBsYWNlYWJsZSh0aGlzLl9nYW1lLCBwbGFjZWFibGVbJ3gnXSwgcGxhY2VhYmxlWyd5J10sIHBsYWNlYWJsZVsnaWQnXSwgcGxhY2VhYmxlWydoZWlnaHQnXSwgcGxhY2VhYmxlWyd3aWR0aCddKSk7XG4gICAgdGhpcy5wbGFjZWFibGVzLnB1c2gocGxhY2VhYmxlKTtcbiAgfVxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5hcmVhWyducGNzJ10ubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgbnBjID0gdGhpcy5hcmVhWyducGNzJ11baV07XG5cbiAgICB2YXIgc2hvd05QQyA9IHRydWU7ICAgICAgIC8vIGNoZWNrIHRvIHNlZSBpZiBOUEMgbWVldHMgY29uZGl0aW9ucyB0byBiZSBzaG93biBpbiB0aGlzIGFyZWFcbiAgICBpZiAoJ3Nob3dpZicgaW4gbnBjKSB7XG4gICAgICBmb3IgKHZhciBjb25kaXRpb24gaW4gbnBjWydzaG93aWYnXSkge1xuICAgICAgICBpZiAodGhpcy5fZ2FtZS5wbGF5ZXIudmFyaWFibGVzW2NvbmRpdGlvbl0gIT0gbnBjWydzaG93aWYnXVtjb25kaXRpb25dKSB7XG4gICAgICAgICAgc2hvd05QQyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghc2hvd05QQykge1xuICAgICAgY29udGludWU7IC8vIGlmIE5QQyBkb2Vzbid0IG1lZXQgY29uZGl0aW9ucyB0byBiZSBzaG93biwgc2tpcCB0aGVtXG4gICAgfVxuICAgIHRoaXMuX2dhbWUuYWRkLmV4aXN0aW5nKG5wYyA9IG5ldyBOUEModGhpcy5fZ2FtZSwgbnBjWyd4J10sIG5wY1sneSddLCBucGNbJ2lkJ10sIG5wY1snaGVpZ2h0J10sIG5wY1snd2lkdGgnXSkpO1xuICAgIGlmIChucGMuY29udiA9PT0gdGhpcy5fZ2FtZS5wbGF5ZXIuY29udm9GaWxlKXtcbiAgICAgIG5wYy5hbHBoYSA9IDA7XG4gICAgfVxuICAgIC8vIGlmIHdlIHdhbnQgdG8gcmUtZW50ZXIgYSByb29tIGFuZCB0YWxrIHRvIGEgY2hhcmFjdGVyIGFnYWluXG4gICAgLy8gdGhlbiB3ZSBkb24ndCB3YW50IHRvIHBvcCB0aGVtIG9mZiBvZiB0aGUgc3RhY2tcbiAgICB0aGlzLm5wY3MucHVzaChucGMpO1xuICB9XG4gIHRoaXMuX2dhbWUud29ybGQuYnJpbmdUb1RvcCh0aGlzLl9nYW1lLnNsaWNrVUkuY29udGFpbmVyLmRpc3BsYXlHcm91cCk7XG59O1xuXG5Sb29tLnByb3RvdHlwZS5jbGVhckl0ZW1zID0gZnVuY3Rpb24oKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuICAgIHRoaXMuaXRlbXNbaV0uZGVzdHJveSgpO1xuICB9XG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBsYWNlYWJsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLnBsYWNlYWJsZXNbaV0uZGVzdHJveSgpO1xuICB9XG4gIGZvciAoaSA9IDA7IGkgPCB0aGlzLm5wY3MubGVuZ3RoOyBpKyspIHtcbiAgICB0aGlzLm5wY3NbaV0uZGVzdHJveSgpO1xuICB9XG4gIHRoaXMuaXRlbXMgPSBbXTtcbiAgdGhpcy5wbGFjZWFibGVzID0gW107XG4gIHRoaXMubnBjcyA9IFtdO1xufTtcblxuUm9vbS5wcm90b3R5cGUubG9hZEFyZWEgPSBmdW5jdGlvbihhcmVhKSB7XG4gIHRoaXMuYXJlYSA9IGFyZWFzW2FyZWFdO1xuXG4gIC8vYmVsb3cgc2hvdWxkIHRyYWNrIGFyZWFzIHNlZW4gc28gdGhhdCB3aGVuIGFyZWEgdHJhbnNpdGlvbiBpcyBwcmVzc2VkXG4gIC8vaXQgd2lsbCB1cGRhdGUgd2l0aCB3aGF0IHRoZSBzcGVjaWZpYyBwbGF5ZXIgaGFzIGFjY2VzcyB0by5cbiAgaWYgKCF0aGlzLl9nYW1lLnBsYXllci5zZWVuQXJlYXMuaW5jbHVkZXMoYXJlYSkpe1xuICAgIHRoaXMuX2dhbWUucGxheWVyLnNlZW5BcmVhcy5wdXNoKGFyZWEpO1xuICB9XG4gIHRoaXMubmFtZSA9IGFyZWE7XG4gIHRoaXMuX2dhbWUuY2FtZXJhLmZhZGUoJyMwMDAwMDAnLCAyMDAwKTtcbiAgdGhpcy5fZ2FtZS5jYW1lcmEub25GYWRlQ29tcGxldGUuYWRkT25jZShmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNsZWFySXRlbXMoKTtcbiAgICB0aGlzLl9nYW1lLmNhbWVyYS5mbGFzaCgnIzAwMDAwMCcsIDIwMDApO1xuICAgIHRoaXMubG9hZFRleHR1cmUodGhpcy5hcmVhWydiZyddKTtcbiAgICB0aGlzLmFkZEl0ZW1zKCk7XG4gIH0sIHRoaXMpO1xufTtcbiIsIi8qXG4gKiBTYXZlQnV0dG9uXG4gKiA9PT09XG4gKiBTYXZlIGJ1dHRvbiwgZmx1c2ggcGxheWVyIE9iamVjdCB0byBsb2NhbCBzdG9yZS5cbiAqXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgVG9hc3QgPSByZXF1aXJlKCcuL1RvYXN0Jyk7XG5cbmZ1bmN0aW9uIFNhdmVCdXR0b24oZ2FtZSkge1xuICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgMjAsIDIwLCAnc2F2ZUJ1dHRvbicpO1xuICB0aGlzLmhlaWdodCA9IDMwO1xuICB0aGlzLndpZHRoID0gNTA7XG5cbiAgdGhpcy5fZ2FtZSA9IGdhbWU7XG4gIHRoaXMuaWQgPSAnc2F2ZUJ1dHRvbic7XG4gIHRoaXMubmFtZSA9ICdTYXZlIEJ1dHRvbic7XG4gIHRoaXMuYW5jaG9yLnNldCgwLjUpO1xuICB0aGlzLmFscGhhID0gMC41O1xuICB0aGlzLmlucHV0RW5hYmxlZCA9IHRydWU7XG4gIHRoaXMuaW5wdXQudXNlSGFuZEN1cnNvciA9IHRydWU7XG4gIHRoaXMuZXZlbnRzLm9uSW5wdXREb3duLmFkZChjbGljaywgdGhpcyk7XG4gIHRoaXMuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChtb3VzZW92ZXIsIHRoaXMpO1xuICB0aGlzLmV2ZW50cy5vbklucHV0T3V0LmFkZChtb3VzZW91dCwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIGNsaWNrKCkge1xuICB0aGlzLl9nYW1lLnNvdW5kLnBsYXkoJ3NhdmUtbm90aWZpY2F0aW9uJyk7XG4gIHRoaXMuX2dhbWUuYWRkLmV4aXN0aW5nKG5ldyBUb2FzdCh0aGlzLl9nYW1lLCAnR2FtZSBTYXZlZCEnLCA1KSk7XG4gIHRoaXMuX2dhbWUuZGlhbG9ndWVXaW5kb3cuZGlzcGxheSh0cnVlKTsgLy8gcmVmcmVzaCBkaWFsb2d1ZSBkaXNwbGF5XG4gIHZhciBzYXZlU3RyaW5nID0gdGhpcy5fZ2FtZS5wbGF5ZXIuc2VyaWFsaXplKHRoaXMuX2dhbWUpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncGxheWVyU3RhdGUnLCBzYXZlU3RyaW5nKTtcbn1cblxuZnVuY3Rpb24gbW91c2VvdmVyKCkge1xuICB0aGlzLmFscGhhID0gMTtcbiAgdGhpcy5fZ2FtZS5hZGQuZXhpc3RpbmcodGhpcy50b2FzdCA9IG5ldyBUb2FzdCh0aGlzLl9nYW1lLCB0aGlzLm5hbWUsIDUpKTtcbn1cblxuZnVuY3Rpb24gbW91c2VvdXQoKSB7XG4gIGlmICh0aGlzLnRvYXN0KSB7XG4gICAgdGhpcy50b2FzdC50b2FzdC5jb250YWluZXIuZGlzcGxheUdyb3VwLnJlbW92ZUFsbCgpO1xuICAgIHRoaXMudG9hc3QuZGVzdHJveSgpO1xuICB9XG59XG5cblNhdmVCdXR0b24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5tb2R1bGUuZXhwb3J0cyA9IFNhdmVCdXR0b24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU2F2ZUJ1dHRvbjtcbiIsIi8qXG4gKiBTY3JvbGxiYXJcbiAqID09PT09PT09PVxuICpcbiAqIEJpdG1hcCBzY3JvbGxiYXIgdGhhdCBmb2xsb3dzIGEgc2V0IG9mIGdpdmVuIHBvaW50cy5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gU2Nyb2xsYmFyO1xuXG5mdW5jdGlvbiBTY3JvbGxiYXIoZ2FtZSwgeCwgeSwgdWlQYXJlbnQsIHBvaW50cywgbWF4U2Nyb2xsLCBsaW5lV2lkdGggPSAyLCBzY3JvbGxiYXJXaWR0aCA9IDYpIHtcbiAgUGhhc2VyLkdyb3VwLmNhbGwodGhpcywgZ2FtZS8qLCAuLi5hcmdzKi8pO1xuXG4gIHRoaXMuX2dhbWUgPSBnYW1lO1xuICAvLyBEaXNwYXRjaCBzaWduYWxzOyBvdGhlcnMgbWF5IGF0dGFjaCBldmVudHMgdG8gdGhlc2Ugc2lnbmFsc1xuICB0aGlzLm9uRHJhZ1N0YXJ0ID0gbmV3IFBoYXNlci5TaWduYWwoKTtcbiAgdGhpcy5vbkRyYWcgPSBuZXcgUGhhc2VyLlNpZ25hbCgpO1xuICB0aGlzLm9uRHJhZ1N0b3AgPSBuZXcgUGhhc2VyLlNpZ25hbCgpO1xuICB0aGlzLm9uU2V0VmFsdWUgPSBuZXcgUGhhc2VyLlNpZ25hbCgpO1xuXG4gIC8vIEluaXRpYWwgdmFsdWVcbiAgdGhpcy5fdmFsdWUgPSAwO1xuICAvLyBIb3cgd2lkZSBpcyBvdXIgc2Nyb2xsYmFyP1xuICB0aGlzLl9zY3JvbGxiYXJXaWR0aCA9IHNjcm9sbGJhcldpZHRoO1xuICAvLyBIb3cgbWFueSBwaXhlbHMgZG93biBjYW4gd2Ugc2Nyb2xsP1xuICB0aGlzLl9tYXhTY3JvbGwgPSBtYXhTY3JvbGw7XG4gIC8vIERldGVybWluZXMgcGF0aCBvZiBzY3JvbGxiYXIsIGFzIHdlbGwgYXMgYm91bmRzXG4gIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuXG4gIC8vIERyYXcgYml0bWFwIHBhdGhcbiAgdGhpcy5tYXhXaWR0aCA9IE1hdGgubWF4KC4uLnRoaXMucG9pbnRzLngpO1xuICB0aGlzLm1heEhlaWdodCA9IE1hdGgubWF4KC4uLnRoaXMucG9pbnRzLnkpO1xuXG4gIHZhciBibWRQYXRoID0gdGhpcy5fZ2FtZS5tYWtlLmJpdG1hcERhdGEodGhpcy5tYXhXaWR0aCArIGxpbmVXaWR0aCwgdGhpcy5tYXhIZWlnaHQgKyBsaW5lV2lkdGgpO1xuICB2YXIgaW50ZXJwSW5jID0gMSAvIHRoaXMubWF4SGVpZ2h0O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDE7IGkgKz0gaW50ZXJwSW5jKSB7XG4gICAgdmFyIHB4ID0gdGhpcy5fZ2FtZS5tYXRoLmxpbmVhckludGVycG9sYXRpb24odGhpcy5wb2ludHMueCwgaSk7XG4gICAgdmFyIHB5ID0gdGhpcy5fZ2FtZS5tYXRoLmxpbmVhckludGVycG9sYXRpb24odGhpcy5wb2ludHMueSwgaSk7XG4gICAgYm1kUGF0aC5yZWN0KHB4LCBweSwgbGluZVdpZHRoLCBsaW5lV2lkdGgsICcjNDhmMmZmJyk7XG4gIH1cblxuICB0aGlzLnNjcm9sbGJhckxpbmUgPSBuZXcgU2xpY2tVSS5FbGVtZW50LkRpc3BsYXlPYmplY3QoXG4gICAgeCwgeSwgdGhpcy5fZ2FtZS5tYWtlLnNwcml0ZSgwLDAsIGJtZFBhdGgpKTtcblxuICAvLyBEcmF3IHNjcm9sbGJhclxuICB0aGlzLl9zY3JvbGxiYXJSYXRpbyA9ICh0aGlzLm1heEhlaWdodCArIHRoaXMuX3Njcm9sbGJhcldpZHRoIC0gdGhpcy5fbWF4U2Nyb2xsKSAvIHRoaXMubWF4SGVpZ2h0O1xuXG4gIC8vIEJpdG1hcCBkYXRhIGZvciBzY3JvbGxiYXJcbiAgdGhpcy5fYm1kU2Nyb2xsID0gdGhpcy5fZ2FtZS5tYWtlLmJpdG1hcERhdGEoXG4gICAgdGhpcy5tYXhXaWR0aCArIHRoaXMuX3Njcm9sbGJhcldpZHRoLCBcbiAgICB0aGlzLm1heEhlaWdodCArIHRoaXMuX3Njcm9sbGJhcldpZHRoKTtcblxuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5fc2Nyb2xsYmFyUmF0aW87IGkgKz0gaW50ZXJwSW5jKSB7XG4gICAgcHggPSB0aGlzLl9nYW1lLm1hdGgubGluZWFySW50ZXJwb2xhdGlvbihwb2ludHMueCwgaSk7XG4gICAgcHkgPSB0aGlzLl9nYW1lLm1hdGgubGluZWFySW50ZXJwb2xhdGlvbihwb2ludHMueSwgaSk7XG4gICAgdGhpcy5fYm1kU2Nyb2xsLnJlY3QocHgsIHB5LCB0aGlzLl9zY3JvbGxiYXJXaWR0aCwgdGhpcy5fc2Nyb2xsYmFyV2lkdGgsICcjNDhmMmZmJyk7XG4gIH1cbiAgdmFyIHNjcm9sbGJhclNwcml0ZSA9IHRoaXMuX2dhbWUubWFrZS5zcHJpdGUoMCwwLCB0aGlzLl9ibWRTY3JvbGwpO1xuICB0aGlzLnNjcm9sbGJhciA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdChcbiAgICB4LXRoaXMuX3Njcm9sbGJhcldpZHRoLzIsIFxuICAgIHktdGhpcy5fc2Nyb2xsYmFyV2lkdGgvMiwgXG4gICAgc2Nyb2xsYmFyU3ByaXRlKTtcblxuICAvLyBEaXNwbGF5IGV2ZW50c1xuICBzY3JvbGxiYXJTcHJpdGUuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgc2Nyb2xsYmFyU3ByaXRlLmlucHV0LnVzZUhhbmRDdXJzb3IgPSB0cnVlO1xuICBcbiAgLy8gSGFuZGxlIG1vdXNlIGlucHV0XG4gIHNjcm9sbGJhclNwcml0ZS5ldmVudHMub25JbnB1dERvd24uYWRkKGZ1bmN0aW9uIChzcHJpdGUsIHBvaW50ZXIpIHtcbiAgICB0aGlzLl9kcmFnZ2luZyA9IHRydWU7XG4gICAgdGhpcy5fZHJhZ1BvaW50ID0gcG9pbnRlci55O1xuICAgIHRoaXMuX2RyYWdWYWx1ZSA9IHRoaXMuX3ZhbHVlO1xuXG4gICAgdGhpcy5vbkRyYWdTdGFydC5kaXNwYXRjaCh0aGlzLl92YWx1ZSk7XG4gIH0sIHRoaXMpO1xuICBzY3JvbGxiYXJTcHJpdGUuZXZlbnRzLm9uSW5wdXRVcC5hZGQoZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2RyYWdnaW5nID0gZmFsc2U7XG5cbiAgICB0aGlzLm9uRHJhZ1N0b3AuZGlzcGF0Y2godGhpcy5fdmFsdWUpO1xuICB9LCB0aGlzKTtcblxuICB0aGlzLl9nYW1lLmlucHV0LmFkZE1vdmVDYWxsYmFjayhmdW5jdGlvbiAocG9pbnRlciwgcG9pbnRlclgsIHBvaW50ZXJZKSB7XG4gICAgaWYgKCF0aGlzLl9kcmFnZ2luZylcbiAgICAgIHJldHVybjtcblxuICAgIC8vIE1lYXN1cmUgc2Nyb2xsIHJlbGF0aXZlIHRvIGRyYWdQb2ludFxuICAgIHZhciBzdGFydCA9IHRoaXMuX2RyYWdQb2ludCAtIHRoaXMuX2RyYWdWYWx1ZSp0aGlzLl9tYXhTY3JvbGw7XG4gICAgdmFyIGNsYW1wZWREZWx0YSA9IE1hdGgubWluKE1hdGgubWF4KDAsIHBvaW50ZXJZIC0gc3RhcnQpLCB0aGlzLl9tYXhTY3JvbGwpO1xuXG4gICAgLy8gVXBkYXRlIHZhbHVlXG4gICAgdGhpcy5fdmFsdWUgPSAoMS90aGlzLl9tYXhTY3JvbGwpKmNsYW1wZWREZWx0YTtcblxuICAgIC8vIFJlZHJhdyBiaXRtYXAgdG8gdXBkYXRlIHNwcml0ZVxuICAgIHRoaXMucmVkcmF3KCk7XG5cbiAgICB0aGlzLm9uRHJhZy5kaXNwYXRjaCh0aGlzLl92YWx1ZSk7XG4gICAgXG4gIH0sIHRoaXMpO1xuXG4gIC8vIEFkZCB0byBTbGlja1VJIHBhcmVudFxuICB1aVBhcmVudC5hZGQodGhpcy5zY3JvbGxiYXJMaW5lKTtcbiAgdWlQYXJlbnQuYWRkKHRoaXMuc2Nyb2xsYmFyKTtcbiAgXG59XG5TY3JvbGxiYXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuR3JvdXAucHJvdG90eXBlKTtcblNjcm9sbGJhci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTY3JvbGxiYXI7XG5cblNjcm9sbGJhci5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLl9ibWRTY3JvbGwuY2xlYXIoKTtcbiAgLy8gUmVkcmF3IGJpdG1hcCB0byB1cGRhdGUgc3ByaXRlXG4gIHZhciBzdGFydEJpdG1hcCA9IHRoaXMuX3ZhbHVlKnRoaXMuX21heFNjcm9sbCAvIHRoaXMubWF4SGVpZ2h0O1xuICB2YXIgaW50ZXJwSW5jID0gMS90aGlzLm1heEhlaWdodDtcbiAgZm9yICh2YXIgaSA9IHN0YXJ0Qml0bWFwOyBpIDwgc3RhcnRCaXRtYXAgKyB0aGlzLl9zY3JvbGxiYXJSYXRpbzsgaSArPSBpbnRlcnBJbmMpIHtcbiAgICB2YXIgcHggPSB0aGlzLl9nYW1lLm1hdGgubGluZWFySW50ZXJwb2xhdGlvbih0aGlzLnBvaW50cy54LCBpKTtcbiAgICB2YXIgcHkgPSB0aGlzLl9nYW1lLm1hdGgubGluZWFySW50ZXJwb2xhdGlvbih0aGlzLnBvaW50cy55LCBpKTtcbiAgICB0aGlzLl9ibWRTY3JvbGwucmVjdChweCwgcHksIHRoaXMuX3Njcm9sbGJhcldpZHRoLCB0aGlzLl9zY3JvbGxiYXJXaWR0aCwgJyM0OGYyZmYnKTtcbiAgfVxufTtcblxuU2Nyb2xsYmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAvLyBpZiBkaXNwbGF5IGNvbnRhaW5lciBleGlzdHMgKGkuZS4gbm90IGRlc3Ryb3llZClcbiAgaWYgKHR5cGVvZiB0aGlzLnNjcm9sbGJhckxpbmUuY29udGFpbmVyICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLnNjcm9sbGJhckxpbmUuY29udGFpbmVyICE9PSBudWxsKSB7XG4gICAgdGhpcy5zY3JvbGxiYXJMaW5lLmNvbnRhaW5lci5kaXNwbGF5R3JvdXAucmVtb3ZlQWxsKHRydWUpO1xuICAgIHRoaXMuc2Nyb2xsYmFyTGluZS5jb250YWluZXIuZGlzcGxheUdyb3VwLmRlc3Ryb3koKTtcbiAgICB0aGlzLnNjcm9sbGJhckxpbmUuY29udGFpbmVyID0gdW5kZWZpbmVkO1xuICB9XG4gIFxuICBpZiAodHlwZW9mIHRoaXMuc2Nyb2xsYmFyLmNvbnRhaW5lciAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5zY3JvbGxiYXIuY29udGFpbmVyICE9PSBudWxsKSB7XG4gICAgdGhpcy5zY3JvbGxiYXIuY29udGFpbmVyLmRpc3BsYXlHcm91cC5yZW1vdmVBbGwodHJ1ZSk7XG4gICAgdGhpcy5zY3JvbGxiYXIuY29udGFpbmVyLmRpc3BsYXlHcm91cC5kZXN0cm95KCk7XG4gICAgdGhpcy5zY3JvbGxiYXIuY29udGFpbmVyID0gdW5kZWZpbmVkO1xuICB9XG4gIHRoaXMuc2Nyb2xsYmFyTGluZS5zcHJpdGUgPSB1bmRlZmluZWQ7XG4gIHRoaXMuc2Nyb2xsYmFyLnNwcml0ZSA9IHVuZGVmaW5lZDtcbn07XG5cblNjcm9sbGJhci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAvLyBUT0RPOiBTdHViLlxufTtcblxuLyoqIEV4cGxpY2l0bHkgZGVmaW5lIHNldHRlcnMgYW5kIGdldHRlcnMgKi9cbi8vIHZhbHVlXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU2Nyb2xsYmFyLnByb3RvdHlwZSwgJ3ZhbHVlJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWU7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFsdWUgPSBNYXRoLm1pbihNYXRoLm1heCgwLCB2YWx1ZSksIDEpO1xuICAgIHRoaXMucmVkcmF3KCk7XG4gICAgdGhpcy5vblNldFZhbHVlLmRpc3BhdGNoKHRoaXMuX3ZhbHVlKTtcbiAgfVxufSk7XG4iLCIvKlxuICogVG9hc3RcbiAqID09PT1cbiAqXG4gKiBBIHNhbXBsZSBwcmVmYWIgKGV4dGVuZGVkIGdhbWUgb2JqZWN0IGNsYXNzKSwgZGlzcGxheWluZyBhIHRvYXN0IChwb3B1cCBhdCB0b3Agb2YgZ2FtZSBzY3JlZW4pIHRoYXQgZGlzcGxheXNcbiAqIHRleHQgYW5kIGRpc2FwcGVhcnMgYWZ0ZXIgc2V2ZXJhbCBzZWNvbmRzLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHRleHRzdHlsZXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL3RleHRzdHlsZXMuanNvbicpO1xuXG5mdW5jdGlvbiBUb2FzdChnYW1lLCBtZXNzYWdlLCB0aW1lb3V0KSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUpO1xuXG4gIHRoaXMuX2dhbWUgPSBnYW1lO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0O1xuXG4gIGlmIChnYW1lLnRvYXN0KSB7XG4gICAgZ2FtZS50b2FzdC50b2FzdC5jb250YWluZXIuZGlzcGxheUdyb3VwLnJlbW92ZUFsbCgpO1xuICAgIGdhbWUudG9hc3QuZGVzdHJveSgpO1xuICB9XG5cbiAgLy8gcHJpdmF0ZSBtZW1iZXJzIHNwZWNpZnlpbmcgbWFyZ2luIGFuZCBwYWRkaW5nXG4gIHRoaXMudG9hc3RUZXh0WSA9IDE2O1xuXG4gIHRoaXMudG9hc3RIZWlnaHQgPSBnYW1lLmhlaWdodCAqIDEvMTI7XG4gIHRoaXMudG9hc3RXaWR0aCA9IGdhbWUud2lkdGggKiAxLzI7XG5cbiAgdGhpcy50b2FzdFggPSBnYW1lLndpZHRoICogMS8yIC0gdGhpcy50b2FzdFdpZHRoICogMS8yO1xuICB0aGlzLnRvYXN0WSA9IDg7XG5cbiAgZ2FtZS5zbGlja1VJLmFkZCh0aGlzLnRvYXN0ID0gbmV3IFNsaWNrVUkuRWxlbWVudC5EaXNwbGF5T2JqZWN0KFxuICAgIHRoaXMudG9hc3RYLCB0aGlzLnRvYXN0WSwgZ2FtZS5tYWtlLnNwcml0ZSgwLCAwLCAndG9hc3QnKSxcbiAgICB0aGlzLnRvYXN0V2lkdGgsIHRoaXMudG9hc3RIZWlnaHQpKTtcbiAgdGhpcy50b2FzdC5kaXNwbGF5T2JqZWN0LndpZHRoID0gdGhpcy50b2FzdFdpZHRoO1xuICB0aGlzLnRvYXN0LmRpc3BsYXlPYmplY3QuaGVpZ2h0ID0gdGhpcy50b2FzdEhlaWdodDtcblxuICBnYW1lLnRvYXN0ID0gdGhpcztcblxuICB0aGlzLnRvYXN0LmFkZChcbiAgICB0aGlzLnRvYXN0VGV4dCA9IG5ldyBTbGlja1VJLkVsZW1lbnQuRGlzcGxheU9iamVjdCgwLCAwLCBcbiAgICAgIGdhbWUubWFrZS50ZXh0KDAsIHRoaXMudG9hc3RUZXh0WSwgbWVzc2FnZSwgdGV4dHN0eWxlc1sndG9hc3QnXSkpXG4gICk7XG4gIHRoaXMudG9hc3RUZXh0LmRpc3BsYXlPYmplY3Quc2V0VGV4dEJvdW5kcygwLCB0aGlzLnRvYXN0VGV4dFksIHRoaXMudG9hc3RXaWR0aCwgdGhpcy50b2FzdEhlaWdodCk7XG5cbiAgdGhpcy50b2FzdC5hbHBoYSA9IDAuODtcblxuICBnYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGltZW91dCwgZGVzdHJveVBvcHVwLCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gZGVzdHJveVBvcHVwKCkge1xuICB0aGlzLnRvYXN0LmNvbnRhaW5lci5kaXNwbGF5R3JvdXAucmVtb3ZlQWxsKCk7XG4gIHRoaXMuZGVzdHJveSgpO1xufVxuXG5Ub2FzdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5Hcm91cC5wcm90b3R5cGUpO1xubW9kdWxlLmV4cG9ydHMgPSBUb2FzdC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBUb2FzdDsiLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYXJkID0gcmVxdWlyZSgnLi4vb2JqZWN0cy9DYXJkJyk7XG52YXIgQXJndW1lbnQgPSByZXF1aXJlKCcuLi9vYmplY3RzL0FyZ3VtZW50Jyk7XG52YXIgaXRlbXMgPSByZXF1aXJlKCcuLi8uLi9zdGF0aWMvYXNzZXRzL2l0ZW1zLmpzb24nKTtcbnZhciBQbGF5ZXIgPSByZXF1aXJlKCcuLi9vYmplY3RzL1BsYXllcicpO1xudmFyIFJvb20gPSByZXF1aXJlKCcuLi9vYmplY3RzL1Jvb20nKTtcblxudmFyIEJhdHRsZVVpID0gcmVxdWlyZSgnLi4vb2JqZWN0cy9CYXR0bGVVaS5qcycpO1xudmFyIEFyZ3VtZW50TWFuYWdlciA9IHJlcXVpcmUoJy4uL29iamVjdHMvQXJndW1lbnRNYW5hZ2VyJyk7XG52YXIgRGlhbG9ndWVXaW5kb3cgPSByZXF1aXJlKCcuLi9vYmplY3RzL0RpYWxvZ3VlV2luZG93Jyk7XG52YXIgQ3VzdG9tQWN0aW9ucyA9IHJlcXVpcmUoJy4uL3V0aWxzL0N1c3RvbUFjdGlvbnMnKTtcblxuZXhwb3J0cy5wcmVsb2FkID0gZnVuY3Rpb24oZ2FtZSkge1xuICAvLyBwcmVsb2FkIGFsbCBVSSBtZW51IHRoZW1lcy5cbiAgZ2FtZS5zbGlja1VJLmxvYWQoJ3VpL2tlbm5leS10aGVtZS9rZW5uZXkuanNvbicpO1xufTtcblxuZXhwb3J0cy5jcmVhdGUgPSBmdW5jdGlvbiAoZ2FtZSkge1xuICBpZiAoZ2FtZS5wbGF5ZXIgPT09IG51bGwgfHwgdHlwZW9mIGdhbWUucGxheWVyID09PSAndW5kZWZpbmVkJykge1xuICAgIGdhbWUucGxheWVyID0gZ2FtZS5hZGQuZXhpc3RpbmcobmV3IFBsYXllcihnYW1lKSk7XG4gICAgLy8gRFVNTVkgREFUQVxuICAgIGdhbWUucGxheWVyLmludmVudG9yeS5wdXNoKCdsaXN0ZW5lcicpO1xuICAgIGdhbWUucGxheWVyLmludmVudG9yeS5wdXNoKCdub3RlJyk7XG4gICAgZ2FtZS5yb29tID0gKG5ldyBSb29tKGdhbWUsICdoYW5nYXInKSk7XG4gICAgLy8gRU5EIERVTU1ZIERBVEFcbiAgfVxuXG4gIC8vIE11c2ljXG4gIGlmICh0eXBlb2YgZ2FtZS5tdXNpYyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2FtZS5tdXNpYyAhPT0gbnVsbClcbiAgICBnYW1lLm11c2ljLmZhZGVPdXQoMTAwMCk7IC8vIGZhZGUgb3V0IHByZXZpb3VzIG11c2ljXG4gIFxuICBnYW1lLm11c2ljID0gZ2FtZS5zb3VuZC5wbGF5KCdvZmYtbGltaXRzJyk7XG4gIGdhbWUubXVzaWMuZmFkZUluKDMwMDApO1xuICBnYW1lLm11c2ljLmxvb3BGdWxsKDEpO1xuXG4gIGdhbWUuYXJndW1lbnRNYW5hZ2VyID0gbmV3IEFyZ3VtZW50TWFuYWdlcihnYW1lKTtcbiAgdmFyIGN1c3RvbUFjdGlvbnMgPSBuZXcgQ3VzdG9tQWN0aW9ucyhnYW1lKTtcbiAgZ2FtZS5hcmd1bWVudE1hbmFnZXIgPSBuZXcgQXJndW1lbnRNYW5hZ2VyKGdhbWUsIGN1c3RvbUFjdGlvbnMpO1xuXG4gIGdhbWUuYXJndW1lbnRNYW5hZ2VyLmxvYWRKU09OQ29udmVyc2F0aW9uKCdiYXR0bGUwMScpO1xuICBnYW1lLmN1cnJlbnRBcmd1bWVudCA9IDA7XG4gIGdhbWUucGxheWVyVHVybiA9IHRydWU7XG4gIGdhbWUuY3JlZCA9IDQ7XG4gIGdhbWUucGVyc3Vhc2lvbiA9IDI7XG5cbiAgLy8gYWRkaW5nIGluIHBsYXllciBjYXJkcyBhbmQgZmFjZVxuICBnYW1lLnBsYXllckRlY2sgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBnYW1lLnBsYXllci5pbnZlbnRvcnkubGVuZ3RoOyBpKyspIHtcbiAgICBnYW1lLnBsYXllckRlY2sucHVzaChuZXcgQ2FyZChnYW1lLCAwLDAsIGl0ZW1zW2dhbWUucGxheWVyLmludmVudG9yeVtpXV1bJ2lkJ10pKTtcbiAgfVxuXG4gIC8vIGFkZGluZyBvcHBvbmVudCBmYWNlIGFuZCBvcHBvbmVudCBjYXJkcyAtLXRvIGRvOiBmZXRjaCB0aGVzZSBmcm9tIG1haW4gZ2FtZSBzdGF0ZVxuICBnYW1lLm9wcG9uZW50RGVjayA9IFtdO1xuICB2YXIgYXJncyA9IGdhbWUuYXJndW1lbnRNYW5hZ2VyLmdldEFsbEFyZ3VtZW50cygpO1xuICBmb3IgKGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgIC8vIFRPRE86IHN1cHBvcnQgZm9yIG11bHRpcGxlIGNvdW50ZXJzXG4gICAgZ2FtZS5vcHBvbmVudERlY2sucHVzaChuZXcgQXJndW1lbnQoZ2FtZSwgMCwwLCBhcmdzW2ldWydpZCddLCBhcmdzW2ldWydjb3VudGVycyddWzBdKSk7XG4gIH1cblxuICBnYW1lLmJhdHRsZVVpID0gbmV3IEJhdHRsZVVpKGdhbWUsIGdhbWUucGxheWVyRGVjaywgZ2FtZS5vcHBvbmVudERlY2spO1xuICBnYW1lLmJhdHRsZVVpLmNhcmRTaWduYWwuYWRkKGNhcmRBY3Rpb24sIHRoaXMpO1xuXG4gIGdhbWUuZGlhbG9ndWVXaW5kb3cgPSBuZXcgRGlhbG9ndWVXaW5kb3coZ2FtZSwgZ2FtZS5hcmd1bWVudE1hbmFnZXIpO1xuICBnYW1lLmRpYWxvZ3VlV2luZG93LmJlZ2luKCdiYXR0bGUwMScpO1xufTtcblxuZnVuY3Rpb24gY2FyZEFjdGlvbihnYW1lLCBjYXJkKSB7XG4gIGlmIChnYW1lLnBsYXllclR1cm4pIHtcbiAgICBnYW1lLmRpYWxvZ3VlV2luZG93LnNraXBUZXh0KCk7XG5cbiAgICBnYW1lLnBsYXllclR1cm4gPSBmYWxzZTtcbiAgICBnYW1lLmJhdHRsZVVpLmNhcmRzSW5wdXRFbmFibGVkKGZhbHNlKTtcblxuICAgIHZhciBhcmd1bWVudCA9IGdhbWUub3Bwb25lbnREZWNrW2dhbWUuY3VycmVudEFyZ3VtZW50XTtcblxuICAgIHZhciBpc0NvcnJlY3QgPSBjYXJkLmtleSA9PT0gYXJndW1lbnQua2V5O1xuXG4gICAgaWYgKGlzQ29ycmVjdCkge1xuXG4gICAgICBnYW1lLmJhdHRsZVVpLnBsYXlDYXJkQW5pbWF0aW9uKGNhcmQsIGFyZ3VtZW50LCB0cnVlKTtcbiAgICAgIGdhbWUub3Bwb25lbnREZWNrW2dhbWUuY3VycmVudEFyZ3VtZW50XSA9IHVuZGVmaW5lZDtcbiAgICAgIGFyZ3VtZW50LmRlc3Ryb3koKTtcbiAgICAgIGNhcmQuZGVzdHJveSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnYW1lLmJhdHRsZVVpLnBsYXlDYXJkQW5pbWF0aW9uKGNhcmQsIGFyZ3VtZW50LCBmYWxzZSk7XG5cbiAgICB9XG5cbiAgICBnYW1lLmJhdHRsZVVpLmNhcmRBbmltQ29tcGxldGVTaWduYWwuYWRkKGFyZ3VtZW50SW50ZXJsdWRlLCB0aGlzLCBnYW1lLCBpc0NvcnJlY3QpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFyZ3VtZW50SW50ZXJsdWRlKGdhbWUsIGlzQ29ycmVjdCkge1xuICBnYW1lLmFyZ3VtZW50TWFuYWdlci5zdGFydEFyZ0ludGVybHVkZShpc0NvcnJlY3QpO1xuICBnYW1lLmRpYWxvZ3VlV2luZG93LmRpc3BsYXkoKTtcbiAgZ2FtZS5hcmd1bWVudE1hbmFnZXIuaW50ZXJsdWRlQ29tcGxldGVTaWduYWwuYWRkKG9wcG9uZW50VHVybiwgdGhpcywgMCwgZ2FtZSk7XG5cbiAgZ2FtZS5iYXR0bGVVaS5jYXJkQW5pbUNvbXBsZXRlU2lnbmFsLnJlbW92ZUFsbCgpO1xufVxuXG5mdW5jdGlvbiBvcHBvbmVudFR1cm4oZ2FtZSkge1xuICBpZiAoZ2FtZS5vcHBvbmVudERlY2tbZ2FtZS5jdXJyZW50QXJndW1lbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICBnYW1lLnBlcnN1YXNpb24gLT0gMTtcbiAgICBnYW1lLmJhdHRsZVVpLnVwZGF0ZVBlcnN1YXNpb25CYXIoKTsgICAgXG4gIH0gZWxzZSBpZiAoZ2FtZS5vcHBvbmVudERlY2tbZ2FtZS5jdXJyZW50QXJndW1lbnRdKSB7XG5cbiAgICBnYW1lLmNyZWQgLT0gMTtcbiAgICBnYW1lLmJhdHRsZVVpLnVwZGF0ZUNyZWRCYXIoZ2FtZS5jcmVkLCB0cnVlKTsgLy8gdXBkYXRlIGNyZWQgYmFyIHdpdGggZGFtYWdlIGluZGljYXRpb25cbiAgICBnYW1lLm9wcG9uZW50RGVja1tnYW1lLmN1cnJlbnRBcmd1bWVudF0uZGVzdHJveSgpO1xuICB9IGVsc2Uge1xuICAgIGdhbWUucGVyc3Vhc2lvbiAtPSAxO1xuICAgIGdhbWUuYmF0dGxlVWkudXBkYXRlUGVyc3Vhc2lvbkJhcigpO1xuICB9XG4gIHVwZGF0ZUN1cnJlbnRBcmd1bWVudChnYW1lKTtcbiAgZ2FtZS5iYXR0bGVVaS51cGRhdGVBcmd1bWVudHMoZ2FtZS5vcHBvbmVudERlY2ssIGdhbWUuY3VycmVudEFyZ3VtZW50KTtcbiAgZ2FtZS5iYXR0bGVVaS5wb3NpdGlvbkFyZ3VtZW50cyhnYW1lLCB0cnVlKTtcbiAgLy8gRGlzcGxheSBhcmd1bWVudHMgb24gYW5pbWF0aW9uIGNvbXBsZXRpb25cbiAgZ2FtZS5iYXR0bGVVaS5hcmdBbmltQ29tcGxldGVTaWduYWwuYWRkKGZ1bmN0aW9uICgpIHtcbiAgICB1cGRhdGVBcmd1bWVudFdpbmRvdyhnYW1lKTtcbiAgICBnYW1lLmJhdHRsZVVpLmNhcmRzSW5wdXRFbmFibGVkKHRydWUpO1xuICAgIGdhbWUucGxheWVyVHVybiA9IHRydWU7XG4gICAgZ2FtZS5iYXR0bGVVaS5hcmdBbmltQ29tcGxldGVTaWduYWwucmVtb3ZlQWxsKCk7XG4gIH0sIHRoaXMpO1xuXG4gIGdhbWUuYXJndW1lbnRNYW5hZ2VyLmludGVybHVkZUNvbXBsZXRlU2lnbmFsLnJlbW92ZUFsbCgpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBcmd1bWVudFdpbmRvdyhnYW1lKSB7XG4gIGdhbWUuYXJndW1lbnRNYW5hZ2VyLmFkdmFuY2VUb1RhcmdldChnYW1lLmN1cnJlbnRBcmd1bWVudCk7XG4gIGlmKGdhbWUuY3JlZCA9PT0gMCkge1xuICAgIGdhbWUuYXJndW1lbnRNYW5hZ2VyLmlkeCA9IDM7XG4gIH1cbiAgaWYoZ2FtZS5wZXJzdWFzaW9uID09PSAwKSB7XG4gICAgZ2FtZS5hcmd1bWVudE1hbmFnZXIuaWR4ID0gNDtcbiAgfVxuICBnYW1lLmRpYWxvZ3VlV2luZG93LmRpc3BsYXkoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudEFyZ3VtZW50KGdhbWUpIHtcbiAgZ2FtZS5jdXJyZW50QXJndW1lbnQgKz0gMTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbWUub3Bwb25lbnREZWNrLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGlkeCA9IGdhbWUuY3VycmVudEFyZ3VtZW50ICsgaTtcbiAgICBpZiAoaWR4ID49IGdhbWUub3Bwb25lbnREZWNrLmxlbmd0aClcbiAgICAgIGlkeCAtPSBnYW1lLm9wcG9uZW50RGVjay5sZW5ndGg7XG4gICAgLy8gaWYgZXhpc3RzXG4gICAgaWYgKHR5cGVvZiBnYW1lLm9wcG9uZW50RGVja1tpZHhdICE9PSAndW5kZWZpbmVkJyAmJiBnYW1lLm9wcG9uZW50RGVja1tpZHhdICE9PSBudWxsKSB7XG4gICAgICBnYW1lLmN1cnJlbnRBcmd1bWVudCA9IGlkeDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgLy8gZXhpdGluZyBtZWFucyB3ZSBoYXZlIG5vIG1vcmUgYXJndW1lbnRzXG59XG4iLCIvKlxuICogQm9vdCBzdGF0ZVxuICogPT09PT09PT09PVxuICpcbiAqIFRoZSBmaXJzdCBzdGF0ZSBvZiB0aGUgZ2FtZSwgcmVzcG9uc2libGUgZm9yIHNldHRpbmcgdXAgc29tZSBQaGFzZXJcbiAqIGZlYXR1cmVzLiBBZGp1c3QgdGhlIGdhbWUgYXBwZWFyYW5jZSwgbnVtYmVyIG9mIGlucHV0IHBvaW50ZXJzLCBzY3JlZW5cbiAqIG9yaWVudGF0aW9uIGhhbmRsaW5nIGV0Yy4gdXNpbmcgdGhpcyBnYW1lIHN0YXRlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2V0cyA9IHJlcXVpcmUoJy4uL2Fzc2V0cycpO1xuXG5leHBvcnRzLnByZWxvYWQgPSBmdW5jdGlvbiAoZ2FtZSkge1xuICAvLyBQb2ludCB0aGUgUGhhc2VyIEFzc2V0IExvYWRlciB0byB3aGVyZSB5b3VyIGdhbWUgYXNzZXRzIGxpdmUuXG4gIGdhbWUubG9hZC5wYXRoID0gJ2Fzc2V0cy8nO1xuXG4gIC8vIEluaXRpYWxpemUgcGh5c2ljcyBlbmdpbmVzIGhlcmUuIFJlbWVtYmVyIHRoYXQgUGhhc2VyIGJ1aWxkcyBpbmNsdWRpbmdcbiAgLy8gQXJjYWRlIFBoeXNpY3MgaGF2ZSBpdCBlbmFibGVkIGJ5IGRlZmF1bHQuXG4gIC8vZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLlAyKTtcblxuICAvLyBBZGp1c3QgaG93IG1hbnkgcG9pbnRlcnMgUGhhc2VyIHdpbGwgY2hlY2sgZm9yIGlucHV0IGV2ZW50cy5cbiAgZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDI7XG5cbiAgLy8gU2V0IHRoZSBhbGlnbm1lbnQgb2YgdGhlIGdhbWUgY2FudmFzIHdpdGhpbiB0aGUgcGFnZS5cbiAgZ2FtZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuXG4gIC8vIEFkanVzdCB0aGUgc2NhbGluZyBtb2RlIG9mIHRoZSBnYW1lIGNhbnZhcy5cbiAgLy8gRXhhbXBsZTogSWYgeW91J3JlIGRldmVsb3BpbmcgYSBwaXhlbC1hcnQgZ2FtZSwgc2V0IGl0IHRvICdVU0VSX1NDQUxFJy5cbiAgZ2FtZS5zY2FsZS5zY2FsZU1vZGUgPSBQaGFzZXIuU2NhbGVNYW5hZ2VyLk5PX1NDQUxFO1xuXG4gIC8vIFdoZW4gdXNpbmcgJ1VTRVJfU0NBTEUnIHNjYWxpbmcgbW9kZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGFkanVzdCB0aGVcbiAgLy8gc2NhbGluZyBmYWN0b3IuXG4gIC8vZ2FtZS5zY2FsZS5zZXRVc2VyU2NhbGUoMik7XG5cbiAgLy8gVW5jb21tZW50IHRoZSBmb2xsb3dpbmcgbGluZSB0byBhZGp1c3QgdGhlIHJlbmRlcmluZyBvZiB0aGUgY2FudmFzIHRvXG4gIC8vIGNyaXNwIGdyYXBoaWNzLiBHcmVhdCBmb3IgcGl4ZWwtYXJ0IVxuICAvL1BoYXNlci5DYW52YXMuc2V0SW1hZ2VSZW5kZXJpbmdDcmlzcChnYW1lLmNhbnZhcyk7XG5cbiAgLy8gVW5jb21tZW50IHRoaXMgbGluZSB0byBkaXNhYmxlIHNtb290aGluZyBvZiB0ZXh0dXJlcy5cbiAgLy9nYW1lLnN0YWdlLnNtb290aGVkID0gZmFsc2U7XG5cbiAgLy8gSWYgdGhlIGdhbWUgY2FudmFzIGxvc2VzIGZvY3VzLCBrZWVwIHRoZSBnYW1lIGxvb3AgcnVubmluZy5cbiAgZ2FtZS5zdGFnZS5kaXNhYmxlVmlzaWJpbGl0eUNoYW5nZSA9IHRydWU7XG5cbiAgLy8gV2hldGhlciB0byB1c2UgZnJhbWUtYmFzZWQgaW50ZXJwb2xhdGlvbnMgb3Igbm90LlxuICBnYW1lLnR3ZWVucy5mcmFtZUJhc2VkID0gZmFsc2U7XG5cbiAgLy8gTG9hZCB0aGUgZ3JhcGhpY2FsIGFzc2V0cyByZXF1aXJlZCB0byBzaG93IHRoZSBzcGxhc2ggc2NyZWVuIGxhdGVyLFxuICAvLyB1c2luZyB0aGUgYXNzZXQgcGFjayBkYXRhLlxuICBnYW1lLmxvYWQucGFjaygnYm9vdCcsIG51bGwsIGFzc2V0cyk7XG59O1xuXG5leHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uIChnYW1lKSB7XG4gIC8vIEFmdGVyIGFwcGx5aW5nIHRoZSBmaXJzdCBhZGp1c3RtZW50cyBhbmQgbG9hZGluZyB0aGUgc3BsYXNoIHNjcmVlblxuICAvLyBhc3NldHMsIG1vdmUgdG8gdGhlIG5leHQgZ2FtZSBzdGF0ZS5cbiAgZ2FtZS5zdGF0ZS5zdGFydCgnUHJlbG9hZGVyJyk7XG59O1xuIiwiLypcbiogQ3JlZGl0cyBzdGF0ZVxuKiA9PT09PT09PT09PT09XG4qXG4qIFRoZSBwbGF5ZXIgc2hvdWxkIGJlIGFibGUgdG8gcmV0dXJuIHRvIHRoZSBtYWluIG1lbnUuXG4qXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmRlc2NyaXB0aW9uID0gJ0NvbmdyYXR1bGF0aW9ucyEgWW91XFwndmUgcmVhY2hlZCB0aGUgZW5kIG9mIG91ciBwbGF5YWJsZSBkZW1vLiBcXFxuICBXZSBob3BlIHlvdSBlbmpveWVkIHRoZSBmaXJzdCBjaGFwdGVyIG9mIFF1YXNhcmlhIGFzIG11Y2ggYXMgd2UgZW5qb3llZCBtYWtpbmcgaXQhJztcbiAgdGhpcy5jcmVkaXRzID0gJ0RldmVsb3BlZCBieTpcXG5BbGV4YW5kcm9zIENocmlzdG9kb3Vsb3UtUnViYWxjYXZhXFxuSGFuYSBMZWVcXG5BbWJlciBUaG9tYXNcXG5FZHdhcmQgV2FuZyc7XG59O1xuXG5leHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uIChnYW1lKSB7XG4gIHRoaXMuY2FtZXJhLmZsYXNoKCcjMDAwMDAwJywgMjAwMCk7XG5cbiAgLy9taWdodCBub3QgYmUgaW4gcXVvdGVzLCBpdHMgYW4gaXNzdWUgYmVsb3dcbiAgdmFyIHNjcmVlbiA9IGdhbWUuYWRkLnNwcml0ZShnYW1lLndvcmxkLmNlbnRlclgsIGdhbWUud29ybGQuY2VudGVyWSwgJ21lbnVfc2NyZWVuJyk7XG4gIHNjcmVlbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gIGxldCBzY3JlZW5Gb250ID0gJ0NpbnplbCBEZWNvcmF0aXZlJztcbiAgbGV0IGZpbGxDb2xvciA9ICcjNDJkZmY0JztcblxuICB2YXIgZGVzY1RleHQgPSBnYW1lLmFkZC50ZXh0KGdhbWUud29ybGQuY2VudGVyWCwgZ2FtZS53b3JsZC5jZW50ZXJZIC0gMTAwLCB0aGlzLmRlc2NyaXB0aW9uLCB7XG4gICAgZm9udDogJzE2cHggJyArIHNjcmVlbkZvbnQsXG4gICAgZmlsbDogZmlsbENvbG9yLFxuICAgIGFsaWduOiAnY2VudGVyJyxcbiAgICB3b3JkV3JhcDogdHJ1ZSxcbiAgICB3b3JkV3JhcFdpZHRoOiBnYW1lLndpZHRoIC0gMzAwXG4gIH0pO1xuXG4gIHZhciBjcmVkaXRzVGV4dCA9IGdhbWUuYWRkLnRleHQoZ2FtZS53b3JsZC5jZW50ZXJYLCBnYW1lLndvcmxkLmNlbnRlclkgKyAxMjAsIHRoaXMuY3JlZGl0cywge1xuICAgIGZvbnQ6ICcxNnB4ICcgKyBzY3JlZW5Gb250LFxuICAgIGZpbGw6IGZpbGxDb2xvcixcbiAgICBhbGlnbjogJ2NlbnRlcicsXG4gICAgd29yZFdyYXA6IHRydWUsXG4gICAgd29yZFdyYXBXaWR0aDogZ2FtZS53aWR0aCAtIDMwMFxuICB9KTtcblxuICB2YXIgbWFpbk1lbnVUZXh0ID0gZ2FtZS5hZGQudGV4dChnYW1lLndvcmxkLmNlbnRlclgsIGdhbWUud29ybGQuY2VudGVyWSwgJ01haW4gTWVudScsIHtcbiAgICBmb250OiAnNTBweCAnICsgc2NyZWVuRm9udCxcbiAgICBmaWxsOiBmaWxsQ29sb3IsXG4gICAgYWxpZ246ICdjZW50ZXInXG4gIH0pO1xuXG4gIGRlc2NUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gIGNyZWRpdHNUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgbWFpbk1lbnVUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG4gIG1haW5NZW51VGV4dC5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICBtYWluTWVudVRleHQuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChmdW5jdGlvbigpIHtcbiAgICBtYWluTWVudVRleHQuZmlsbCA9ICcjZmYwMGZmJztcbiAgfSwgdGhpcyk7XG5cbiAgbWFpbk1lbnVUZXh0LmV2ZW50cy5vbklucHV0T3V0LmFkZChmdW5jdGlvbigpIHtcbiAgICBtYWluTWVudVRleHQuZmlsbCA9ICcjNDJkZmY0JztcbiAgfSwgdGhpcyk7XG5cbiAgbWFpbk1lbnVUZXh0LmV2ZW50cy5vbklucHV0RG93bi5hZGQoZnVuY3Rpb24gKCkge1xuICAgIGdhbWUuc3RhdGUuc3RhcnQoJ01haW5NZW51Jyk7XG4gIH0sIHRoaXMpO1xuXG59O1xuIiwiLypcbiogR2FtZSBzdGF0ZVxuKiA9PT09PT09PT09XG4qXG4qIEEgc2FtcGxlIEdhbWUgc3RhdGUsIGRpc3BsYXlpbmcgdGhlIFBoYXNlciBsb2dvLlxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUm9vbSA9IHJlcXVpcmUoJy4uL29iamVjdHMvUm9vbScpO1xudmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL29iamVjdHMvUGxheWVyJyk7XG52YXIgRGlhbG9ndWVXaW5kb3cgPSByZXF1aXJlKCcuLi9vYmplY3RzL0RpYWxvZ3VlV2luZG93Jyk7XG52YXIgQ29udmVyc2F0aW9uTWFuYWdlciA9IHJlcXVpcmUoJy4uL29iamVjdHMvQ29udmVyc2F0aW9uTWFuYWdlcicpO1xudmFyIEN1c3RvbUFjdGlvbnMgPSByZXF1aXJlKCcuLi91dGlscy9DdXN0b21BY3Rpb25zJyk7XG52YXIgTWVtb3J5QmFua1dpbmRvdyA9IHJlcXVpcmUoJy4uL29iamVjdHMvTWVtb3J5QmFua1dpbmRvdycpO1xudmFyIEFyZWFUcmFuc2l0aW9uV2luZG93ID0gcmVxdWlyZSgnLi4vb2JqZWN0cy9BcmVhVHJhbnNpdGlvbldpbmRvdycpO1xudmFyIFNhdmVCdXR0b24gPSByZXF1aXJlKCcuLi9vYmplY3RzL1NhdmVCdXR0b24nKTtcblxuZXhwb3J0cy5wcmVsb2FkID0gZnVuY3Rpb24oZ2FtZSkge1xuICAvLyBwcmVsb2FkIGFsbCBVSSBtZW51IHRoZW1lcy5cbiAgZ2FtZS5zbGlja1VJLmxvYWQoJ3VpL2tlbm5leS10aGVtZS9rZW5uZXkuanNvbicpO1xufTtcblxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oZ2FtZSwgcmVzdW1lR2FtZSwgZnJvbUJhdHRsZSl7XG5cbiAgbGV0IHBsYXllclN0YXRlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3BsYXllclN0YXRlJyk7XG4gIGlmIChmcm9tQmF0dGxlKSB7XG4gICAgZ2FtZS5yb29tID0gbmV3IFJvb20oZ2FtZSwgJ2hhbmdhcicpOyAgXG4gIH0gZWxzZSBpZiAocmVzdW1lR2FtZSAmJiBwbGF5ZXJTdGF0ZSAhPT0gbnVsbCl7XG4gICAgUGxheWVyLnVuc2VyaWFsaXplKHBsYXllclN0YXRlLCBnYW1lKTtcbiAgICAvL2N1cnJlbnQgcm9vbSBpcyBhY3R1YWxseSByb29tLmFyZWFcbiAgICAvL25lZWQgdG8gZGVlcCBjb3B5LCBvdGhlcndpc2Ugd2Ugd2lsbCBsb29zZSB0aGUgYXJlYSBpbmZvXG4gICAgdmFyIGFyZWEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdhbWUucGxheWVyLmN1cnJlbnRSb29tKSk7XG4gICAgZ2FtZS5yb29tID0gKG5ldyBSb29tKGdhbWUsIGFyZWEuaWQpKTtcbiAgICBnYW1lLnJvb20uYXJlYSA9IGFyZWE7XG5cbiAgfSBlbHNlIHsgLy9jaGVjayBpZiBvbGQgbW9kZWwgYmxpbmtzXG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgZ2FtZS5wbGF5ZXIgPSAobmV3IFBsYXllcihnYW1lKSk7XG4gICAgLy9nYW1lLnBsYXllci52YXJpYWJsZXNbJ2RlYnVnJ10gPSAndHJ1ZSc7ICAgIC8vIGNvbW1lbnQgdGhpcyBvdXQgdG8gZ2V0IHJpZCBvZiBERUJVRyAtIFNLSVAgVE8gRU5EIGNvbnZlcnNhdGlvbiBvcHRpb25zXG4gICAgZ2FtZS5wbGF5ZXIuY29udm9GaWxlID0gJ3Byb2xvZ3VlMDEnO1xuICAgIGdhbWUucm9vbSA9IChuZXcgUm9vbShnYW1lLCAnc2h1dHRsZScpKTtcblxuICB9XG5cbn07XG5cbmV4cG9ydHMuY3JlYXRlID0gZnVuY3Rpb24gKGdhbWUpIHtcblxuICB0aGlzLmNhbWVyYS5mbGFzaCgnIzAwMDAwMCcsIDIwMDApO1xuICBnYW1lLmFkZC5leGlzdGluZyhnYW1lLnBsYXllcik7XG5cbiAgZ2FtZS5hZGQuZXhpc3RpbmcoZ2FtZS5yb29tKTtcbiAgZ2FtZS5yb29tLmFkZEl0ZW1zKCk7XG5cblxuICAvLyB3ZSBwcmV2aW91c2x5IGhhZCBtdXNpYyBpbiB0aGUgZ2FtZSBzdGF0ZSwgYnV0IEkgbW92ZSBpdCB0byB0aGUgcm9vbSBvYmplY3RcbiAgLy8gc28gdGhhdCB3ZSBjYW4gaGF2ZSBkaWZmZXJlbnQgdGhlbWVzIGZvciBkaWZmZXJlbnQgcm9vbXNcbiAgLy8gbmVlZCB0byBzZXQgdGhlIG11c2ljIGluIHRoZSBvdGhlciBzdGF0ZXMgbGlrZSBsb2dpYyBiYXR0bGVzXG5cbiAgZ2FtZS5hZGQuZXhpc3RpbmcobmV3IFNhdmVCdXR0b24oZ2FtZSkpO1xuXG4gIC8vIGN1c3RvbSBhY3Rpb25zIGZvciBjb252ZXJzYXRpb25zXG4gIHZhciBjdXN0b21BY3Rpb25zID0gbmV3IEN1c3RvbUFjdGlvbnMoZ2FtZSk7XG4gIC8vIGNvbnZlcnNhdGlvbiBtYW5hZ2VyXG4gIHZhciBjb252b01hbmFnZXIgPSBuZXcgQ29udmVyc2F0aW9uTWFuYWdlcihnYW1lLCBjdXN0b21BY3Rpb25zKTtcbiAgY29udm9NYW5hZ2VyLmlkeCA9IGdhbWUucGxheWVyLmNvbnZvSWR4O1xuICBjb252b01hbmFnZXIuc2hvd24gPSBnYW1lLnBsYXllci5zaG93bkNvbnZvO1xuXG4gIC8vIGRpYWxvZ3VlIHdpbmRvdyBvYmplY3RcbiAgZ2FtZS5kaWFsb2d1ZVdpbmRvdyA9IG5ldyBEaWFsb2d1ZVdpbmRvdyhnYW1lLCBjb252b01hbmFnZXIpO1xuICAvLyBtZW1vcnkgYmFuayB3aW5kb3cgb2JqZWN0XG4gIGdhbWUubWVtb3J5QmFua1dpbmRvdyA9IG5ldyBNZW1vcnlCYW5rV2luZG93KGdhbWUpO1xuICAvLyBhcmVhIHRyYW5zaXRpb24gd2luZG93IG9iamVjdFxuICBnYW1lLmFyZWFUcmFuc2l0aW9uV2luZG93ID0gbmV3IEFyZWFUcmFuc2l0aW9uV2luZG93KGdhbWUpO1xuXG4gIGdhbWUuZGlhbG9ndWVXaW5kb3cuYmVnaW4oZ2FtZS5wbGF5ZXIuY29udm9GaWxlKTtcblxufTtcbiIsIi8qXG4qIEdhbWUgT3ZlciBzdGF0ZVxuKiA9PT09PT09PT09PT09PT1cbipcbiogVGhlIHBsYXllciBzaG91bGQgYmUgYWJsZSB0byByZXN0YXJ0IGEgc2F2ZWQgZ2FtZSBvciByZXR1cm4gdG8gdGhlIG1haW4gbWVudS4uXG4qXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKGdhbWUsIGdhbWVPdmVyVGV4dCkge1xuICB0aGlzLmdhbWVPdmVyVGV4dCA9IGdhbWVPdmVyVGV4dDtcbn07XG5cbmV4cG9ydHMuY3JlYXRlID0gZnVuY3Rpb24gKGdhbWUpIHtcbiAgdGhpcy5jYW1lcmEuZmxhc2goJyMwMDAwMDAnLCAyMDAwKTtcblxuICBpZiAodHlwZW9mIGdhbWUubXVzaWMgIT09ICd1bmRlZmluZWQnICYmIGdhbWUubXVzaWMgIT09IG51bGwpXG4gICAgZ2FtZS5tdXNpYy5mYWRlT3V0KDEwMDApOyAvLyBmYWRlIG91dCBwcmV2aW91cyBtdXNpY1xuICBnYW1lLm11c2ljID0gZ2FtZS5zb3VuZC5wbGF5KCdjb2xkLW1vb24nKTtcbiAgZ2FtZS5tdXNpYy5sb29wRnVsbCgxKTtcbiAgLy9taWdodCBub3QgYmUgaW4gcXVvdGVzLCBpdHMgYW4gaXNzdWUgYmVsb3dcbiAgdmFyIHNjcmVlbiA9IGdhbWUuYWRkLnNwcml0ZShnYW1lLndvcmxkLmNlbnRlclgsIGdhbWUud29ybGQuY2VudGVyWSwgJ21lbnVfc2NyZWVuJyk7XG4gIHNjcmVlbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gIGxldCBzY3JlZW5Gb250ID0gJ0NpbnplbCBEZWNvcmF0aXZlJztcbiAgbGV0IGZpbGxDb2xvciA9ICcjNDJkZmY0JztcblxuICB2YXIgdGl0bGVUZXh0ID0gZ2FtZS5hZGQudGV4dChnYW1lLndvcmxkLmNlbnRlclgsIGdhbWUud29ybGQuY2VudGVyWS0gODUsICdHYW1lIE92ZXInLCB7XG4gICAgZm9udDogJzc1cHggJyArIHNjcmVlbkZvbnQsXG4gICAgZm9udFdlaWdodDogJ2JvbGQnLFxuICAgIGZpbGw6IGZpbGxDb2xvcixcbiAgICBhbGlnbjogJ2NlbnRlcidcbiAgfSk7XG5cbiAgdmFyIGRlc2NUZXh0ID0gZ2FtZS5hZGQudGV4dChnYW1lLndvcmxkLmNlbnRlclgsIGdhbWUud29ybGQuY2VudGVyWSAtIDIwLCB0aGlzLmdhbWVPdmVyVGV4dCwge1xuICAgIGZvbnQ6ICcyNXB4ICcgKyBzY3JlZW5Gb250LFxuICAgIGZpbGw6IGZpbGxDb2xvcixcbiAgICBhbGlnbjogJ2NlbnRlcidcbiAgfSk7XG5cbiAgdmFyIGNvbnRUZXh0ID0gZ2FtZS5hZGQudGV4dChnYW1lLndvcmxkLmNlbnRlclgsIGdhbWUud29ybGQuY2VudGVyWSArIDMwLCAnUmVsb2FkJywge1xuICAgIGZvbnQ6ICc1MHB4ICcgKyBzY3JlZW5Gb250LFxuICAgIGZpbGw6IGZpbGxDb2xvcixcbiAgICBhbGlnbjogJ2NlbnRlcidcbiAgfSk7XG5cbiAgdmFyIG1haW5NZW51VGV4dCA9IGdhbWUuYWRkLnRleHQoZ2FtZS53b3JsZC5jZW50ZXJYLCBnYW1lLndvcmxkLmNlbnRlclkgKyA4NSwgJ01haW4gTWVudScsIHtcbiAgICBmb250OiAnNTBweCAnICsgc2NyZWVuRm9udCxcbiAgICBmaWxsOiBmaWxsQ29sb3IsXG4gICAgYWxpZ246ICdjZW50ZXInXG4gIH0pO1xuXG4gIHRpdGxlVGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuXG4gIGRlc2NUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgY29udFRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgY29udFRleHQuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgY29udFRleHQuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChmdW5jdGlvbigpIHtcbiAgICBjb250VGV4dC5maWxsID0gJyNmZjAwZmYnO1xuICB9LCB0aGlzKTtcblxuICBjb250VGV4dC5ldmVudHMub25JbnB1dE91dC5hZGQoZnVuY3Rpb24oKSB7XG4gICAgY29udFRleHQuZmlsbCA9ICcjNDJkZmY0JztcbiAgfSwgdGhpcyk7XG5cbiAgY29udFRleHQuZXZlbnRzLm9uSW5wdXREb3duLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHJlc3VtZUdhbWUgPSB0cnVlO1xuICAgIGdhbWUuc3RhdGUuc3RhcnQoJ0dhbWUnLCB0cnVlLCBmYWxzZSwgZ2FtZSwgcmVzdW1lR2FtZSk7XG4gIH0sIHRoaXMpO1xuXG4gIG1haW5NZW51VGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICBtYWluTWVudVRleHQuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgbWFpbk1lbnVUZXh0LmV2ZW50cy5vbklucHV0T3Zlci5hZGQoZnVuY3Rpb24oKSB7XG4gICAgbWFpbk1lbnVUZXh0LmZpbGwgPSAnI2ZmMDBmZic7XG4gIH0sIHRoaXMpO1xuXG4gIG1haW5NZW51VGV4dC5ldmVudHMub25JbnB1dE91dC5hZGQoZnVuY3Rpb24oKSB7XG4gICAgbWFpbk1lbnVUZXh0LmZpbGwgPSAnIzQyZGZmNCc7XG4gIH0sIHRoaXMpO1xuXG4gIG1haW5NZW51VGV4dC5ldmVudHMub25JbnB1dERvd24uYWRkKGZ1bmN0aW9uICgpIHtcbiAgICBnYW1lLnN0YXRlLnN0YXJ0KCdNYWluTWVudScpO1xuICB9LCB0aGlzKTtcblxufTtcbiIsIi8qXG4qIE1haW4gTWVudSBzdGF0ZVxuKiA9PT09PT09PT09PT09PT1cbipcbiogVGhlIHBsYXllciBzaG91bGQgYmUgYWJsZSB0byByZXN0YXJ0IGEgc2F2ZWQgZ2FtZSBvciBzdGFydCBhIG5ldyBnYW1lLlxuKlxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmNyZWF0ZSA9IGZ1bmN0aW9uIChnYW1lKSB7XG5cbiAgLy9taWdodCBub3QgYmUgaW4gcXVvdGVzLCBpdHMgYW4gaXNzdWUgYmVsb3dcbiAgZ2FtZS5tdXNpYyA9IGdhbWUuc291bmQucGxheSgnbWVudS10aGVtZS10ZXJyYWZvcm0nKTtcbiAgZ2FtZS5tdXNpYy5sb29wRnVsbCgxKTtcblxuICB2YXIgc2NyZWVuID0gZ2FtZS5hZGQuc3ByaXRlKGdhbWUud29ybGQuY2VudGVyWCwgZ2FtZS53b3JsZC5jZW50ZXJZLCAnbWVudV9zY3JlZW4nKTtcbiAgc2NyZWVuLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgdmFyIGxvZ28gPSBnYW1lLmFkZC5zcHJpdGUoZ2FtZS53b3JsZC5jZW50ZXJYLCBnYW1lLndvcmxkLmNlbnRlclkgLSAzMCwgJ3F1YXNhcmlhLWxvZ28tTU0nKTtcbiAgbG9nby5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICBsb2dvLmFscGhhID0gLjE7XG5cbiAgbGV0IHNjcmVlbkZvbnQgPSAnQ2luemVsIERlY29yYXRpdmUnO1xuICBsZXQgZmlsbENvbG9yID0gJyM0MmRmZjQnO1xuXG4gIHZhciB0aXRsZVRleHQgPSBnYW1lLmFkZC50ZXh0KGdhbWUud29ybGQuY2VudGVyWCwgZ2FtZS53b3JsZC5jZW50ZXJZLSA3NSwgJ1F1YXNhcmlhJywge1xuICAgIGZvbnQ6ICc3NXB4ICcgKyBzY3JlZW5Gb250LFxuICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICBmaWxsOiBmaWxsQ29sb3IsXG4gICAgYWxpZ246ICdjZW50ZXInXG4gIH0pO1xuXG4gIHZhciBjb250VGV4dCA9IGdhbWUuYWRkLnRleHQoZ2FtZS53b3JsZC5jZW50ZXJYLCBnYW1lLndvcmxkLmNlbnRlclksICdDb250aW51ZScsIHtcbiAgICBmb250OiAnNTBweCAnICsgc2NyZWVuRm9udCxcbiAgICBmaWxsOiBmaWxsQ29sb3IsXG4gICAgYWxpZ246ICdjZW50ZXInXG4gIH0pO1xuXG4gIHZhciBuZXdHYW1lVGV4dCA9IGdhbWUuYWRkLnRleHQoZ2FtZS53b3JsZC5jZW50ZXJYLCBnYW1lLndvcmxkLmNlbnRlclkgKyA1NSwgJ05ldyBHYW1lJywge1xuICAgIGZvbnQ6ICc1MHB4ICcgKyBzY3JlZW5Gb250LFxuICAgIGZpbGw6IGZpbGxDb2xvcixcbiAgICBhbGlnbjogJ2NlbnRlcidcbiAgfSk7XG5cbiAgdGl0bGVUZXh0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cblxuICBjb250VGV4dC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xuICBjb250VGV4dC5pbnB1dEVuYWJsZWQgPSB0cnVlO1xuICBjb250VGV4dC5ldmVudHMub25JbnB1dE92ZXIuYWRkKGZ1bmN0aW9uKCkge1xuICAgIGNvbnRUZXh0LmZpbGwgPSAnI2ZmMDBmZic7XG4gIH0sIHRoaXMpO1xuXG4gIGNvbnRUZXh0LmV2ZW50cy5vbklucHV0T3V0LmFkZChmdW5jdGlvbigpIHtcbiAgICBjb250VGV4dC5maWxsID0gJyM0MmRmZjQnO1xuICB9LCB0aGlzKTtcblxuICBjb250VGV4dC5ldmVudHMub25JbnB1dERvd24uYWRkKGZ1bmN0aW9uICgpIHtcbiAgICBsZXQgcmVzdW1lR2FtZSA9IHRydWU7XG4gICAgZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScsIHRydWUsIGZhbHNlLCBnYW1lLCByZXN1bWVHYW1lKTtcbiAgfSwgdGhpcyk7XG5cbiAgbmV3R2FtZVRleHQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcbiAgbmV3R2FtZVRleHQuaW5wdXRFbmFibGVkID0gdHJ1ZTtcbiAgbmV3R2FtZVRleHQuZXZlbnRzLm9uSW5wdXRPdmVyLmFkZChmdW5jdGlvbigpIHtcbiAgICBuZXdHYW1lVGV4dC5maWxsID0gJyNmZjAwZmYnO1xuICB9LCB0aGlzKTtcblxuICBuZXdHYW1lVGV4dC5ldmVudHMub25JbnB1dE91dC5hZGQoZnVuY3Rpb24oKSB7XG4gICAgbmV3R2FtZVRleHQuZmlsbCA9ICcjNDJkZmY0JztcbiAgfSwgdGhpcyk7XG5cbiAgbmV3R2FtZVRleHQuZXZlbnRzLm9uSW5wdXREb3duLmFkZChmdW5jdGlvbiAoKSB7XG4gICAgbGV0IHJlc3VtZUdhbWUgPSBmYWxzZTtcbiAgICBnYW1lLnN0YXRlLnN0YXJ0KCdHYW1lJywgdHJ1ZSwgZmFsc2UsIGdhbWUsIHJlc3VtZUdhbWUpO1xuICB9LCB0aGlzKTtcblxufTtcbiIsIi8qXG4gKiBQcmVsb2FkZXIgc3RhdGVcbiAqID09PT09PT09PT09PT09PVxuICpcbiAqIFRha2VzIGNhcmUgb2YgbG9hZGluZyB0aGUgbWFpbiBnYW1lIGFzc2V0cywgaW5jbHVkaW5nIGdyYXBoaWNzIGFuZCBzb3VuZFxuICogZWZmZWN0cywgd2hpbGUgZGlzcGxheWluZyBhIGJ1c3kgc3BsYXNoIHNjcmVlbi5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NldHMgPSByZXF1aXJlKCcuLi9hc3NldHMnKTtcblxuXG5mdW5jdGlvbiBzaG93U3BsYXNoU2NyZWVuIChnYW1lKSB7XG4gIGdhbWUuYWRkLmltYWdlKDAsIDAsICdzcGxhc2gtc2NyZWVuJyk7XG4gIGdhbWUubG9hZC5zZXRQcmVsb2FkU3ByaXRlKGdhbWUuYWRkLmltYWdlKDgyLCAyODIsICdwcm9ncmVzcy1iYXInKSk7XG59XG5cbmV4cG9ydHMucHJlbG9hZCA9IGZ1bmN0aW9uIChnYW1lKSB7XG4gIHNob3dTcGxhc2hTY3JlZW4oZ2FtZSk7XG4gIGdhbWUubG9hZC5wYWNrKCdnYW1lJywgbnVsbCwgYXNzZXRzKTtcbiAgZ2FtZS5sb2FkLnBhY2soJ21haW5fbWVudScsIG51bGwsIGFzc2V0cyk7XG4gIGdhbWUubG9hZC5wYWNrKCd1aScsIG51bGwsIGFzc2V0cyk7XG4gIGdhbWUubG9hZC5wYWNrKCdjb252ZXJzYXRpb25zJywgbnVsbCwgYXNzZXRzKTtcbiAgZ2FtZS5sb2FkLnBhY2soJ3NvdW5kcycsIG51bGwsIGFzc2V0cyk7XG4gIGdhbWUubG9hZC5wYWNrKCdsb2dpY19iYXR0bGUnLCBudWxsLCBhc3NldHMpO1xufTtcblxuZXhwb3J0cy5jcmVhdGUgPSBmdW5jdGlvbiAoZ2FtZSkge1xuICAvLyBIZXJlIGlzIGEgZ29vZCBwbGFjZSB0byBpbml0aWFsaXplIHBsdWdpbnMgZGVwZW5kZW50IG9mIGFueSBnYW1lIGFzc2V0LlxuICAvLyBEb24ndCBmb3JnZXQgdG8gYHJlcXVpcmVgIHRoZW0gZmlyc3QuIEV4YW1wbGU6XG4gIC8vZ2FtZS5teVBsdWdpbiA9IGdhbWUucGx1Z2lucy5hZGQoTXlQbHVnaW4vKiwgLi4uIHBhcmFtZXRlcnMgLi4uICovKTtcblxuICAvLyBTbGljayBVSSBpbml0aWFsaXphdGlvbjsgYWRkZWQgZnJvbSBpbmRleC5odG1sXG4gIC8vIE5PVEU6IHNsaWNrIFVJIGxvYWRzIHRoZW1lIGZyb20gY2FjaGVcbiAgLy8gYmV0d2VlbiBwcmVsb2FkIGFuZCBjcmVhdGUgZnVuY3Rpb25zIEZPUiBFQUNIIFNUQVRFXG4gIGdhbWUuc2xpY2tVSSA9IGdhbWUucGx1Z2lucy5hZGQoUGhhc2VyLlBsdWdpbi5TbGlja1VJKTtcblxuICBnYW1lLnN0YXRlLnN0YXJ0KCdNYWluTWVudScpO1xuXG59O1xuIiwiLypcbiAqIGBzdGF0ZXNgIG1vZHVsZVxuICogPT09PT09PT09PT09PT09XG4gKlxuICogRGVjbGFyZXMgYWxsIHByZXNlbnQgZ2FtZSBzdGF0ZXMuXG4gKiBFeHBvc2UgdGhlIHJlcXVpcmVkIGdhbWUgc3RhdGVzIHVzaW5nIHRoaXMgbW9kdWxlLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy5Cb290ID0gcmVxdWlyZSgnLi9Cb290Jyk7XG5leHBvcnRzLlByZWxvYWRlciA9IHJlcXVpcmUoJy4vUHJlbG9hZGVyJyk7XG5leHBvcnRzLk1haW5NZW51ID0gcmVxdWlyZSgnLi9NYWluTWVudScpO1xuZXhwb3J0cy5HYW1lID0gcmVxdWlyZSgnLi9HYW1lJyk7XG5leHBvcnRzLkJhdHRsZWdyb3VuZCA9IHJlcXVpcmUoJy4vQmF0dGxlZ3JvdW5kJyk7XG5leHBvcnRzLkdhbWVPdmVyID0gcmVxdWlyZSgnLi9HYW1lT3ZlcicpO1xuZXhwb3J0cy5DcmVkaXRzID0gcmVxdWlyZSgnLi9DcmVkaXRzJyk7IiwiLypcbiAqIEN1c3RvbSBBY3Rpb25zXG4gKiA9PT09PT09PT09PT09PT09PT09XG4gKlxuICogU3RvcmVzIGNvZGUgZm9yIGN1c3RvbSBhY3Rpb25zIHRvIGJlIHRha2VuIGR1cmluZyBjb252ZXJzYXRpb25zLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBDdXN0b21BY3Rpb25zO1xuXG5mdW5jdGlvbiBDdXN0b21BY3Rpb25zKGdhbWUvKiwgLi4uYXJncyovKSB7XG4gIFBoYXNlci5Hcm91cC5jYWxsKHRoaXMsIGdhbWUvKiwgLi4uYXJncyovKTtcbiAgdGhpcy5fZ2FtZSA9IGdhbWU7XG59XG5cbkN1c3RvbUFjdGlvbnMucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuR3JvdXAucHJvdG90eXBlKTtcbkN1c3RvbUFjdGlvbnMucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ3VzdG9tQWN0aW9ucztcblxuQ3VzdG9tQWN0aW9ucy5wcm90b3R5cGUuY3VzdG9tQWN0aW9uID0gZnVuY3Rpb24oYWN0aW9uKSB7XG4gIGlmIChhY3Rpb24uc3RhcnRzV2l0aCgnZmFkZUluQW5kT3V0JykpIHtcbiAgICB0aGlzLmZhZGVJbkFuZE91dChwYXJzZUludChhY3Rpb24uc3Vic3RyaW5nKCdmYWRlSW5BbmRPdXQnLmxlbmd0aCkpKTtcbiAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdzdGFydENvbnY6cHJvbG9ndWUwMicpIHtcbiAgICB0aGlzLl9nYW1lLmNhbWVyYS5mYWRlKCcjMDAwMDAwJywgMjAwMCk7XG4gICAgdGhpcy5fZ2FtZS5jYW1lcmEub25GYWRlQ29tcGxldGUuYWRkT25jZShmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuX2dhbWUuY2FtZXJhLmZsYXNoKCcjMDAwMDAwJywgMjAwMCk7XG4gICAgICB0aGlzLnN0YXJ0Q29udmVyc2F0aW9uKCdwcm9sb2d1ZTAyJyk7XG4gICAgfSwgdGhpcyk7XG4gIH0gZWxzZSBpZiAoYWN0aW9uLnN0YXJ0c1dpdGgoJ21vdmVUb0FyZWE6JykpIHtcbiAgICB0aGlzLm1vdmVUb0FyZWEoYWN0aW9uLnN1YnN0cmluZygnbW92ZVRvQXJlYTonLmxlbmd0aCkpO1xuICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3N0YXJ0QmF0dGxlJykge1xuICAgIHRoaXMubG9hZEJhdHRsZSgpOyAgXG4gIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnbG9hZE1haW5HYW1lU3RhdGUnKSB7XG4gICAgdGhpcy5fZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScsIHRydWUsIGZhbHNlLCB0aGlzLl9nYW1lLCBmYWxzZSwgdHJ1ZSk7XG4gIH0gZWxzZSBpZiAoYWN0aW9uLnN0YXJ0c1dpdGgoJ2dhbWVvdmVyJykpIHtcbiAgICB0aGlzLl9nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lT3ZlcicsIHRydWUsIGZhbHNlLCB0aGlzLl9nYW1lLCBhY3Rpb24uc3Vic3RyaW5nKCdnYW1lb3ZlcicubGVuZ3RoKSk7XG4gIH0gZWxzZSBpZiAoYWN0aW9uID09PSAnY3JlZGl0cycpIHtcbiAgICB0aGlzLl9nYW1lLnN0YXRlLnN0YXJ0KCdDcmVkaXRzJywgdHJ1ZSwgZmFsc2UsIHRoaXMuX2dhbWUpO1xuICB9XG59O1xuXG5cblxuXG5DdXN0b21BY3Rpb25zLnByb3RvdHlwZS5sb2FkQmF0dGxlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2dhbWUuZGlhbG9ndWVXaW5kb3cuaGlkZSgpO1xuICB0aGlzLl9nYW1lLnN0YXRlLnN0YXJ0KCdCYXR0bGVncm91bmQnLCB0cnVlLCBmYWxzZSk7XG59O1xuXG5DdXN0b21BY3Rpb25zLnByb3RvdHlwZS5zdGFydENvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uKGNvbnYpIHtcbiAgdGhpcy5fZ2FtZS5kaWFsb2d1ZVdpbmRvdy5iZWdpbihjb252KTtcbn07XG5cbkN1c3RvbUFjdGlvbnMucHJvdG90eXBlLm1vdmVUb0FyZWEgPSBmdW5jdGlvbihhcmVhKSB7XG4gIHRoaXMuX2dhbWUucm9vbS5sb2FkQXJlYShhcmVhKTtcbn07XG5cbkN1c3RvbUFjdGlvbnMucHJvdG90eXBlLmZhZGVJbkFuZE91dCA9IGZ1bmN0aW9uKGR1cmF0aW9uKSB7XG4gIHRoaXMuX2dhbWUuY2FtZXJhLmZhZGUoJyMwMDAwMDAnLCBkdXJhdGlvbi8yKTtcbiAgdGhpcy5fZ2FtZS5kaWFsb2d1ZVdpbmRvdy5hdmF0YXIudmlzaWJsZSA9IGZhbHNlO1xuICB0aGlzLl9nYW1lLmRpYWxvZ3VlV2luZG93LmRpYWxvZ1BhbmVsLnZpc2libGUgPSBmYWxzZTtcbiAgdGhpcy5fZ2FtZS5jYW1lcmEub25GYWRlQ29tcGxldGUuYWRkT25jZShmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9nYW1lLmNhbWVyYS5mbGFzaCgnIzAwMDAwMCcsIGR1cmF0aW9uLzIpO1xuICAgIHRoaXMuX2dhbWUuZGlhbG9ndWVXaW5kb3cuYXZhdGFyLnZpc2libGUgPSB0cnVlO1xuICAgIHRoaXMuX2dhbWUuZGlhbG9ndWVXaW5kb3cuZGlhbG9nUGFuZWwudmlzaWJsZSA9IHRydWU7XG4gIH0sIHRoaXMpO1xufTsiLCJtb2R1bGUuZXhwb3J0cz17XG5cdFwic2h1dHRsZVwiOiB7XG5cdFx0XCJpZFwiOiBcInNodXR0bGVcIixcblx0XHRcIm5hbWVcIjogXCJTaHV0dGxlXCIsXG5cdFx0XCJiZ1wiOiBcInNodXR0bGVcIixcblx0XHRcIm11c2ljXCI6IFwicHV6emxlMlwiLFxuXHRcdFwiaXRlbXNcIjogW1xuXHRcdFx0e1xuXHRcdFx0XHRcImlkXCI6IFwibGlzdGVuZXJcIixcblx0XHRcdFx0XCJ4XCI6IDE1MCxcblx0XHRcdFx0XCJ5XCI6IDE1MCxcblx0XHRcdFx0XCJoZWlnaHRcIjogMTAwLFxuXHRcdFx0XHRcIndpZHRoXCI6IDEwMFxuXHRcdFx0fSwge1xuXHRcdFx0XHRcImlkXCI6IFwibm90ZVwiLFxuXHRcdFx0XHRcInhcIjogNzIwLFxuXHRcdFx0XHRcInlcIjogMjAwLFxuXHRcdFx0XHRcImhlaWdodFwiOiAxMDAsXG5cdFx0XHRcdFwid2lkdGhcIjogMTAwXG5cdFx0XHR9XG5cdFx0XSxcblx0XHRcInBsYWNlYWJsZXNcIjogW10sXG5cdFx0XCJucGNzXCI6IFtdLFxuXHRcdFwibmF2aWdhYmxlXCI6IGZhbHNlLFxuXHRcdFwiYXJlYUFjY2Vzc1wiOiBbXVxuXHR9LFxuXHRcImhhbmdhclwiOiB7XG5cdFx0XCJpZFwiOiBcImhhbmdhclwiLFxuXHRcdFwibmFtZVwiOiBcIkhhbmdhciBCYXlcIixcblx0XHRcImJnXCI6IFwiaGFuZ2FyXCIsXG5cdFx0XCJtdXNpY1wiOiBcImxvc3RqdW5nbGVcIixcblx0XHRcIml0ZW1zXCI6IFtdLFxuXHRcdFwicGxhY2VhYmxlc1wiOiBbXG5cdFx0XHR7XG5cdFx0XHRcdFwiaWRcIjogXCJzaHV0dGxlLXBsYWNlYWJsZVwiLFxuXHRcdFx0XHRcInhcIjogNDc1LFxuXHRcdFx0XHRcInlcIjogMzAwLFxuXHRcdFx0XHRcImhlaWdodFwiOiAzMDAsXG5cdFx0XHRcdFwid2lkdGhcIjogNDAxXG5cdFx0XHR9XG5cdFx0XSxcblx0XHRcIm5wY3NcIjogW1xuXHRcdFx0e1xuXHRcdFx0XHRcImlkXCI6IFwiVmVzcGVyXCIsXG5cdFx0XHRcdFwieFwiOiAxMDAsXG5cdFx0XHRcdFwieVwiOiAzNTAsXG5cdFx0XHRcdFwiaGVpZ2h0XCI6IDM1MCxcblx0XHRcdFx0XCJ3aWR0aFwiOiAxNTBcblx0XHRcdH0sIHtcblx0XHRcdFx0XCJpZFwiOiBcIkdsZWFtaW5nIFNob2FsXCIsXG5cdFx0XHRcdFwieFwiOiA0MDAsXG5cdFx0XHRcdFwieVwiOiAzMDAsXG5cdFx0XHRcdFwiaGVpZ2h0XCI6IDQwMCxcblx0XHRcdFx0XCJ3aWR0aFwiOiA0MDAsXG5cdFx0XHRcdFwic2hvd2lmXCI6IHtcblx0XHRcdFx0XHRcInhlbm9wc3ljaG9sb2dpc3RcIjogXCJkb25lXCIsXG5cdFx0XHRcdFx0XCJ4ZW5vYmlvbG9naXN0XCI6IFwiZG9uZVwiXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRdLFxuXHRcdFwibmF2aWdhYmxlXCI6IHRydWUsXG5cdFx0XCJhcmVhQWNjZXNzXCI6IFtcIm1lZGJheVwiXVxuXHR9LFxuXHRcIm1lZGJheVwiOiB7XG5cdFx0XCJpZFwiOiBcIm1lZGJheVwiLFxuXHRcdFwibmFtZVwiOiBcIk1lZGljYWwgQmF5XCIsXG5cdFx0XCJiZ1wiOiBcIm1lZGJheVwiLFxuXHRcdFwibXVzaWNcIjogXCJwdXp6bGUxXCIsXG5cdFx0XCJpdGVtc1wiOiBbXSxcblx0XHRcInBsYWNlYWJsZXNcIjogW10sXG5cdFx0XCJucGNzXCI6IFtcblx0XHRcdHtcblx0XHRcdFx0XCJpZFwiOiBcIkRyLiBUYWx2aW5lIE1lc21lci1RdWl2ZXJseVwiLFxuXHRcdFx0XHRcInhcIjogMzIwLFxuXHRcdFx0XHRcInlcIjogMzQwLFxuXHRcdFx0XHRcImhlaWdodFwiOiAxODMsXG5cdFx0XHRcdFwid2lkdGhcIjogMTAwXG5cdFx0XHR9LCB7XG5cdFx0XHRcdFwiaWRcIjogXCJEci4gVmFsa2VuXCIsXG5cdFx0XHRcdFwieFwiOiA2MDAsXG5cdFx0XHRcdFwieVwiOiAyNTAsXG5cdFx0XHRcdFwiaGVpZ2h0XCI6IDMzMCxcblx0XHRcdFx0XCJ3aWR0aFwiOiAxMTIuNVxuXHRcdFx0fVxuXHRcdF0sXG5cdFx0XCJuYXZpZ2FibGVcIjogdHJ1ZSxcblx0XHRcImFyZWFBY2Nlc3NcIjogW1wiaGFuZ2FyXCJdXG5cdH1cbn1cbiIsIm1vZHVsZS5leHBvcnRzPXtcblx0XCJsaXN0ZW5lclwiOiB7XG5cdFx0XCJpZFwiOiBcImxpc3RlbmVyXCIsXG5cdFx0XCJ1cmxcIjogXCJsaXN0ZW5lci5wbmdcIixcblx0XHRcIm5hbWVcIjogXCJMaXN0ZW5lclwiLFxuXHRcdFwiZGVzY1wiOiBcIkEgc21hbGwsIHBvY2tldC1zaXplZCBibHVlIG9yYiB0aGF0IGlzIG5vcm1hbGx5IGNvb2wgdG8gdGhlIHRvdWNoLCBidXQgd2FybXMgd2hlbiB5b3VyIG15c3RlcmlvdXMgcmVzY3VlciB1c2VzIGl0IHRvIGNvbW11bmljYXRlIHdpdGggeW91LiBIZS9zaGUgdG9sZCB5b3UgdG8ga2VlcCB0aGlzIHNhZmUsIGFuZCBsZXQgbm8gb25lIGtub3cgb2YgaXRzIHRydWUgcHVycG9zZS5cIlxuXHR9LFxuXHRcIm5vdGVcIjoge1xuXHRcdFwiaWRcIjogXCJub3RlXCIsXG5cdFx0XCJ1cmxcIjogXCJub3RlLnBuZ1wiLFxuXHRcdFwibmFtZVwiOiBcIkluZGVjaXBoZXJhYmxlIE5vdGVcIixcblx0XHRcImRlc2NcIjogXCJBIG5vdGUgY292ZXJlZCBpbiBzdHJhbmdlIGFsaWVuIHN5bWJvbHMuIFlvdXIgbXlzdGVyaW91cyByZXNjdWVyIGxlZnQgdGhpcyBmb3IgeW91LCBzYXlpbmcgaXQgd291bGQgaGVscCBleHBsYWluIHRoaW5ncywgYnV0IHNvIGZhciB5b3UgY2FuJ3QgdW5kZXJzdGFuZCBpdC5cIlxuXHR9LFxuXHRcInNodXR0bGUtcGxhY2VhYmxlXCI6IHtcblx0XHRcImlkXCI6IFwic2h1dHRsZS1wbGFjZWFibGVcIixcblx0XHRcInVybFwiOiBcInNodXR0bGUtcGxhY2VhYmxlLnBuZ1wiLFxuXHRcdFwibmFtZVwiOiBcIk15IFNodXR0bGVcIixcblx0XHRcIm1lc3NhZ2VcIjogXCJUaGF0J3MgbXkgc2h1dHRsZSwgYnV0IEkgY2FuJ3QgZ28gaW4gdGhlcmUgcmlnaHQgbm93LlwiXG5cdH0sXG5cdFwiYmlvbG9naXN0QXBwcm92YWxcIjoge1xuXHRcdFwiaWRcIjogXCJiaW9sb2dpc3RBcHByb3ZhbFwiLFxuXHRcdFwidXJsXCI6IFwidGFsdmluZS5wbmdcIixcblx0XHRcIm5hbWVcIjogXCJEci4gVGFsdmluZSdzIFJlcG9ydFwiLFxuXHRcdFwiZGVzY1wiOiBcIkEgY2xlYW4gYmlsbCBvZiBoZWFsdGggZnJvbSBEci4gVGFsdmluZSBNZXNtZXItUXVpdmVybHksIFN0YXRpb24gWmVybydzIHhlbm9iaW9sb2dpc3QuXCJcblx0fSxcblx0XCJwc3ljaG9sb2dpc3RBcHByb3ZhbFwiOiB7XG5cdFx0XCJpZFwiOiBcInBzeWNob2xvZ2lzdEFwcHJvdmFsXCIsXG5cdFx0XCJ1cmxcIjogXCJ2YWxrZW4ucG5nXCIsXG5cdFx0XCJuYW1lXCI6IFwiRHIuIFZhbGtlbidzIFJlcG9ydFwiLFxuXHRcdFwiZGVzY1wiOiBcIkEgYnJpZWZpbmcgb24geW91ciBwc3ljaG9sb2dpY2FsIHN0YXRlIGZyb20gRHIuIFZhbGtlbiwgU3RhdGlvbiBaZXJvJ3MgeGVub3BzeWNob2xvZ2lzdC5cIlxuXHR9LFxuXHRcInNlY3JldGFyeU5vdGVcIjoge1xuXHRcdFwiaWRcIjogXCJzZWNyZXRhcnlOb3RlXCIsXG5cdFx0XCJ1cmxcIjogXCJzZWNyZXRhcnlOb3RlLnBuZ1wiLFxuXHRcdFwibmFtZVwiOiBcIk1lbW8gdG8gR2FybmV0dGFcIixcblx0XHRcImRlc2NcIjogXCJcXFwiR2FybmV0dGE6IGtlZXAgdGFsa2luZyB3aXRoIENsZWFyYW5jZSBzdGFmZi4gWW91IHdvbid0IGJlIGludGVycnVwdGVkLlxcXCJcIlxuXHR9XG59IiwibW9kdWxlLmV4cG9ydHM9e1xuXHRcIk15c3RlcmlvdXMgVm9pY2VcIjoge1xuXHRcdFwiaWRcIjogXCJNeXN0ZXJpb3VzIFZvaWNlXCIsXG5cdFx0XCJuYW1lXCI6IFwiTXlzdGVyaW91cyBWb2ljZVwiLFxuXHRcdFwiaW1hZ2VcIjogXCJteXN0ZXJpb3VzLXZvaWNlXCIsXG5cdFx0XCJhdmF0YXJcIjogXCJteXN0ZXJpb3VzLXZvaWNlXCIsXG5cdH0sXG5cdFwiR2xlYW1pbmcgU2hvYWxcIjoge1xuXHRcdFwiaWRcIjogXCJHbGVhbWluZyBTaG9hbFwiLFxuXHRcdFwibmFtZVwiOiBcIkdsZWFtaW5nIFNob2FsXCIsXG5cdFx0XCJpbWFnZVwiOiBcImdsZWFtaW5nLXNob2FsLW5wY1wiLFxuXHRcdFwiYXZhdGFyXCI6IFwiZ2xlYW1pbmctc2hvYWxcIixcblx0XHRcImNvbnZcIjogXCJnbGVhbWluZy1zaG9hbDAxXCJcblx0fSxcblx0XCJVbmtub3duIEFsaWVuXCI6IHtcblx0XHRcImlkXCI6IFwiR2xlYW1pbmcgU2hvYWxcIixcblx0XHRcIm5hbWVcIjogXCJVbmtub3duIEFsaWVuXCIsXG5cdFx0XCJpbWFnZVwiOiBcInVua25vd24tYWxpZW5cIixcblx0XHRcImF2YXRhclwiOiBcInVua25vd24tYWxpZW5cIlxuXHR9LFxuXHRcIktpc21ldFwiOiB7XG5cdFx0XCJpZFwiOiBcIktpc21ldFwiLFxuXHRcdFwibmFtZVwiOiBcIktpc21ldFwiLFxuXHRcdFwiaW1hZ2VcIjogXCJraXNtZXRcIixcblx0XHRcImF2YXRhclwiOiBcImtpc21ldFwiXG5cdH0sXG5cdFwiVmVzcGVyXCI6IHtcblx0XHRcImlkXCI6IFwiVmVzcGVyXCIsXG5cdFx0XCJuYW1lXCI6IFwiVmVzcGVyXCIsXG5cdFx0XCJpbWFnZVwiOiBcInZlc3Blci1ucGNcIixcblx0XHRcImF2YXRhclwiOiBcInZlc3BlclwiLFxuXHRcdFwiY29udlwiOiBcInZlc3BlcjAxXCJcblx0fSxcblx0XCJEci4gVGFsdmluZSBNZXNtZXItUXVpdmVybHlcIjoge1xuXHRcdFwiaWRcIjogXCJEci4gVGFsdmluZSBNZXNtZXItUXVpdmVybHlcIixcblx0XHRcIm5hbWVcIjogXCJEci4gVGFsdmluZVwiLFxuXHRcdFwiaW1hZ2VcIjogXCJ0YWx2aW5lLW5wY1wiLFxuXHRcdFwiYXZhdGFyXCI6IFwidGFsdmluZVwiLFxuXHRcdFwiY29udlwiOiBcInRhbHZpbmUwMVwiXG5cdH0sXG5cdFwiRHIuIFZhbGtlblwiOiB7XG5cdFx0XCJpZFwiOiBcIkRyLiBWYWxrZW5cIixcblx0XHRcIm5hbWVcIjogXCJEci4gVmFsa2VuXCIsXG5cdFx0XCJpbWFnZVwiOiBcInZhbGtlbi1ucGNcIixcblx0XHRcImF2YXRhclwiOiBcInZhbGtlblwiLFxuXHRcdFwiY29udlwiOiBcInZhbGtlbjAxXCJcblx0fVxufSIsIm1vZHVsZS5leHBvcnRzPXtcblx0XCJzcGVha2VyXCI6IHtcblx0XHRcImZvbnRcIjogXCIyMHB4IEdvdWR5IEJvb2tsZXR0ZXIgMTkxMVwiLCBcblx0XHRcImZpbGxcIjogXCIjNDhmMmZmXCIsIFxuXHRcdFwid29yZFdyYXBcIjogZmFsc2UsIFxuXHRcdFwiYWxpZ25cIjogXCJsZWZ0XCJcblx0fSxcblx0XCJkaWFsb2d1ZUJvZHlcIjoge1xuXHRcdFwiZm9udFwiOiBcIjE0cHggT3BlbiBTYW5zXCIsIFxuXHRcdFwiZmlsbFwiOiBcIiM0OGYyZmZcIiwgXG5cdFx0XCJ3b3JkV3JhcFwiOiB0cnVlLCBcblx0XHQvL1wid29yZFdyYXBXaWR0aFwiOiBcInRoaXMuX2RpYWxvZ1RleHRXaWR0aFwiLFxuXHRcdFwiYWxpZ25cIjogXCJsZWZ0XCJcblx0fSxcblx0XCJjaG9pY2VCdXR0b25cIjoge1xuXHRcdFwiZm9udFwiOiBcIjE0cHggT3BlbiBTYW5zXCIsXG5cdFx0XCJmaWxsXCI6IFwiIzQ4ZjJmZlwiLCBcblx0XHRcIndvcmRXcmFwXCI6IHRydWUsXG5cdFx0Ly9cIndvcmRXcmFwV2lkdGhcIjogdGhpcy5fZGlhbG9nVGV4dFdpZHRoIC0gYnV0dG9uU2lkZVBhZGRpbmcsIFxuXHRcdFwiYWxpZ25cIjogXCJsZWZ0XCJcblx0fSxcblx0XCJ0b2FzdFwiOiB7XG5cdFx0XCJmb250XCI6IFwiMTRweCBPcGVuIFNhbnNcIixcblx0XHRcImZpbGxcIjogXCIjNDhmMmZmXCIsXG5cdFx0XCJib3VuZHNBbGlnbkhcIjogXCJjZW50ZXJcIlxuXHR9LFxuXHRcImNyZWRpYmlsaXR5XCI6IHtcblx0XHRcImZvbnRcIjogXCIzMnB4IENpbnplbCBEZWNvcmF0aXZlXCIsIFxuXHRcdFwiZm9udFdlaWdodFwiOiBcImJvbGRcIixcblx0XHRcImZpbGxcIjogXCIjNDhmMmZmXCIsIFxuXHRcdFwiYm91bmRzQWxpZ25IXCI6IFwiY2VudGVyXCIsIFxuXHRcdFwiYm91bmRzQWxpZ25WXCI6IFwibWlkZGxlXCJcblx0fSxcblx0XCJtYWluTWVudVRpdGxlXCI6IHtcblx0XHRcImZvbnRcIjogXCI3NXB4IENpbnplbCBEZWNvcmF0aXZlXCIsXG5cdFx0XCJmb250V2VpZ2h0XCI6IFwiYm9sZFwiLFxuXHRcdFwiZmlsbFwiOiBcIiM0MmRmZjRcIixcblx0XHRcImFsaWduXCI6IFwiY2VudGVyXCJcblx0fSwgXG59Il19"}